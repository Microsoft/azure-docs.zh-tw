---
title: 記憶體和並行存取限制 - Azure SQL 資料倉儲 | Microsoft Docs
description: 檢視在 Azure SQL 資料倉儲 中配置給不同效能等級與資源類別的記憶體和並行存取限制。
services: sql-data-warehouse
author: ronortloff
manager: craigg
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.component: manage
ms.date: 07/10/2018
ms.author: rortloff
ms.reviewer: igorstan
ms.openlocfilehash: e901d147d757a046d50927d6f2651b0a74657b1f
ms.sourcegitcommit: f94f84b870035140722e70cab29562e7990d35a3
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/30/2018
ms.locfileid: "43288184"
---
# <a name="memory-and-concurrency-limits-for-azure-sql-data-warehouse"></a>Azure SQL 資料倉儲的記憶體和並行存取限制
檢視在 Azure SQL 資料倉儲 中配置給不同效能等級與資源類別的記憶體和並行存取限制。 如需詳細資訊，並將這些功能套用到工作負載管理計劃，請參閱[適用於工作負載管理的資源類別](resource-classes-for-workload-management.md)。 

目前有兩個適用於 SQL 資料倉儲的世代 – Gen1 和 Gen2。 我們建議您使用 Gen2 的 SQL 資料倉儲，以取得最佳的資料倉儲工作負載效能。 Gen2 導入了新的 NVMe 固態硬碟快取，讓最頻繁存取的資料保持在 CPU 附近。 如此可移除最密集和需求最高之工作負載的遠端 I/O。 除了效能之外，Gen2 還提供最大的調整層級，方法是讓您相應增加到 30,000 個資料倉儲單位，並且提供無限的單欄式儲存體。 我們仍然會支援前一代 (Gen1) 的 SQL 資料倉儲，並且保留相同的功能。但是，我們鼓勵您儘早[升級到 Gen2](upgrade-to-latest-generation.md)。 

## <a name="data-warehouse-capacity-settings"></a>資料倉儲容量設定
下表顯示不同效能等級的資料倉儲最大容量。 若要變更效能等級，請參閱[調整計算能力 - 入口網站](quickstart-scale-compute-portal.md)。

### <a name="gen2"></a>Gen2

Gen2 在每個查詢提供比 Gen1 還多 2.5x 倍的記憶體。 此額外的記憶體可協助 Gen2 提供快速效能。  Gen2 的效能等級範圍從 DW1000c 到 DW30000c。 

| 效能等級 | 計算節點數量 | 每個計算節點上的散發數量 | 每個資料倉儲的記憶體 (GB) |
|:-----------------:|:-------------:|:------------------------------:|:------------------------------:|
| DW1000c           | 2             | 30                             |   600                          |
| DW1500c           | 3             | 20                             |   900                          |
| DW2000c           | 4             | 15                             |  1200                          |
| DW2500c           | 5             | 12                             |  1500                          |
| DW3000c           | 6             | 10                             |  1800                          |
| DW5000c           | 10            | 6                              |  3000                          |
| DW6000c           | 12            | 5                              |  3600                          |
| DW7500c           | 15            | 4                              |  4500                          |
| DW10000c          | 20            | 3                              |  6000                          |
| DW15000c          | 30            | 2                              |  9000                          |
| DW30000c          | 60            | 1                              | 18000                          |

最大的 Gen2 DWU 是 DW30000c，其中具有 60 個計算節點，而且每個計算節點上都有一個散發。 例如，DW30000c 上 600 TB 的資料倉儲大約可針對每個節點處理 10 TB。

### <a name="gen1"></a>Gen1

Gen1 的服務等級範圍從 DW100 到 DW6000。 

| 效能等級 | 計算節點數量 | 每個計算節點上的散發數量 | 每個資料倉儲的記憶體 (GB) |
|:-----------------:|:-------------:|:------------------------------:|:------------------------------:|
| DW100             | 1             | 60                             |  24                            |
| DW200             | 2             | 30                             |  48                            |
| DW300             | 3             | 20                             |  72                            |
| DW400             | 4             | 15                             |  96                            |
| DW500             | 5             | 12                             | 120                            |
| DW600             | 6             | 10                             | 144                            |
| DW1000            | 10            | 6                              | 240                            |
| DW1200            | 12            | 5                              | 288                            |
| DW1500            | 15            | 4                              | 360                            |
| DW2000            | 20            | 3                              | 480                            |
| DW3000            | 30            | 2                              | 720                            |
| DW6000            | 60            | 1                              | 1440                           |

## <a name="concurrency-maximums"></a>並行最大值
為了確保每個查詢都有足夠的資源可以有效率地執行，SQL 資料倉儲會藉由將並行位置指派給每個查詢，來追蹤資源使用量。 系統會將查詢放入佇列，它們會在其中等候，直到有足夠的[並行位置](resource-classes-for-workload-management.md#concurrency-slots)可用為止。 並行位置也會決定 CPU 優先順序。 如需詳細資訊，請參閱[分析工作負載](analyze-your-workload.md)。

### <a name="gen2"></a>Gen2
 
**靜態資源類別**

下表針對每個[靜態資源類別](resource-classes-for-workload-management.md)顯示並行查詢數量和並行位置數量的最大值。  

| 服務等級 | 並行查詢上限 | 可用的並行位置數量 |staticrc10 | staticrc20 | staticrc30 | staticrc40 | staticrc50 | staticrc60 | staticrc70 | staticrc80 |
|:-------------:|:--------------------------:|:---------------------------:|:---------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|
| DW1000c       | 32                         |   40                        | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1500c       | 32                         |   60                        | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW2000c       | 48                         |   80                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW2500c       | 48                         |  100                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW3000c       | 64                         |  120                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW5000c       | 64                         |  200                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW6000c       | 128                        |  240                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW7500c       | 128                        |  300                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW10000c      | 128                        |  400                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW15000c      | 128                        |  600                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW30000c      | 128                        | 1200                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |

**動態資源類別**

> [!NOTE]
> Gen2 上的 smallrc 資源類別會在服務等級增加時動態新增記憶體，並且只支援最多 32 個並行查詢。  smallrc 所使用的並行位置和記憶體會隨著服務等級增加而增加。 
>
>

下表針對每個[動態資源類別](resource-classes-for-workload-management.md)顯示並行查詢數量和並行位置數量的最大值。 與 Gen1 不同，Gen2 上的動態資源類別是名符其實的動態。  Gen2 會針對所有服務等級的小型-中型-大型-超大型資源類別使用 3-10-22-70 記憶體百分比。

| 服務等級 | 並行查詢上限 | 可用的並行位置數量 | Smallrc 所使用的插槽 | Mediumrc 所使用的插槽 | Largerc 所使用的插槽 | Xlargerc 所使用的插槽 |
|:-------------:|:--------------------------:|:---------------------------:|:---------------------:|:----------------------:|:---------------------:|:----------------------:|
| DW1000c       | 32                         |   40                        | 1                     |  4                     |  8                    |  28                    |
| DW1500c       | 32                         |   60                        | 1                     |  6                     |  13                   |  42                    |
| DW2000c       | 32                         |   80                        | 2                     |  8                     |  17                   |  56                    |
| DW2500c       | 32                         |  100                        | 3                     | 10                     |  22                   |  70                    |
| DW3000c       | 32                         |  120                        | 3                     | 12                     |  26                   |  84                    |
| DW5000c       | 32                         |  200                        | 6                     | 20                     |  44                   | 140                    |
| DW6000c       | 32                         |  240                        | 7                     | 24                     |  52                   | 168                    |
| DW7500c       | 32                         |  300                        | 9                     | 30                     |  66                   | 210                    |
| DW10000c      | 32                         |  400                        | 12                    | 40                     |  88                   | 280                    |
| DW15000c      | 32                         |  600                        | 18                    | 60                     | 132                   | 420                    |
| DW30000c      | 32                         | 1200                        | 36                    | 120                    | 264                   | 840                    |



#### <a name="gen1"></a>Gen1

靜態資源類別

下表針對 **Gen1** 上每個[靜態資源類別](resource-classes-for-workload-management.md)顯示並行查詢數量和並行位置數量的最大值。

| 服務等級 | 並行查詢上限 | 並行位置數量最大值 |staticrc10 | staticrc20 | staticrc30 | staticrc40 | staticrc50 | staticrc60 | staticrc70 | staticrc80 |
|:-------------:|:--------------------------:|:-------------------------:|:---------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|
| DW100         | 4                          |   4                       | 1         | 2          | 4          | 4          |  4         |  4         |  4         |   4        |
| DW200         | 8                          |   8                       | 1         | 2          | 4          | 8          |  8         |  8         |  8         |   8        |
| DW300         | 12                         |  12                       | 1         | 2          | 4          | 8          |  8         |  8         |  8         |   8        |
| DW400         | 16                         |  16                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW500         | 20                         |  20                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW600         | 24                         |  24                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW1000        | 32                         |  40                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1200        | 32                         |  48                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1500        | 32                         |  60                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW2000        | 48                         |  80                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW3000        | 64                         | 120                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW6000        | 128                        | 240                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |

動態資源類別
> [!NOTE]
> Gen1 上的 smallrc 資源類別會對每個查詢配置固定數量的記憶體，類似於靜態資源類別 staticrc10 的形式。  因為 smallrc 是靜態的，它有能力可以調整為 128 個並行查詢。 
>
>

下表針對 **Gen1** 上每個[動態資源類別](resource-classes-for-workload-management.md)顯示並行查詢數量和並行位置數量的最大值。

| 服務等級 | 並行查詢上限 | 可用的並行位置數量 | smallrc | mediumrc | largerc | xlargerc |
|:-------------:|:--------------------------:|:---------------------------:|:-------:|:--------:|:-------:|:--------:|
| DW100         |  4                         |   4                         | 1       |  1       |  2      |   4      |
| DW200         |  8                         |   8                         | 1       |  2       |  4      |   8      |
| DW300         | 12                         |  12                         | 1       |  2       |  4      |   8      |
| DW400         | 16                         |  16                         | 1       |  4       |  8      |  16      |
| DW500         | 20                         |  20                         | 1       |  4       |  8      |  16      |
| DW600         | 24                         |  24                         | 1       |  4       |  8      |  16      |
| DW1000        | 32                         |  40                         | 1       |  8       | 16      |  32      |
| DW1200        | 32                         |  48                         | 1       |  8       | 16      |  32      |
| DW1500        | 32                         |  60                         | 1       |  8       | 16      |  32      |
| DW2000        | 48                         |  80                         | 1       | 16       | 32      |  64      |
| DW3000        | 64                         | 120                         | 1       | 16       | 32      |  64      |
| DW6000        | 128                        | 240                         | 1       | 32       | 64      | 128      |


當符合以上其中一個臨界值時，新的查詢將以先進先出順序排入佇列和執行。  當一個查詢完成，且查詢與位置的數目低於限制時，SQL 資料倉儲就會釋出已排入佇列的查詢。 

## <a name="next-steps"></a>後續步驟

若要深入了解如何運用資源類別，進一步將您的工作負載最佳化，請檢閱下列文章：
* [適用於工作負載管理的資源類別](resource-classes-for-workload-management.md)
* [分析工作負載](analyze-your-workload.md)

