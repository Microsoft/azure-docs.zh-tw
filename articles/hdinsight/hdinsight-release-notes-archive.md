---
title: Azure HDInsight 的封存版本資訊
description: Azure HDInsight 的封存版本資訊。 取得 Hadoop、Spark、R Server、Hive 等的開發秘訣和詳細資料。
ms.service: hdinsight
ms.topic: conceptual
ms.custom: hdinsightactive
ms.date: 10/07/2020
ms.openlocfilehash: 8e6f27c378a6cea8fffbdcda58c4fc3bb865e51e
ms.sourcegitcommit: 2f9f306fa5224595fa5f8ec6af498a0df4de08a8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/28/2021
ms.locfileid: "98932164"
---
# <a name="archived-release-notes"></a>封存的版本資訊

## <a name="summary"></a>摘要

Azure HDInsight 是最受企業客戶歡迎的其中一項服務，可供 Azure 上的開放原始碼 Apache Hadoop 與 Apache Spark 分析使用。

## <a name="release-date-11092020"></a>發行日期：11/09/2020

此版本適用于 HDInsight 3.6 和 HDInsight 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="hdinsight-identity-broker-hib-is-now-ga"></a>HDInsight Identity Broker (HIB) 現已正式推出
啟用 ESP 叢集 OAuth 驗證的 HDInsight Identity Broker (HIB) 現已在此版本中正式推出。 此版本之後所建立的 HIB 叢集將具有最新的 HIB 功能：
- 高可用性 (HA) 
- 支援 Multi-Factor Authentication (MFA) 
- 同盟使用者登入，而不使用密碼雜湊同步處理至 AAD-DS 如需詳細資訊，請參閱 [HIB 檔](./domain-joined/identity-broker.md)。

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 從這個版本開始，服務會逐漸遷移至 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)。 整個過程可能需要數個月的時間。 遷移您的區域和訂用帳戶之後，新建立的 HDInsight 叢集將會在沒有客戶動作的虛擬機器擴展集上執行。 不需要中斷變更。

### <a name="deprecation"></a>淘汰
#### <a name="deprecation-of-hdinsight-36-ml-services-cluster"></a>淘汰 HDInsight 3.6 ML 服務叢集
HDInsight 3.6 ML 服務叢集類型將于 31 2020 年12月結束支援。 客戶將不會在 31 2020 年12月之後建立新的 3.6 ML 服務叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請在 [此](./hdinsight-component-versioning.md#available-versions)檢查 HDInsight 版本和叢集類型的支援期限。

#### <a name="disabled-vm-sizes"></a>停用的 VM 大小
從 16 2020 年11月開始，HDInsight 將會封鎖新客戶使用 standand_A8、standand_A9、standand_A10 和 standand_A11 VM 大小來建立叢集。 過去三個月內使用這些 VM 大小的現有客戶將不會受到影響。 從 9 2021 年1月開始，HDInsight 將會封鎖所有使用 standand_A8、standand_A9 standand_A10 和 standand_A11 VM 大小來建立叢集的客戶。 現有的叢集將會依原樣執行。 請考慮移至 HDInsight 4.0，以避免潛在的系統/支援中斷。

### <a name="behavior-changes"></a>行為變更
此版本沒有任何行為變更。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。

#### <a name="ability-to-select-different-zookeeper-virtual-machine-sizes-for-spark-hadoop-and-ml-services"></a>能夠為 Spark、Hadoop 和 ML 服務選取不同的 Zookeeper 虛擬機器大小
HDInsight today 不支援針對 Spark、Hadoop 和 ML 服務叢集類型自訂 Zookeeper 節點大小。 它會預設為 A2_v2/A2 的虛擬機器大小，並提供免費的費用。 在即將推出的版本中，您可以選取最適合您案例的 Zookeeper 虛擬機器大小。 A2_v2/A2 以外的虛擬機器大小的 Zookeeper 節點將會收取費用。 A2_v2 和 A2 虛擬機器仍提供免費的費用。

#### <a name="default-cluster-version-will-be-changed-to-40"></a>預設叢集版本將會變更為4。0
自2021年2月起，HDInsight 叢集的預設版本將自3.6 變更為4.0。 如需可用版本的詳細資訊，請參閱 [可用的版本](./hdinsight-component-versioning.md#available-versions)。 深入瞭解[HDInsight 4.0](./hdinsight-version-release.md)的新功能

#### <a name="hdinsight-36-end-of-support-on-june-30-2021"></a>HDInsight 3.6 年 6 30 2021 月終止支援
HDInsight 3.6 即將結束支援。 自 30 2021 年6月起，客戶無法建立新的 HDInsight 3.6 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮移至 HDInsight 4.0，以避免潛在的系統/支援中斷。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 
#### <a name="fix-issue-for-restarting-vms-in-cluster"></a>修正在叢集中重新開機 Vm 的問題
已修正在叢集中重新開機 Vm 的問題，您可以使用 [PowerShell 或 REST API 重新開機叢集中的節點](./cluster-reboot-vm.md) 。

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在 [本](./hdinsight-component-versioning.md)檔中找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。

## <a name="release-date-10082020"></a>發行日期：10/08/2020

此版本適用于 HDInsight 3.6 和 HDInsight 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="hdinsight-private-clusters-with-no-public-ip-and-private-link-preview"></a>沒有公用 IP 和私人連結的 HDInsight 私人叢集 (預覽) 
HDInsight 現在支援在預覽版中建立叢集，而不使用公用 IP 和私人連結來存取叢集。 客戶可使用新的 advanced 網路設定來建立完全隔離的叢集，而不使用公用 IP，並使用自己的私人端點來存取叢集。 

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 從這個版本開始，服務會逐漸遷移至 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)。 整個過程可能需要數個月的時間。 遷移您的區域和訂用帳戶之後，新建立的 HDInsight 叢集將會在沒有客戶動作的虛擬機器擴展集上執行。 不需要中斷變更。

### <a name="deprecation"></a>淘汰
#### <a name="deprecation-of-hdinsight-36-ml-services-cluster"></a>淘汰 HDInsight 3.6 ML 服務叢集
HDInsight 3.6 ML 服務叢集類型將于12月 31 2020 日結束支援。 客戶之後將無法建立新的 3.6 ML 服務叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請在 [此](./hdinsight-component-versioning.md#available-versions)檢查 HDInsight 版本和叢集類型的支援期限。

### <a name="behavior-changes"></a>行為變更
此版本沒有任何行為變更。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。

#### <a name="ability-to-select-different-zookeeper-virtual-machine-sizes-for-spark-hadoop-and-ml-services"></a>能夠為 Spark、Hadoop 和 ML 服務選取不同的 Zookeeper 虛擬機器大小
HDInsight today 不支援針對 Spark、Hadoop 和 ML 服務叢集類型自訂 Zookeeper 節點大小。 它會預設為 A2_v2/A2 的虛擬機器大小，並提供免費的費用。 在即將推出的版本中，您可以選取最適合您案例的 Zookeeper 虛擬機器大小。 A2_v2/A2 以外的虛擬機器大小的 Zookeeper 節點將會收取費用。 A2_v2 和 A2 虛擬機器仍提供免費的費用。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在 [本](./hdinsight-component-versioning.md)檔中找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。

## <a name="release-date-09282020"></a>發行日期：09/28/2020

此版本適用于 HDInsight 3.6 和 HDInsight 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="autoscale-for-interactive-query-with-hdinsight-40-is-now-generally-available"></a>HDInsight 4.0 的 Interactive Query 自動調整現已正式推出
適用于 Interactive Query 叢集類型的自動調整現已正式推出 (適用于 HDInsight 4.0 的 GA) 。 在2020年8月27日之後建立的所有 Interactive Query 4.0 叢集將擁有自動調整的 GA 支援。

#### <a name="hbase-cluster-supports-premium-adls-gen2"></a>HBase 叢集支援 Premium ADLS Gen2
HDInsight 現在支援 Premium ADLS Gen2 作為 HDInsight HBase 3.6 和4.0 叢集的主要儲存體帳戶。 搭配 [加速寫入](./hbase/apache-hbase-accelerated-writes.md)，您可以為您的 HBase 叢集取得較佳的效能。

#### <a name="kafka-partition-distribution-on-azure-fault-domains"></a>Azure 容錯網域上的 Kafka 資料分割分佈
容錯網域是 Azure 資料中心內基礎硬體的邏輯群組。 每個容錯網域會共用通用電源和網路交換器。 HDInsight Kafka 可能會將所有磁碟分割複本儲存在相同的容錯網域中。 從這個版本開始，HDInsight 現在支援根據 Azure 容錯網域自動散發 Kafka 分割區。 

#### <a name="encryption-in-transit"></a>傳輸中加密
客戶可以使用 IPSec 加密與平臺管理的金鑰，在叢集節點之間啟用傳輸加密。 您可以在建立叢集時啟用這個選項。 查看更多有關 [如何啟用傳輸中加密的](./domain-joined/encryption-in-transit.md)詳細資料。

#### <a name="encryption-at-host"></a>主機上的加密
當您在主機上啟用加密時，儲存在 VM 主機上的資料會在待用時加密，並將流量加密至儲存體服務。 在此版本中，您可以在建立叢集時，于 **暫存資料磁片上的主機啟用加密** 。 只有 [有限區域中的特定 VM sku](../virtual-machines/disks-enable-host-based-encryption-portal.md)才支援在主機上進行加密。 HDInsight 支援 [下列節點設定和 sku](./hdinsight-supported-node-configuration.md)。 請參閱有關 [如何在主機上啟用加密的](./disk-encryption.md#encryption-at-host-using-platform-managed-keys)詳細資料。

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 從這個版本開始，服務會逐漸遷移至 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)。 整個過程可能需要數個月的時間。 遷移您的區域和訂用帳戶之後，新建立的 HDInsight 叢集將會在沒有客戶動作的虛擬機器擴展集上執行。 不需要中斷變更。

### <a name="deprecation"></a>淘汰
此版本沒有淘汰。

### <a name="behavior-changes"></a>行為變更
此版本沒有任何行為變更。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。

#### <a name="ability-to-select-different-zookeeper-sku-for-spark-hadoop-and-ml-services"></a>能夠為 Spark、Hadoop 和 ML 服務選取不同的 Zookeeper SKU
HDInsight 今日不支援變更 Spark、Hadoop 和 ML 服務叢集類型的 Zookeeper SKU。 它使用適用于 Zookeeper 節點 A2_v2/A2 SKU，而不會向客戶收取費用。 在即將推出的版本中，客戶可以視需要變更 Spark、Hadoop 和 ML 服務的 Zookeeper SKU。 具有 A2_v2/A2 以外 SKU 的 Zookeeper 節點將會收取費用。 預設 SKU 仍會 A2_V2/A2，而且不會收費。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在 [本](./hdinsight-component-versioning.md)檔中找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。

## <a name="release-date-08092020"></a>發行日期：08/09/2020

此版本僅適用于 HDInsight 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="support-for-sparkcruise"></a>對 SparkCruise 的支援
SparkCruise 是適用于 Spark 的自動計算重複使用系統。 它會根據過去的查詢工作負載，選取要具體化的一般子運算式。 SparkCruise 會具體化這些子運算式作為查詢處理的一部分，而計算重複使用會自動套用到背景中。 您可以從 SparkCruise 受益，而不需要對 Spark 程式碼進行任何修改。
 
#### <a name="support-hive-view-for-hdinsight-40"></a>支援 HDInsight 4.0 的 Hive 視圖
Apache Ambari Hive View 的設計目的是協助您從網頁瀏覽器撰寫、優化和執行 Hive 查詢。 從這個版本開始，HDInsight 4.0 叢集原本就支援 Hive View。 不適用於現有的叢集。 您需要卸載再重新建立叢集，才能取得內建的 Hive 視圖。
 
#### <a name="support-tez-view-for-hdinsight-40"></a>支援 HDInsight 4.0 的 Tez View
Apache Tez View 可用來追蹤和偵測 Hive Tez 作業的執行。 從這個版本開始，HDInsight 4.0 原本就支援 Tez View。 不適用於現有的叢集。 您必須卸載並重新建立叢集，才能取得內建的 Tez 視圖。

### <a name="deprecation"></a>淘汰
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>淘汰 HDInsight 3.6 Spark 叢集中的 Spark 2.1 和 2.2
從 1 2020 年7月開始，客戶無法使用 Spark 2.1 和 2.2 on HDInsight 3.6 建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 3.6 上移至 Spark 2.3，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>淘汰 HDInsight 4.0 Spark 叢集中的 Spark 2.3
從 1 2020 年7月開始，客戶無法使用 Spark 2.3 on HDInsight 4.0 來建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Spark 2.4，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>淘汰 HDInsight 4.0 Kafka 叢集中的 Kafka 1.1
自 2020 年 7 月 1 日開始，客戶將無法在 HDInsight 4.0 上使用 Kafka 1.1 建立新的 Kafka 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Kafka 2.1，以避免潛在的系統/支援中斷。

### <a name="behavior-changes"></a>行為變更
#### <a name="ambari-stack-version-change"></a>Ambari stack 版本變更
在此版本中，Ambari 版本會從 2.x. x 變更為4.1。 您可以在 Ambari： Ambari > 使用者 > 版本中，確認 stack 版本 (HDInsight 4.1) 。

### <a name="upcoming-changes"></a>即將推出的變更
不需要注意任何即將推出的重大變更。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

以下是 Hive 的 JIRAs：
* [HIVE-23619](https://issues.apache.org/jira/browse/HIVE-23619)
* [HIVE-21223](https://issues.apache.org/jira/browse/HIVE-21223)
* [HIVE-22599](https://issues.apache.org/jira/browse/HIVE-22599)
* [HIVE-22121](https://issues.apache.org/jira/browse/HIVE-22121)
* [HIVE-22136](https://issues.apache.org/jira/browse/HIVE-22136)
* [HIVE-18786](https://issues.apache.org/jira/browse/HIVE-18786)

以下是適用于 HBase 的 JIRAs：
* [HBASE-21458](https://issues.apache.org/jira/browse/HBASE-21458)
* [HBASE-24208](https://issues.apache.org/jira/browse/HBASE-24208)
* [HBASE-24205](https://issues.apache.org/jira/browse/HBASE-24205)

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在 [本](./hdinsight-component-versioning.md)檔中找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。

### <a name="known-issues"></a>已知問題

已修正 Azure 入口網站中的問題，當使用者使用公開金鑰的 SSH 驗證類型建立 Azure HDInsight 叢集時，就會遇到錯誤。 當使用者按一下 [檢閱 + 建立] 時，會收到「不得包含來自 SSH 使用者名稱的任何三個連續字元」錯誤。 已修正此問題，但您可能需要按下 CTRL + F5 來載入更正的檢視，以重新整理瀏覽器快取。 此問題的因應措施是使用 ARM 範本建立叢集。 

## <a name="release-date-07132020"></a>發行日期：07/13/2020

此發行適用於 HDInsight 3.6 和 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="support-for-customer-lockbox-for-microsoft-azure"></a>支援 Microsoft Azure 的客戶加密箱
Azure HDInsight 現在支援 Azure 客戶加密箱。 它提供了一個介面，讓客戶可以審核、核准或拒絕客戶資料存取要求。 當 Microsoft 工程師需要在支援要求期間存取客戶資料時，就會使用此功能。 如需詳細資訊，請參閱 [Microsoft Azure 的客戶加密箱](../security/fundamentals/customer-lockbox-overview.md#supported-services-and-scenarios-in-preview)。

#### <a name="service-endpoint-policies-for-storage"></a>儲存體的服務端點原則
客戶現在可以使用 HDInsight 叢集子網上 (SEP) 的服務端點原則。 深入瞭解 [Azure 服務端點原則](../virtual-network/virtual-network-service-endpoint-policies-overview.md)。

### <a name="deprecation"></a>淘汰
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>淘汰 HDInsight 3.6 Spark 叢集中的 Spark 2.1 和 2.2
從 1 2020 年7月開始，客戶無法使用 Spark 2.1 和 2.2 on HDInsight 3.6 建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 3.6 上移至 Spark 2.3，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>淘汰 HDInsight 4.0 Spark 叢集中的 Spark 2.3
從 1 2020 年7月開始，客戶無法使用 Spark 2.3 on HDInsight 4.0 來建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Spark 2.4，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>淘汰 HDInsight 4.0 Kafka 叢集中的 Kafka 1.1
自 2020 年 7 月 1 日開始，客戶將無法在 HDInsight 4.0 上使用 Kafka 1.1 建立新的 Kafka 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Kafka 2.1，以避免潛在的系統/支援中斷。

### <a name="behavior-changes"></a>行為變更
您不需要留意任何行為變更。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。 

#### <a name="ability-to-select-different-zookeeper-sku-for-spark-hadoop-and-ml-services"></a>能夠為 Spark、Hadoop 和 ML 服務選取不同的 Zookeeper SKU
HDInsight 今日不支援變更 Spark、Hadoop 和 ML 服務叢集類型的 Zookeeper SKU。 它使用適用于 Zookeeper 節點 A2_v2/A2 SKU，而不會向客戶收取費用。 在即將推出的版本中，客戶將能夠視需要變更 Spark、Hadoop 和 ML 服務的 Zookeeper SKU。 具有 A2_v2/A2 以外 SKU 的 Zookeeper 節點將會收取費用。 預設 SKU 仍會 A2_V2/A2，而且不會收費。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 
#### <a name="fixed-hive-warehouse-connector-issue"></a>修正 Hive Warehouse Connector 問題
先前版本中的 Hive 倉儲連接器可用性發生問題。 已修正此問題。 

#### <a name="fixed-zeppelin-notebook-truncates-leading-zeros-issue"></a>已修正 Zeppelin 筆記本截斷前置零問題
Zeppelin 在資料表輸出中，錯誤地截斷了字串格式的前置零。 我們已在此版本中修正此問題。

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在 [本](./hdinsight-component-versioning.md)檔中找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。

## <a name="release-date-06112020"></a>發行日期：06/11/2020

此發行適用於 HDInsight 3.6 和 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來布建叢集。 從這個版本開始，新建立的 HDInsight 叢集會開始使用 Azure 虛擬機器擴展集。 變更會逐漸推出。 您預期不會有任何中斷性變更。 查看 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)的詳細資訊。
 
#### <a name="reboot-vms-in-hdinsight-cluster"></a>重新開機 HDInsight 叢集中的 Vm
在此版本中，我們支援將 HDInsight 叢集中的 Vm 重新開機，以重新開機沒有回應的節點。 目前您只能透過 API 來執行，PowerShell 和 CLI 支援也是如此。 如需 API 的詳細資訊，請參閱 [此](https://github.com/Azure/azure-rest-api-specs/codeowners/master/specification/hdinsight/resource-manager/Microsoft.HDInsight/stable/2018-06-01-preview/virtualMachines.json)檔。
 
### <a name="deprecation"></a>淘汰
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>淘汰 HDInsight 3.6 Spark 叢集中的 Spark 2.1 和 2.2
從 1 2020 年7月開始，客戶無法使用 Spark 2.1 和 2.2 on HDInsight 3.6 建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 3.6 上移至 Spark 2.3，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>淘汰 HDInsight 4.0 Spark 叢集中的 Spark 2.3
從 1 2020 年7月開始，客戶無法使用 Spark 2.3 on HDInsight 4.0 來建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Spark 2.4，以避免潛在的系統/支援中斷。
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>淘汰 HDInsight 4.0 Kafka 叢集中的 Kafka 1.1
自 2020 年 7 月 1 日開始，客戶將無法在 HDInsight 4.0 上使用 Kafka 1.1 建立新的 Kafka 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Kafka 2.1，以避免潛在的系統/支援中斷。
 
### <a name="behavior-changes"></a>行為變更
#### <a name="esp-spark-cluster-head-node-size-change"></a>ESP Spark 叢集前端節點大小變更 
ESP Spark 叢集所允許的最小前端節點大小會變更為 Standard_D13_V2。 具有低核心和記憶體作為前端節點的 Vm，可能會因為 CPU 和記憶體容量相對較低而造成 ESP 叢集問題。 從版本開始，請使用高於 Standard_D13_V2 的 Sku，並 Standard_E16_V3 作為 ESP Spark 叢集的前端節點。
 
#### <a name="a-minimum-4-core-vm-is-required-for-head-node"></a>前端節點必須至少有 4 核心 VM 
前端節點必須至少有 4 核心 VM，才能確保 HDInsight 叢集的高可用性和可靠性。 自 2020 年 4 月 6 日起，客戶只能選擇 4 核心或以上的 VM 作為新 HDInsight 叢集的前端節點。 現有的叢集將會繼續如預期般執行。 
 
#### <a name="cluster-worker-node-provisioning-change"></a>叢集背景工作節點布建變更
當80% 的背景工作節點就緒時，叢集就會進入 **操作** 階段。 在這個階段，客戶可以執行所有的資料平面作業，例如執行腳本和工作。 但是，客戶無法進行任何控制平面作業，例如擴大/縮小。 只支援刪除。
 
在 **操作** 階段之後，叢集會針對剩餘的20% 背景工作節點等待另一個60分鐘。 在60分鐘結束時，叢集會移至 **執行中的階段，** 即使所有背景工作節點仍無法使用也是一樣。 一旦叢集進入 **執行階段，** 您就可以正常使用它。 這兩個控制計畫作業（例如相應增加/減少）和通話方案作業（例如執行腳本和作業）都會被接受。 如果無法使用某些要求的背景工作節點，叢集將會標示為「部分成功」。 系統會向您收取已成功部署之節點的費用。 
 
#### <a name="create-new-service-principal-through-hdinsight"></a>透過 HDInsight 建立新的服務主體
先前在建立叢集時，客戶可以建立新的服務主體，以存取 Azure 入口網站中的 connected ADLS Gen 1 帳戶。 自 15 2020 年6月起，客戶無法在 HDInsight 建立工作流程中建立新的服務主體，只支援現有的服務主體。 請參閱 [使用 Azure Active Directory 建立服務主體和憑證](../active-directory/develop/howto-create-service-principal-portal.md)。

#### <a name="time-out-for-script-actions-with-cluster-creation"></a>建立叢集時腳本動作的時間
HDInsight 支援在建立叢集時執行腳本動作。 從這個版本開始，所有具有叢集建立的腳本動作都必須在 **60 分鐘** 內完成，或超時。提交給執行中叢集的腳本動作不會受到影響。 如需詳細資訊，請參閱[此處](./hdinsight-hadoop-customize-cluster-linux.md#script-action-in-the-cluster-creation-process)。
 
### <a name="upcoming-changes"></a>即將推出的變更
不需要注意任何即將推出的重大變更。
 
### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 
 
### <a name="component-version-change"></a>元件版本變更
#### <a name="hbase-20-to-216"></a>HBase 2.0 升級至 2.1.6
HBase 版本會從2.0 版升級至2.1.6。
 
#### <a name="spark-240-to-244"></a>Spark 2.4.0 升級至 2.4.4
Spark 版本會從版本2.4.0 升級至2.4.4。
 
#### <a name="kafka-210-to-211"></a>Kafka 2.1.0 升級至 2.1.1
Kafka 版本會從版本2.1.0 升級到2.1.1。
 
您可以在[本](./hdinsight-component-versioning.md)檔中找到 HDInsight 4.0 ad hdinsight 3.6 目前的元件版本

### <a name="known-issues"></a>已知問題

#### <a name="hive-warehouse-connector-issue"></a>Hive Warehouse Connector 問題
這一版的 Hive Warehouse Connector 有問題。 下一版將會包含此修正。 在此版本之前建立的現有叢集不會受到影響。 盡可能避免卸載和重新建立叢集。 如果您需要進一步協助，請開啟支援票證。

## <a name="release-date-01092020"></a>發行日期：2020/1/09

此發行適用於 HDInsight 3.6 和 4.0。 在數天內，所有區域都可以使用 HDInsight 發行版本。 此處的發行日期為第一個區域發行日期。 如果您沒有看到以下變更，請在數天內等待發行在您的區域中。

### <a name="new-features"></a>新功能
#### <a name="tls-12-enforcement"></a>TLS 1.2 強制執行
傳輸層安全性 (TLS) 和安全通訊端層 (SSL) 是密碼編譯通訊協定，可透過電腦網路提供通訊安全性。 進一步了解 [TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security#SSL_1.0.2C_2.0_and_3.0)。 HDInsight 在公用 HTTPS 端點上使用 TLS 1.2，但仍支援 TLS 1.1 以提供回溯相容性。 

在此發行版本中，客戶只能對所有透過公用叢集端點的連線加入宣告 TLS 1.2。 為了支援這一點，引進 了新的屬性 **minSupportedTlsVersion**，並可在叢集建立期間指定。 如未設定此屬性，叢集仍然支援 TLS 1.0、1.1 和 1.2，如同目前的行為。 客戶可以將此屬性的值設定為 "1.2"，這表示叢集僅支援 TLS 1.2 和更新版本。 如需詳細資訊，請參閱[傳輸層安全性](./transport-layer-security.md)。

#### <a name="bring-your-own-key-for-disk-encryption"></a>攜帶您自己的金鑰進行磁碟加密
HDInsight 中的所有受控磁碟都會使用 Azure 儲存體服務加密 (SSE) 來加以保護。 根據預設，這些磁碟上的資料會使用 Microsoft 所管理的金鑰來加密。 從這個發行版本開始，您可以攜帶您自己的金鑰 (BYOK) 進行磁碟加密，並使用 Azure Key Vault 管理它。 BYOK 加密是單一步驟的設定，可在叢集建立期間免費進行。 只要使用 Azure Key Vault 將 HDInsight 註冊為受控識別，並在建立叢集時新增加密金鑰即可。 如需詳細資訊，請參閱[客戶管理的金鑰磁碟加密](./disk-encryption.md)。

### <a name="deprecation"></a>淘汰
此發行版本沒有淘汰任何功能。 若要為近期將發生的淘汰做準備，請參閱[即將推出的變更](#upcoming-changes)。

### <a name="behavior-changes"></a>行為變更
此發行版本沒有任何行為變更。 若要為近期將發生的變更做準備，請參閱[即將推出的變更](#upcoming-changes)。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。 

#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>淘汰 HDInsight 3.6 Spark 叢集中的 Spark 2.1 和 2.2
自 2020 年 7 月 1 日開始，客戶將無法在 HDInsight 3.6 上使用 Spark 2.1 與 2.2 建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 3.6 上移至 Spark 2.3，以避免潛在的系統/支援中斷。 如需詳細資訊，請參閱 [將 Apache Spark 2.1 和2.2 工作負載遷移至2.3 和 2.4](./spark/migrate-versions.md)。

#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>淘汰 HDInsight 4.0 Spark 叢集中的 Spark 2.3
自 2020 年 7 月 1 日開始，客戶將無法在 HDInsight 4.0 上使用 Spark 2.3 建立新的 Spark 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Spark 2.4，以避免潛在的系統/支援中斷。 如需詳細資訊，請參閱 [將 Apache Spark 2.1 和2.2 工作負載遷移至2.3 和 2.4](./spark/migrate-versions.md)。

#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>淘汰 HDInsight 4.0 Kafka 叢集中的 Kafka 1.1
從 1 2020 年7月開始，客戶將無法使用 Kafka 1.1 on HDInsight 4.0 建立新的 Kafka 叢集。 現有的叢集將會以現狀執行，不再有 Microsoft 支援。 請考慮在 2020 年 6 月 30 日前於 HDInsight 4.0 上移至 Kafka 2.1，以避免潛在的系統/支援中斷。 如需詳細資訊，請參閱 [將 Apache Kafka 工作負載遷移至 Azure HDInsight 4.0](./kafka/migrate-versions.md)。

#### <a name="hbase-20-to-216"></a>HBase 2.0 升級至 2.1.6
在即將推出的 HDInsight 4.0 發行版本中，HBase 版本將從 2.0 版升級至2.1.6。

#### <a name="spark-240-to-244"></a>Spark 2.4.0 升級至 2.4.4
在即將推出的 HDInsight 4.0 發行版本中，Spark 版本將從 2.4.0 版升級至2.4.4。

#### <a name="kafka-210-to-211"></a>Kafka 2.1.0 升級至 2.1.1
在即將推出的 HDInsight 4.0 發行版本中，Kafka 版本將從 2.1.0 版升級至2.1.1。

#### <a name="a-minimum-4-core-vm-is-required-for-head-node"></a>前端節點必須至少有 4 核心 VM 
前端節點必須至少有 4 核心 VM，才能確保 HDInsight 叢集的高可用性和可靠性。 自 2020 年 4 月 6 日起，客戶只能選擇 4 核心或以上的 VM 作為新 HDInsight 叢集的前端節點。 現有的叢集將會繼續如預期般執行。 

#### <a name="esp-spark-cluster-node-size-change"></a>ESP Spark 叢集節點大小變更 
在即將推出的發行版本中，ESP Spark 叢集允許的最小節點大小會變更為 Standard_D13_V2。 A 系列 VM 因為 CPU 和記憶體容量相對較低，可能會造成 ESP 叢集問題。 未來將無法再使用 A 系列 VM建立新的 ESP 叢集。

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 在即將推出的發行版本中，HDInsight 會改為使用 Azure 虛擬機器擴展集。 請深入了解 Azure 虛擬機器擴展集。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

### <a name="component-version-change"></a>元件版本變更
此發行版本沒有任何元件版本變更。 您可以在這裡找到 HDInsight 4.0 和 HDInsight 3.6 的目前元件版本。

## <a name="release-date-12172019"></a>發行日期：12/17/2019

此發行適用於 HDInsight 3.6 和 4.0。

### <a name="new-features"></a>新功能

#### <a name="service-tags"></a>服務標籤
服務標籤可讓您輕鬆地限制對 Azure 服務的網路存取，以簡化 Azure 虛擬機器和 Azure 虛擬網路的安全性。 您可以使用網路安全性群組中的服務標記 (NSG) 規則，以允許或拒絕全域或每個 Azure 區域的特定 Azure 服務流量。 Azure 提供每個標記基礎的 IP 位址維護。 適用于網路安全性群組 (Nsg) 的 HDInsight 服務標記是健康情況和管理服務的 IP 位址群組。 這些群組有助於將建立安全性規則的複雜性降至最低。 HDInsight 客戶可以透過 Azure 入口網站、PowerShell 和 REST API 來啟用服務標記。 如需詳細資訊，請參閱 [Azure HDInsight 的網路安全性群組 (NSG) 服務標記](./hdinsight-service-tags.md)。

#### <a name="custom-ambari-db"></a>自訂 Ambari DB
HDInsight 現在可讓您使用自己的 SQL DB for Apache Ambari。 您可以從 Azure 入口網站或透過 Resource Manager 範本設定此自訂 Ambari DB。  這項功能可讓您選擇適合您處理和容量需求的 SQL DB。 您也可以輕鬆地升級，以符合業務成長需求。 如需詳細資訊，請參閱 [使用自訂 AMBARI DB 設定 HDInsight](hdinsight-custom-ambari-db.md)叢集。

![自訂 Ambari DB](./media/hdinsight-release-notes/custom-ambari-db.png)

### <a name="deprecation"></a>淘汰
此發行版本沒有淘汰任何功能。 若要為近期將發生的淘汰做準備，請參閱[即將推出的變更](#upcoming-changes)。

### <a name="behavior-changes"></a>行為變更
此發行版本沒有任何行為變更。 若要準備好即將進行的行為變更，請參閱即將進行的 [變更](#upcoming-changes)。

### <a name="upcoming-changes"></a>即將推出的變更
即將發行的版本中將會發生下列變更。 

#### <a name="transport-layer-security-tls-12-enforcement"></a>傳輸層安全性 (TLS) 1.2 強制執行
傳輸層安全性 (TLS) 和安全通訊端層 (SSL) 是密碼編譯通訊協定，可透過電腦網路提供通訊安全性。 如需詳細資訊，請參閱[傳輸層安全性](https://en.wikipedia.org/wiki/Transport_Layer_Security#SSL_1.0.2C_2.0_and_3.0)。 雖然 Azure HDInsight 叢集接受公用 HTTPS 端點上的 TLS 1.2 連線，但仍支援 TLS 1.1 以提供與舊版用戶端的回溯相容性。

從下一個版本開始，您將能夠加入宣告並設定新的 HDInsight 叢集，以僅接受 TLS 1.2 連線。 

從6/30/2020 年之後，Azure HDInsight 將會針對所有 HTTPS 連線強制執行 TLS 1.2 或更新版本。 建議您確保所有用戶端都已準備好處理 TLS 1.2 或更新版本。

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 從2020年2月開始 (將會在稍後) ，而 HDInsight 將會使用 Azure 虛擬機器擴展集。 查看 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)的詳細資訊。

#### <a name="esp-spark-cluster-node-size-change"></a>ESP Spark 叢集節點大小變更 
在即將推出的版本中：
- ESP Spark 叢集所允許的最小節點大小將會變更為 Standard_D13_V2。 
- A 系列 Vm 將會被取代，以建立新的 ESP 叢集，因為 A 系列 Vm 可能因為 CPU 和記憶體容量相對較低而造成 ESP 叢集問題。

#### <a name="hbase-20-to-21"></a>HBase 2.0 至2。1
在即將推出的 HDInsight 4.0 版本中，HBase 版本將會從2.0 版升級至2.1。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

### <a name="component-version-change"></a>元件版本變更
我們已將 HDInsight 3.6 支援延長至2020年12月31日。 您可以在 [支援的 HDInsight 版本](hdinsight-component-versioning.md#supported-hdinsight-versions)中找到更多詳細資料。

沒有 HDInsight 4.0 的元件版本變更。

Apache Zeppelin on HDInsight 3.6： 0.7.0-->0.7.3。 

您可以從 [這個](./hdinsight-component-versioning.md)檔中找到最新的元件版本。

### <a name="new-regions"></a>新區域

#### <a name="uae-north"></a>阿拉伯聯合大公國北部
阿拉伯聯合大公國北部的管理 Ip 如下： `65.52.252.96` 和 `65.52.252.97` 。


## <a name="release-date-11072019"></a>發行日期：11/07/2019

此發行適用於 HDInsight 3.6 和 4.0。

### <a name="new-features"></a>新功能

#### <a name="hdinsight-identity-broker-hib-preview"></a>HDInsight Identity Broker (HIB)  (Preview) 

HDInsight Identity Broker (HIB) 可讓使用者使用多重要素驗證 (MFA) 來登入 Apache Ambari，並取得所需的 Kerberos 票證，而不需要在 Azure Active Directory Domain Services (的 AAD) 中使用密碼雜湊。 目前 HIB 僅適用于透過 Azure Resource Management (ARM) 範本部署的叢集。

#### <a name="kafka-rest-api-proxy-preview"></a>Kafka Rest API Proxy (預覽版) 

Kafka Rest API Proxy 透過安全的 Azure AD 授權和 OAuth 通訊協定，透過 Kafka 叢集提供高可用性 REST Proxy 的單鍵部署。 

#### <a name="auto-scale"></a>自動調整

Azure HDInsight 的自動調整現已在 Apache Spark 和 Hadoop 叢集類型的所有區域正式推出。 這項功能可讓您以更符合成本效益且更具生產力的方式管理大型資料分析工作負載。 現在您可以優化 HDInsight 叢集的使用，並只針對所需的部分付費。

視您的需求而定，您可以選擇以負載為基礎和以排程為基礎的自動調整。 以負載為基礎的自動調整可以根據目前的資源需求相應增加或減少叢集大小，而排程型自動調整可以根據預先定義的排程來變更叢集大小。 

HBase 和 LLAP 工作負載的自動調整支援也是公開預覽。 如需詳細資訊，請參閱 [Azure HDInsight 叢集自動調整規模](./hdinsight-autoscale-clusters.md)。

#### <a name="hdinsight-accelerated-writes-for-apache-hbase"></a>適用于 Apache HBase 的 HDInsight 加速寫入 

加速寫入會使用 Azure 高階 SSD 受控磁碟來改善 Apache HBase 預寫記錄檔 (WAL) 的效能。 如需詳細資訊，請參閱[適用於 Apache HBase 的 Azure HDInsight 加速寫入](./hbase/apache-hbase-accelerated-writes.md)。

#### <a name="custom-ambari-db"></a>自訂 Ambari DB

HDInsight 現在提供新的容量，讓客戶能夠使用自己的 SQL DB 進行 Ambari。 現在，客戶可以選擇適合 Ambari 的 SQL DB，並根據自己的業務成長需求輕鬆地升級。 部署是使用 Azure Resource Manager 範本來完成。 如需詳細資訊，請參閱 [使用自訂 AMBARI DB 設定 HDInsight](./hdinsight-custom-ambari-db.md)叢集。

#### <a name="f-series-virtual-machines-are-now-available-with-hdinsight"></a>HDInsight 現在提供 F 系列虛擬機器

F 系列虛擬機器 (Vm) 是開始使用具有輕量處理需求之 HDInsight 的絕佳選擇。 F 系列的每小時訂價較低，在 Azure 產品組合中，就每一 vCPU 的「Azure 計算單位」(ACU) 而言，具有最佳的價格/性能比表現。 如需詳細資訊，請參閱 [為您的 Azure HDInsight 叢集選取正確的 VM 大小](./hdinsight-selecting-vm-size.md)。

### <a name="deprecation"></a>淘汰

#### <a name="g-series-virtual-machine-deprecation"></a>G 系列虛擬機器淘汰
從這個版本開始，HDInsight 中已不再提供 G 系列 Vm。

#### <a name="dv1-virtual-machine-deprecation"></a>Dv1 虛擬機器淘汰
從這個版本開始，使用 Dv1 Vm 搭配 HDInsight 已淘汰。 Dv1 的任何客戶要求都會自動提供 Dv2。 Dv1 和 Dv2 Vm 之間沒有任何價格差異。

### <a name="behavior-changes"></a>行為變更

#### <a name="cluster-managed-disk-size-change"></a>叢集受控磁片大小變更
HDInsight 提供叢集的受控磁碟空間。 從這個版本開始，在新建立的叢集中，每個節點的受控磁片大小都會變更為 128 GB。

### <a name="upcoming-changes"></a>即將推出的變更
即將推出的版本中將會發生下列變更。 

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>移至 Azure 虛擬機器擴展集
HDInsight 現在會使用 Azure 虛擬機器來佈建叢集。 從12月開始，HDInsight 會改為使用 Azure 虛擬機器擴展集。 查看 [Azure 虛擬機器擴展集](../virtual-machine-scale-sets/overview.md)的詳細資訊。

#### <a name="hbase-20-to-21"></a>HBase 2.0 至2。1
在即將推出的 HDInsight 4.0 版本中，HBase 版本將會從2.0 版升級至2.1。

#### <a name="a-series-virtual-machine-deprecation-for-esp-cluster"></a>ESP 叢集的 A 系列虛擬機器淘汰
A 系列 Vm 可能會因為 CPU 和記憶體容量相對較低而造成 ESP 叢集問題。 在即將推出的版本中，將會淘汰 A 系列 Vm 以建立新的 ESP 叢集。

### <a name="bug-fixes"></a>錯誤修正
HDInsight 會持續改善叢集的可靠性和效能。 

### <a name="component-version-change"></a>元件版本變更
此版本沒有元件版本變更。 您可以在 [這裡](./hdinsight-component-versioning.md)找到 hdinsight 4.0 和 hdinsight 3.6 目前的元件版本。


## <a name="release-date-08072019"></a>發行日期：08/07/2019

### <a name="component-versions"></a>元件版本

以下提供所有 HDInsight 4.0 元件的官方 Apache 版本。 列出的元件是可用的最新穩定版本的版本。

- Apache Ambari 2.7。1
- Apache Hadoop 3.1。1
- Apache HBase 2.0。0
- Apache Hive 3.1。0
- Apache Kafka 1.1.1、2.1。0
- Apache Mahout 0.9.0+
- Apache Oozie 4.2.0
- Apache Phoenix 4.7.0
- Apache Pig 0.16.0
- Apache Ranger 0.7.0
- Apache Slider 0.92.0
- Apache Spark 2.3.1、2.4。0
- Apache Sqoop 1.4。7
- Apache TEZ 0.9。1
- Apache Zeppelin 0.8.0 版
- Apache ZooKeeper 3.4.6

較新版本的 Apache 元件有時會隨附于 HDP 散發套件中，除了以上所列的版本之外。 在此情況下，這些較新的版本會列在 Technical preview 資料表中，不應在生產環境中取代上述清單的 Apache 元件版本。

### <a name="apache-patch-information"></a>Apache 修補程式資訊

如需 HDInsight 4.0 中可用之修補程式的詳細資訊，請參閱下表中每個產品的修補程式清單。

| 產品名稱 | 修補資訊 |
|---|---|
| Ambari | [Ambari 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/Ambari-2.7.1.0/bk_ambari-release-notes/content/ambari_relnotes-2.7.1.0-patch-information.html) |
| Hadoop | [Hadoop 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_hadoop.html) |
| hbase | [HBase 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_hbase.html) |
| Hive  | 此版本提供沒有其他 Apache 修補程式的 Hive 3.1.0。  |
| Kafka | 此版本提供 Kafka 1.1.1，沒有其他 Apache 修補程式。 |
| Oozie | [Oozie 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_oozie.html) |
| Phoenix | [Phoenix 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_phoenix.html) |
| Pig | [Pig 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_pig.html) |
| Ranger | [Ranger 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_ranger.html) |
| Spark | [Spark 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_spark.html) |
| Sqoop | 此版本提供沒有其他 Apache 修補程式的 Sqoop 1.4.7。 |
| Tez | 此版本提供沒有其他 Apache 修補程式的 Tez 0.9.1。 |
| Zeppelin | 此版本提供沒有其他 Apache 修補程式的 Zeppelin 0.8.0 版。 |
| Zookeeper | [Zookeeper 修補程式資訊](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_zookeeper.html) |

### <a name="fixed-common-vulnerabilities-and-exposures"></a>修正常見弱點與漏洞

如需此版本中已解決之安全性問題的詳細資訊，請參閱 Hortonworks 的 [修正 HDP 3.0.1 的常見弱點和](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/cve.html)漏洞。

### <a name="known-issues"></a>已知問題

#### <a name="replication-is-broken-for-secure-hbase-with-default-installation"></a>具有預設安裝的安全 HBase 複寫中斷

針對 HDInsight 4.0，請執行下列步驟：

1. 啟用叢集間的通訊。
1. 登入作用中的前端節點。
1. 下載腳本，以使用下列命令來啟用複寫：

    ```
    sudo wget https://raw.githubusercontent.com/Azure/hbase-utils/master/replication/hdi_enable_replication.sh
    ```
1. 輸入命令 `sudo kinit <domainuser>`。
1. 輸入下列命令來執行腳本：

    ```
    sudo bash hdi_enable_replication.sh -m <hn0> -s <srclusterdns> -d <dstclusterdns> -sp <srcclusterpasswd> -dp <dstclusterpasswd> -copydata
    ```
針對 HDInsight 3.6，請執行下列動作：

1. 登入 active HMaster ZK。
1. 下載腳本，以使用下列命令來啟用複寫：
    ```
    sudo wget https://raw.githubusercontent.com/Azure/hbase-utils/master/replication/hdi_enable_replication.sh
    ```
1. 輸入命令 `sudo kinit -k -t /etc/security/keytabs/hbase.service.keytab hbase/<FQDN>@<DOMAIN>`。
1. 輸入以下命令：

    ```bash
    sudo bash hdi_enable_replication.sh -s <srclusterdns> -d <dstclusterdns> -sp <srcclusterpasswd> -dp <dstclusterpasswd> -copydata
    ```

#### <a name="phoenix-sqlline-stops-working-after-migrating-hbase-cluster-to-hdinsight-40"></a>將 HBase 叢集遷移至 HDInsight 4.0 之後，Phoenix Sqlline 停止運作

請執行下列步驟：

1. 捨棄下列 Phoenix 資料表：
    1. `SYSTEM.FUNCTION`
    1. `SYSTEM.SEQUENCE`
    1. `SYSTEM.STATS`
    1. `SYSTEM.MUTEX`
    1. `SYSTEM.CATALOG`
1. 如果您無法刪除任何資料表，請重新開機 HBase 以清除資料表的任何連接。
1. 再次執行 `sqlline.py`。 Phoenix 會重新建立步驟1中已刪除的所有資料表。
1. 重新產生 HBase 資料的 Phoenix 資料表和 views。

#### <a name="phoenix-sqlline-stops-working-after-replicating-hbase-phoenix-metadata-from-hdinsight-36-to-40"></a>從 HDInsight 3.6 將 HBase Phoenix 中繼資料複寫至4.0 之後，Phoenix Sqlline 停止運作

請執行下列步驟：

1. 進行複寫之前，請先移至目的地4.0 叢集並執行 `sqlline.py` 。 此命令會產生 `SYSTEM.MUTEX` `SYSTEM.LOG` 只存在於4.0 中的 Phoenix 資料表（例如和）。
1. 捨棄下列資料表：
    1. `SYSTEM.FUNCTION`
    1. `SYSTEM.SEQUENCE`
    1. `SYSTEM.STATS`
    1. `SYSTEM.CATALOG`
1. 啟動 HBase 複寫

### <a name="deprecation"></a>淘汰

HDInsight 4.0 中無法使用 Apache Storm 和 ML 服務。

## <a name="release-date-04142019"></a>發行日期：04/14/2019

### <a name="new-features"></a>新功能

新的更新和功能分為以下幾類：

*  ***更新 Hadoop 和其他開放原始碼專案** _ –除了20多個開放原始碼專案的 1000 + bug 修正之外，此更新還包含新版的 _ *Spark (2.3)** 和 **Kafka (1.0)**。

    a.  [**Apache Spark 2.3 的新功能**](https://spark.apache.org/releases/spark-release-2-3-0.html)

    b.  [**Apache Kafka 1.0 的新功能**](https://kafka.apache.org/downloads#1.0.0)

*  ***將 R Server 9.1 更新為 Machine Learning Services 9.3** _ –在此版本中，我們會為數據科學家和工程師提供最佳的開放原始碼，並使用演算法創新和簡化運算化，並以其偏好的語言提供 Apache Spark 的速度。 此版本擴展 R Server 中提供的功能，並進一步支援 Python，因而將叢集名稱從 R Server 改為 ML 服務。 

_ ***Azure Data Lake Storage Gen2** _ 的支援-HDInsight 將支援 Azure Data Lake Storage Gen2 的預覽版本。 在可用區域中，客戶能夠選擇 ADLS Gen2 帳戶作為其 HDInsight 叢集的主要或次要存放區。

_ ***HDInsight 企業安全性套件更新 (preview)** _ – (預覽) Azure Blob 儲存體、ADLS Gen1、Cosmos DB 和 Azure DB 的 [虛擬網路服務端點](../virtual-network/virtual-network-service-endpoints-overview.md) 支援。

### <a name="component-versions"></a>元件版本

HDInsight 3.6 所有元件的官方 Apache 版本列示如下。 此處所列的元件都是最新可用穩定版本的官方 Apache 版本。

-   Apache Hadoop 2.7.3

-   Apache HBase 1.1.2

-   Apache Hive 1.2.1

-   Apache Hive 2.1.0

-   Apache Kafka 1.0.0

-   Apache Mahout 0.9.0+

-   Apache Oozie 4.2.0

-   Apache Phoenix 4.7.0

-   Apache Pig 0.16.0

-   Apache Ranger 0.7.0

-   Apache Slider 0.92.0

-   Apache Spark 2.2.0/2.3.0

-   Apache Sqoop 1.4.6

-   Apache Storm 1.1.0

-   Apache TEZ 0.7.0

-   Apache Zeppelin 0.7.3

-   Apache ZooKeeper 3.4.6

除了上面所列版本外，HDP 發佈中有時會有一些配套的 Apache 元件更新版本。 在此情況下，這些較新的版本會列在 Technical preview 資料表中，不應在生產環境中取代上述清單的 Apache 元件版本。

### <a name="apache-patch-information"></a>Apache 修補程式資訊

#### <a name="hadoop"></a>Hadoop

此版本提供 Hadoop Common 2.7.3 和下列 Apache 修補程式：

-   [HADOOP-13190](https://issues.apache.org/jira/browse/HADOOP-13190)：會在 KMS HA 文件中提及 LoadBalancingKMSClientProvider。

-   [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227)：AsyncCallHandler 應該使用事件導向架構來處理非同步呼叫。

-   [HADOOP-14104](https://issues.apache.org/jira/browse/HADOOP-14104)：用戶端應該一律向 namenode 要求 kms 提供者路徑。

-   [HADOOP-14799](https://issues.apache.org/jira/browse/HADOOP-14799)：將 nimbus-jose-jwt 更新為 4.41.1。

-   [HADOOP-14814](https://issues.apache.org/jira/browse/HADOOP-14814)：將 FsServerDefaults 上的不相容 API 變更修正為 HADOOP-14104。

-   [HADOOP-14903](https://issues.apache.org/jira/browse/HADOOP-14903)：將 json-smart 明確新增至 pom.xml。

-   [HADOOP-15042](https://issues.apache.org/jira/browse/HADOOP-15042)：Azure PageBlobInputStream.skip() 可在 numberOfPagesRemaining 為 0 時傳回負值。

-   [HADOOP-15255](https://issues.apache.org/jira/browse/HADOOP-15255)：可對 LdapGroupsMapping 中的群組名稱支援大小寫轉換。

-   [HADOOP-15265](https://issues.apache.org/jira/browse/HADOOP-15265)：從 hadoop-auth pom.xml 中明確排除 json-smart。

-   [HDFS-7922](https://issues.apache.org/jira/browse/HDFS-7922)： ShortCircuitCache \# close 未釋出出 scheduledthreadpoolexecutors。

-   [HDFS-8496](https://issues.apache.org/jira/browse/HDFS-8496)：在保有 FSDatasetImpl 鎖定的情況下呼叫 stopWriter() 可能會封鎖其他執行緒 (cmccabe)。

-   [HDFS-10267](https://issues.apache.org/jira/browse/HDFS-10267)：針對 FsDatasetImpl\#recoverAppend 和 FsDatasetImpl\#recoverClose 的額外「同步處理」。

-   [HDFS-10489](https://issues.apache.org/jira/browse/HDFS-10489)：取代 HDFS 加密區域的 dfs.encryption.key.provider.uri。

-   [HDFS-11384](https://issues.apache.org/jira/browse/HDFS-11384)：新增選項供平衡器分散 getBlocks 呼叫，以避免 NameNode 的 rpc.CallQueueLength 突然增加。

-   [HDFS-11689](https://issues.apache.org/jira/browse/HDFS-11689)：DFSClient%isHDFSEncryptionEnabled 中斷 Hacky Hive 程式碼所擲回的新例外狀況。

-   [HDFS-11711](https://issues.apache.org/jira/browse/HDFS-11711)：DN 不應刪除針對「開啟太多檔案」例外狀況的封鎖。

-   [HDFS-12347](https://issues.apache.org/jira/browse/HDFS-12347)：TestBalancerRPCDelay\#testBalancerRPCDelay 的極為頻繁地失敗。

-   [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781)：Datanode 關閉之後，[在 Namenode UI Datanode] 索引標籤會擲回警告訊息。

-   [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054)：處理 DFSClient 刪除呼叫中的 PathIsNotEmptyDirectoryException。

-   [HDFS-13120](https://issues.apache.org/jira/browse/HDFS-13120)：快照集差異可能會在 concat 之後損毀。

-   [YARN-3742](https://issues.apache.org/jira/browse/YARN-3742)：如果 ZKClient 建立逾時，YARN RM 將會關閉。

-   [YARN-6061](https://issues.apache.org/jira/browse/YARN-6061)：為 RM 中的重要執行緒新增 UncaughtExceptionHandler。

-   [YARN-7558](https://issues.apache.org/jira/browse/YARN-7558)：如果啟用 UI 驗證，yarn logs 命令將無法取得執行中容器的記錄。

-   [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697)：即使記錄彙總已完成，仍無法擷取已完成應用程式的記錄。

HDP 2.6.4 提供了 Hadoop Common 2.7.3 和下列 Apache 修補程式：

-   [HADOOP-13700](https://issues.apache.org/jira/browse/HADOOP-13700)：從 TrashPolicy\#initialize 和 \#getInstance 簽章中移除取消擲回 IOException。

-   [HADOOP-13709](https://issues.apache.org/jira/browse/HADOOP-13709)：能夠在處理序存在時清除由殼層繁衍的子處理序。

-   [HADOOP-14059](https://issues.apache.org/jira/browse/HADOOP-14059)：s3a 重新命名 (self、subdir) 錯誤訊息中的錯字。

-   [HADOOP-14542](https://issues.apache.org/jira/browse/HADOOP-14542)：新增會接受 slf4j 記錄器 API 的 IOUtils.cleanupWithLogger。

-   [HDFS-9887](https://issues.apache.org/jira/browse/HDFS-9887)：WebHdfs 通訊端逾時應該是可設定的。

-   [HDFS-9914](https://issues.apache.org/jira/browse/HDFS-9914)：修正可設定的 WebhDFS 連線/讀取逾時。

-   [MAPREDUCE-6698](https://issues.apache.org/jira/browse/MAPREDUCE-6698)：增加 TestUnnecessaryBlockingOnHist oryFileInfo.testTwoThreadsQueryingDifferentJobOfSameUser 的逾時。

-   [YARN-4550](https://issues.apache.org/jira/browse/YARN-4550)：TestContainerLanch 中的某些測試未能在非英文地區設定的環境中進行。

-   [YARN-4717](https://issues.apache.org/jira/browse/YARN-4717)：TestResourceLocalizationService.testPublicResourceInitializesLocalDir 間歇性地失敗，因為清除時產生 IllegalArgumentException。

-   [YARN-5042](https://issues.apache.org/jira/browse/YARN-5042)：以唯讀掛接的形式將 /sys/fs/cgroup 掛接到 Docker 容器。

-   [YARN-5318](https://issues.apache.org/jira/browse/YARN-5318)：修正 TestRMAdminService\#te stRefreshNodesResourceWithFileSystemBasedConfigurationProvider 的間歇性測試失敗。

-   [YARN-5641](https://issues.apache.org/jira/browse/YARN-5641)：容器完成後，當地語系化工具會留下 tarball。

-   [YARN-6004](https://issues.apache.org/jira/browse/YARN-6004)：重構 TestResourceLocalizationService\#testDownloadingResourcesOnContainer，使其少於 150 行。

-   [YARN-6078](https://issues.apache.org/jira/browse/YARN-6078)：容器會卡在當地語系化狀態。

-   [YARN-6805](https://issues.apache.org/jira/browse/YARN-6805)：LinuxContainerExecutor 中的 NPE，因為 PrivilegedOperationException 結束代碼為 Null。

#### <a name="hbase"></a>hbase

此版本提供 HBase 1.1.2 和下列 Apache 修補程式。

-   [HBASE-13376](https://issues.apache.org/jira/browse/HBASE-13376)：改善 Stochastic 負載平衡器。

-   [HBASE-13716](https://issues.apache.org/jira/browse/HBASE-13716)：停止使用 Hadoop 的 FSConstants。

-   [HBASE-13848](https://issues.apache.org/jira/browse/HBASE-13848)：透過認證提供者 API 存取 InfoServer SSL 密碼。

-   [HBASE-13947](https://issues.apache.org/jira/browse/HBASE-13947)：使用 MasterServices，而非 AssignmentManager 中的伺服器。

-   [HBASE-14135](https://issues.apache.org/jira/browse/HBASE-14135)：HBase 備份/還原第 3 階段：合併備份映像。

-   [HBASE-14473](https://issues.apache.org/jira/browse/HBASE-14473)：平行計算區域位置。

-   [HBASE-14517](https://issues.apache.org/jira/browse/HBASE-14517)：在 [主要狀態] 頁面中顯示 regionserver 的版本。

-   [HBASE-14606](https://issues.apache.org/jira/browse/HBASE-14606)：在 Apache 上的主幹建置中，TestSecureLoadIncrementalHFiles 測試已逾時。

-   [HBASE-15210](https://issues.apache.org/jira/browse/HBASE-15210)：復原積極的負載平衡器記錄，速度為每毫秒數十行。

-   [HBASE-15515](https://issues.apache.org/jira/browse/HBASE-15515)：改善平衡器中的 LocalityBasedCandidateGenerator。

-   [HBASE-15615](https://issues.apache.org/jira/browse/HBASE-15615)：當 RegionServerCallable 需要重試時，睡眠時間會錯誤。

-   [HBASE-16135](https://issues.apache.org/jira/browse/HBASE-16135)：可能永遠不會刪除已移除同儕節點的 rs 下的 PeerClusterZnode。

-   [HBASE-16570](https://issues.apache.org/jira/browse/HBASE-16570)：在啟動時平行計算區域位置。

-   [HBASE-16810](https://issues.apache.org/jira/browse/HBASE-16810)：當 regionservers 位於 /hbase/draining 的 znode 並卸載時，HBase 平衡器會擲回 ArrayIndexOutOfBoundsException。

-   [HBASE-16852](https://issues.apache.org/jira/browse/HBASE-16852)：TestDefaultCompactSelection 已在 branch-1.3 上失敗。

-   [HBASE-17387](https://issues.apache.org/jira/browse/HBASE-17387)：減少 RegionActionResult 中針對 multi() 的例外狀況報告額外負荷。

-   [HBASE-17850](https://issues.apache.org/jira/browse/HBASE-17850)：備份系統修復公用程式。

-   [HBASE-17931](https://issues.apache.org/jira/browse/HBASE-17931)：將系統資料表指派給具有最高版本的伺服器。

-   [HBASE-18083](https://issues.apache.org/jira/browse/HBASE-18083)：在 HFileCleaner 中讓大型/小型檔案清除執行緒數目變成可供設定的狀態。

-   [HBASE-18084](https://issues.apache.org/jira/browse/HBASE-18084)：改善 CleanerChore，使其能從會取用更多磁碟空間的目錄中清除。

-   [HBASE-18164](https://issues.apache.org/jira/browse/HBASE-18164)：速度快上許多的位置成本函式和候選項目產生器。

-   [HBASE-18212](https://issues.apache.org/jira/browse/HBASE-18212)：在具有本機檔案系統 HBase 記錄警告訊息的獨立模式中：無法在 org.apache.hadoop.fs.FSDataInputStream 類別中叫用 'unbuffer' 方法。

-   [HBASE-18808](https://issues.apache.org/jira/browse/HBASE-18808)：BackupLogCleaner\#getDeletableFiles() 中的設定檢查無效。

-   [HBASE-19052](https://issues.apache.org/jira/browse/HBASE-19052)：FixedFileTrailer 應該會辨識 branch-1.x 中的 CellComparatorImpl 類別。

-   [HBASE-19065](https://issues.apache.org/jira/browse/HBASE-19065)：HRegion\#bulkLoadHFiles() 應該等候並行 Region\#flush() 完成。

-   [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285)：新增每一資料表的延遲長條圖。

-   [HBASE-19393](https://issues.apache.org/jira/browse/HBASE-19393)：使用 SSL 存取 HBase UI 時，出現 HTTP 413 FULL 標頭。

-   [HBASE-19395](https://issues.apache.org/jira/browse/HBASE-19395)： \[ branch-1 \] testendtoendsplittransaction.testmasteropswhilesplitting. 會失敗，因為 NPE。

-   [HBASE-19421](https://issues.apache.org/jira/browse/HBASE-19421)：branch-1 不會針對 Hadoop 3.0.0 進行編譯。

-   [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934)：若已啟用讀取複本，並在區域分割之後擷取線上快照集，則會發生 HBaseSnapshotException。

-   [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008)： \[ \] 在分割區域之後還原快照集時，將發生 nullpointerexception。

#### <a name="hive"></a>Hive

此版本提供 Hive 1.2.1 和 Hive 2.1.0，以及下列修補程式：

_ *Hive 1.2.1 Apache 修補程式：**

-   [HIVE-10697](https://issues.apache.org/jira/browse/HIVE-10697)：ObjectInspectorConvertors\#UnionConvertor 會進行錯誤的轉換。

-   [HIVE-11266](https://issues.apache.org/jira/browse/HIVE-11266)：count(\*) 會根據外部資料表的資料表統計資料，產生錯誤的結果。

-   [HIVE-12245](https://issues.apache.org/jira/browse/HIVE-12245)：HBase 支援的資料表可支援資料行註解。

-   [HIVE-12315](https://issues.apache.org/jira/browse/HIVE-12315)：修正除數為零的向量化雙精度浮點數。

-   [HIVE-12360](https://issues.apache.org/jira/browse/HIVE-12360)：在具有述詞下推的未壓縮 ORC 中會進行錯誤的搜尋。

-   [HIVE-12378](https://issues.apache.org/jira/browse/HIVE-12378)：HBaseSerDe.serialize 二進位欄位上的例外狀況。

-   [HIVE-12785](https://issues.apache.org/jira/browse/HIVE-12785)：檢視具有等位型別，且結構的 UDF 會中斷。

-   [HIVE-14013](https://issues.apache.org/jira/browse/HIVE-14013)：描述資料表未正確顯示 unicode。

-   [HIVE-14205](https://issues.apache.org/jira/browse/HIVE-14205)：Hive 不支援等位型別與 AVRO 檔案格式的搭配。

-   [HIVE-14421](https://issues.apache.org/jira/browse/HIVE-14421)：FS.deleteOnExit 會保存 \_tmp\_space.db 檔案的參考。

-   [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)：忽略 SQLOperation.runQuery 中不合法的作業狀態轉換例外狀況，以公開實際的例外狀況。

-   [HIVE-15680](https://issues.apache.org/jira/browse/HIVE-15680)：當 hive.optimize.index.filter=true 且查詢在 MR 模式中參考了相同的 ORC 資料表兩次時，會產生不正確的結果。

-   [HIVE-15883](https://issues.apache.org/jira/browse/HIVE-15883)：Hive 插入中的 HBase 對應資料表在使用小數點時會失敗。

-   [HIVE-16232](https://issues.apache.org/jira/browse/HIVE-16232)：對 QuotedIdentifier 中的資料行支援統計資料計算。

-   [HIVE-16828](https://issues.apache.org/jira/browse/HIVE-16828)：在啟用 CBO 的情況下，對已分割的檢視所進行的查詢會擲回 IndexOutOfBoundException。

-   [HIVE-17013](https://issues.apache.org/jira/browse/HIVE-17013)：根據對檢視的選取來刪除具有子查詢的要求。

-   [*HIVE-17063*](https://issues.apache.org/jira/browse/HIVE-17063)：先卸載資料分割之後，將覆寫分割區插入外部資料表會失敗。

-   [HIVE-17259](https://issues.apache.org/jira/browse/HIVE-17259)：Hive JDBC 無法辨識 UNIONTYPE 資料行。

-   [HIVE-17419](https://issues.apache.org/jira/browse/HIVE-17419)：ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS 命令會顯示已遮罩資料表的計算統計資料。

-   [HIVE-17530](https://issues.apache.org/jira/browse/HIVE-17530)：轉換 uniontype 時發生 ClassCastException。

-   [HIVE-17621](https://issues.apache.org/jira/browse/HIVE-17621)：HCatInputFormat 分割計算期間會忽略 Hive 網站設定。

-   [HIVE-17636](https://issues.apache.org/jira/browse/HIVE-17636)：新增 BlobStore 的 multiple\_agg.q 測試。

-   [HIVE-17729](https://issues.apache.org/jira/browse/HIVE-17729)：新增資料庫並解說相關的 blobstore 測試。

-   [HIVE-17731](https://issues.apache.org/jira/browse/HIVE-17731)：在 HIVE-11985 中新增外部使用者的回溯相容性選項。

-   [HIVE-17803](https://issues.apache.org/jira/browse/HIVE-17803)：使用 Pig 多重查詢時，若有 2 個 HCatStorers 寫入至相同的資料表，則會破壞彼此的輸出。

-   [HIVE-17829](https://issues.apache.org/jira/browse/HIVE-17829)：ArrayIndexOutOfBoundsException - Hive2 中具有 Avro 結構描述的 HBASE 支援資料表。

-   [HIVE-17845](https://issues.apache.org/jira/browse/HIVE-17845)：如果目標資料表資料行不是小寫，插入會失敗。

-   [HIVE-17900](https://issues.apache.org/jira/browse/HIVE-17900)：在由 Compactor 觸發的資料行上分析統計資料，會產生資料分割資料行 &gt; 1 個的錯誤格式 SQL。

-   [HIVE-18026](https://issues.apache.org/jira/browse/HIVE-18026)：Hive webhcat 主體設定最佳化。

-   [HIVE-18031](https://issues.apache.org/jira/browse/HIVE-18031)：針對 Alter Database 作業支援複寫。

-   [HIVE-18090](https://issues.apache.org/jira/browse/HIVE-18090)：透過 hadoop 認證連接中繼存放區時，acid 活動訊號會失敗。

-   [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)：將 hive.groupby.orderby.position.alias 設為 true 時，Hive 查詢會傳回錯誤結果。

-   [HIVE-18258](https://issues.apache.org/jira/browse/HIVE-18258)：向量化：具有重複資料行的 Reduce-Side GROUP BY MERGEPARTIAL 會中斷。

-   [HIVE-18293](https://issues.apache.org/jira/browse/HIVE-18293)：若資料夾不是由執行 HiveMetaStore 的身分識別所擁有的，Hive 就無法壓縮該資料夾內所包含的資料表。

-   [HIVE-18327](https://issues.apache.org/jira/browse/HIVE-18327)：移除 MiniHiveKdc 的不必要 HiveConf 相依性。

-   [HIVE-18341](https://issues.apache.org/jira/browse/HIVE-18341)：新增 repl 載入支援，可用於對具有相同加密金鑰的 TDE 新增「原始」命名空間。

-   [HIVE-18352](https://issues.apache.org/jira/browse/HIVE-18352)：在進行 REPL DUMP 以便與其他工具整合時，引進了 METADATAONLY 選項。

-   [HIVE-18353](https://issues.apache.org/jira/browse/HIVE-18353)：CompactorMR 應該呼叫 jobclient.close() 以觸發清除 (透過 Thejas Nair 的 Prabhu Joseph)。

-   [HIVE-18390](https://issues.apache.org/jira/browse/HIVE-18390)：在 ColumnPruner 中查詢已分割的檢視時，發生 IndexOutOfBoundsException。

-   [HIVE-18429](https://issues.apache.org/jira/browse/HIVE-18429)：壓縮應該處理未產生任何輸出時的案例。

-   [HIVE-18447](https://issues.apache.org/jira/browse/HIVE-18447)：JDBC：提供方法供 JDBC 使用者透過連接字串傳遞 Cookie 資訊。

-   [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)：Compactor 不會將資料表屬性傳遞至 Orc 寫入器。

-   [HIVE-18467](https://issues.apache.org/jira/browse/HIVE-18467)：支援整個倉儲傾印/載入 + 建立/置放資料庫事件 (Anishek Agarwal，已由 Sankar Hariappan 檢閱)。

-   [HIVE-18551](https://issues.apache.org/jira/browse/HIVE-18551)：向量化：VectorMapOperator 嘗試為 Hybrid Grace 寫入太多向量資料行。

-   [HIVE-18587](https://issues.apache.org/jira/browse/HIVE-18587)：插入 DML 事件可能會嘗試對目錄計算總和檢查碼。

-   [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)：擴充 JsonSerDe 以支援 BINARY 類型。

-   [HIVE-18626](https://issues.apache.org/jira/browse/HIVE-18626)：Repl 載入 "with" 子句不會將設定傳遞給工作。

-   [HIVE-18660](https://issues.apache.org/jira/browse/HIVE-18660)：PCR 無法區別資料分割和虛擬資料行。

-   [HIVE-18754](https://issues.apache.org/jira/browse/HIVE-18754)：REPL STATUS 應該支援 'with' 子句。

-   [HIVE-18754](https://issues.apache.org/jira/browse/HIVE-18754)：REPL STATUS 應該支援 'with' 子句。

-   [HIVE-18788](https://issues.apache.org/jira/browse/HIVE-18788)：清除 JDBC PreparedStatement 中的輸入。

-   [HIVE-18794](https://issues.apache.org/jira/browse/HIVE-18794)：Repl 載入 "with" 子句不會將設定傳遞給非磁碟分割表格的工作。

-   [HIVE-18808](https://issues.apache.org/jira/browse/HIVE-18808)：統計資料更新失敗時，讓壓縮更穩固。

-   [HIVE-18817](https://issues.apache.org/jira/browse/HIVE-18817)：讀取 ACID 資料表期間，發生 ArrayIndexOutOfBounds 例外狀況。

-   [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)：「插入目錄中作為 orcfile」時，自動合併會失敗。

-   [HIVE-18879](https://issues.apache.org/jira/browse/HIVE-18879)：如果 xercesImpl.jar 位於 classpath 中，則必須能夠在 UDFXPathUtil 中不允許內嵌的元素。

-   [HIVE-18907](https://issues.apache.org/jira/browse/HIVE-18907)：建立公用程式以修正 HIVE-18817 中的 acid 金鑰索引問題。

**Hive 2.1.0 Apache 修補程式：**

-   [HIVE-14013](https://issues.apache.org/jira/browse/HIVE-14013)：描述資料表未正確顯示 unicode。

-   [HIVE-14205](https://issues.apache.org/jira/browse/HIVE-14205)：Hive 不支援等位型別與 AVRO 檔案格式的搭配。

-   [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)：忽略 SQLOperation.runQuery 中不合法的作業狀態轉換例外狀況，以公開實際的例外狀況。

-   [HIVE-15680](https://issues.apache.org/jira/browse/HIVE-15680)：當 hive.optimize.index.filter=true 且查詢在 MR 模式中參考了相同的 ORC 資料表兩次時，會產生不正確的結果。

-   [HIVE-15883](https://issues.apache.org/jira/browse/HIVE-15883)：Hive 插入中的 HBase 對應資料表在使用小數點時會失敗。

-   [HIVE-16757](https://issues.apache.org/jira/browse/HIVE-16757)：移除已淘汰 AbstractRelNode.getRows 的呼叫。

-   [HIVE-16828](https://issues.apache.org/jira/browse/HIVE-16828)：在啟用 CBO 的情況下，對已分割的檢視所進行的查詢會擲回 IndexOutOfBoundException。

-   [*HIVE-17063*](https://issues.apache.org/jira/browse/HIVE-17063)：先卸載資料分割之後，將覆寫分割區插入外部資料表會失敗。

-   [HIVE-17259](https://issues.apache.org/jira/browse/HIVE-17259)：Hive JDBC 無法辨識 UNIONTYPE 資料行。

-   [HIVE-17530](https://issues.apache.org/jira/browse/HIVE-17530)：轉換 uniontype 時發生 ClassCastException。

-   [HIVE-17600](https://issues.apache.org/jira/browse/HIVE-17600)：讓 OrcFile 的 enforceBufferSize 變成可由使用者設定。

-   [HIVE-17601](https://issues.apache.org/jira/browse/HIVE-17601)：改善 LlapServiceDriver 中的錯誤處理。

-   [HIVE-17613](https://issues.apache.org/jira/browse/HIVE-17613)：針對簡短的同一執行緒配置移除物件集區。

-   [HIVE-17617](https://issues.apache.org/jira/browse/HIVE-17617)：空白結果集的彙總應該包含空白群組集合的群組。

-   [HIVE-17621](https://issues.apache.org/jira/browse/HIVE-17621)：HCatInputFormat 分割計算期間會忽略 Hive 網站設定。

-   [*HIVE-17629*](https://issues.apache.org/jira/browse/HIVE-17629)： CachedStore：有經過核准/未核准的設定，可讓您選擇性地快取資料表/資料分割，並允許在預先準備時讀取。

-   [HIVE-17636](https://issues.apache.org/jira/browse/HIVE-17636)：新增 BlobStore 的 multiple\_agg.q 測試。

-   [HIVE-17702](https://issues.apache.org/jira/browse/HIVE-17702)：ORC 中的十進位讀取器有不正確的 isRepeating 處理。

-   [HIVE-17729](https://issues.apache.org/jira/browse/HIVE-17729)：新增資料庫並解說相關的 blobstore 測試。

-   [HIVE-17731](https://issues.apache.org/jira/browse/HIVE-17731)：在 HIVE-11985 中新增外部使用者的回溯相容性選項。

-   [HIVE-17803](https://issues.apache.org/jira/browse/HIVE-17803)：使用 Pig 多重查詢時，若有 2 個 HCatStorers 寫入至相同的資料表，則會破壞彼此的輸出。

-   [HIVE-17845](https://issues.apache.org/jira/browse/HIVE-17845)：如果目標資料表資料行不是小寫，插入會失敗。

-   [HIVE-17900](https://issues.apache.org/jira/browse/HIVE-17900)：在由 Compactor 觸發的資料行上分析統計資料，會產生資料分割資料行 &gt; 1 個的錯誤格式 SQL。

-   [HIVE-18006](https://issues.apache.org/jira/browse/HIVE-18006)：將 HLLDenseRegister 的記憶體使用量最佳化。

-   [HIVE-18026](https://issues.apache.org/jira/browse/HIVE-18026)：Hive webhcat 主體設定最佳化。

-   [HIVE-18031](https://issues.apache.org/jira/browse/HIVE-18031)：針對 Alter Database 作業支援複寫。

-   [HIVE-18090](https://issues.apache.org/jira/browse/HIVE-18090)：透過 hadoop 認證連接中繼存放區時，acid 活動訊號會失敗。

-   [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)：cbo 停用時，無法依位置排序。

-   [HIVE-18258](https://issues.apache.org/jira/browse/HIVE-18258)：向量化：具有重複資料行的 Reduce-Side GROUP BY MERGEPARTIAL 會中斷。

-   [HIVE-18269](https://issues.apache.org/jira/browse/HIVE-18269)：LLAP：使用慢速處理管線進行快速 llap io 會導致 OOM。

-   [HIVE-18293](https://issues.apache.org/jira/browse/HIVE-18293)：若資料夾不是由執行 HiveMetaStore 的身分識別所擁有的，Hive 就無法壓縮該資料夾內所包含的資料表。

-   [HIVE-18318](https://issues.apache.org/jira/browse/HIVE-18318)：即使未封鎖，LLAP 記錄讀取器也應該檢查中斷。

-   [HIVE-18326](https://issues.apache.org/jira/browse/HIVE-18326)：LLAP Tez 排程器 - 只有在工作之間有相依性時，才讓這些工作優先進行。

-   [HIVE-18327](https://issues.apache.org/jira/browse/HIVE-18327)：移除 MiniHiveKdc 的不必要 HiveConf 相依性。

-   [HIVE-18331](https://issues.apache.org/jira/browse/HIVE-18331)：新增在 TGT 到期時重新登入以及某些記錄/lambda。

-   [HIVE-18341](https://issues.apache.org/jira/browse/HIVE-18341)：新增 repl 載入支援，可用於對具有相同加密金鑰的 TDE 新增「原始」命名空間。

-   [HIVE-18352](https://issues.apache.org/jira/browse/HIVE-18352)：在進行 REPL DUMP 以便與其他工具整合時，引進了 METADATAONLY 選項。

-   [HIVE-18353](https://issues.apache.org/jira/browse/HIVE-18353)：CompactorMR 應該呼叫 jobclient.close() 以觸發清除。

-   [HIVE-18384](https://issues.apache.org/jira/browse/HIVE-18384)：log4j2.x 程式庫發生 ConcurrentModificationException。

-   [HIVE-18390](https://issues.apache.org/jira/browse/HIVE-18390)：在 ColumnPruner 中查詢已分割的檢視時，發生 IndexOutOfBoundsException。

-   [HIVE-18447](https://issues.apache.org/jira/browse/HIVE-18447)：JDBC：提供方法供 JDBC 使用者透過連接字串傳遞 Cookie 資訊。

-   [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)：Compactor 不會將資料表屬性傳遞至 Orc 寫入器。

-   [HIVE-18462](https://issues.apache.org/jira/browse/HIVE-18462)：(針對有對應聯結的查詢所格式化的解釋，會具有資料行名稱未格式化的 columnExprMap)。

-   [HIVE-18467](https://issues.apache.org/jira/browse/HIVE-18467)：支援整個倉儲傾印/載入 + 建立/置放資料庫事件。

-   [HIVE-18488](https://issues.apache.org/jira/browse/HIVE-18488)：LLAP ORC 讀取器缺少某些 null 檢查。

-   [HIVE-18490](https://issues.apache.org/jira/browse/HIVE-18490)：具有 EXISTS 和 NOT EXISTS 與不相等述詞的查詢會產生錯誤的結果。

-   [HIVE-18506](https://issues.apache.org/jira/browse/HIVE-18506)：LlapBaseInputFormat - 負數的陣列索引。

-   [HIVE-18517](https://issues.apache.org/jira/browse/HIVE-18517)：向量化：修正 VectorMapOperator 以接受 VRBs，並檢查向量化旗標是否正確以支援 LLAP 快取)。

-   [HIVE-18523](https://issues.apache.org/jira/browse/HIVE-18523)：修正沒有輸入時的摘要資料列。

-   [HIVE-18528](https://issues.apache.org/jira/browse/HIVE-18528)：彙總 ObjectStore 中的統計資料會得到錯誤的結果。

-   [HIVE-18530](https://issues.apache.org/jira/browse/HIVE-18530)：複寫應該略過 MM 資料表 (暫時)。

-   [HIVE-18548](https://issues.apache.org/jira/browse/HIVE-18548)：修正 log4j 匯入。

-   [HIVE-18551](https://issues.apache.org/jira/browse/HIVE-18551)：向量化：VectorMapOperator 嘗試為 Hybrid Grace 寫入太多向量資料行。

-   [HIVE-18577](https://issues.apache.org/jira/browse/HIVE-18577)：SemanticAnalyzer.validate 有一些毫無意義的中繼存放區呼叫。

-   [HIVE-18587](https://issues.apache.org/jira/browse/HIVE-18587)：插入 DML 事件可能會嘗試對目錄計算總和檢查碼。

-   [HIVE-18597](https://issues.apache.org/jira/browse/HIVE-18597)：LLAP︰一律針對 org.apache.log4j 封裝 log4j2 API jar。

-   [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)：擴充 JsonSerDe 以支援 BINARY 類型。

-   [HIVE-18626](https://issues.apache.org/jira/browse/HIVE-18626)：Repl 載入 "with" 子句不會將設定傳遞給工作。

-   [HIVE-18643](https://issues.apache.org/jira/browse/HIVE-18643)：不要針對 ACID 作業檢查已封存的資料分割。

-   [HIVE-18660](https://issues.apache.org/jira/browse/HIVE-18660)：PCR 無法區別資料分割和虛擬資料行。

-   [HIVE-18754](https://issues.apache.org/jira/browse/HIVE-18754)：REPL STATUS 應該支援 'with' 子句。

-   [HIVE-18788](https://issues.apache.org/jira/browse/HIVE-18788)：清除 JDBC PreparedStatement 中的輸入。

-   [HIVE-18794](https://issues.apache.org/jira/browse/HIVE-18794)：Repl 載入 "with" 子句不會將設定傳遞給非磁碟分割表格的工作。

-   [HIVE-18808](https://issues.apache.org/jira/browse/HIVE-18808)：統計資料更新失敗時，讓壓縮更穩固。

-   [HIVE-18815](https://issues.apache.org/jira/browse/HIVE-18815)：移除 HPL/SQL 中未使用的功能。

-   [HIVE-18817](https://issues.apache.org/jira/browse/HIVE-18817)：讀取 ACID 資料表期間，發生 ArrayIndexOutOfBounds 例外狀況。

-   [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)：「插入目錄中作為 orcfile」時，自動合併會失敗。

-   [HIVE-18879](https://issues.apache.org/jira/browse/HIVE-18879)：如果 xercesImpl.jar 位於 classpath 中，則必須能夠在 UDFXPathUtil 中不允許內嵌的元素。

-   [*HIVE-18944*](https://issues.apache.org/jira/browse/HIVE-18944)： DPP 期間設定了不正確的群組集位置。

#### <a name="kafka"></a>Kafka

此版本提供 Kafka 1.0.0 和下列 Apache 修補程式。

-   [KAFKA-4827](https://issues.apache.org/jira/browse/KAFKA-4827)：Kafka 連線：連接器名稱中的特殊字元有錯誤。

-   [KAFKA-6118](https://issues.apache.org/jira/browse/KAFKA-6118)：kafka.api.SaslScramSslEndToEndAuthorizationTest.testTwoConsumersWithDifferentSaslCredentials 發生暫時性失敗。

-   [KAFKA-6156](https://issues.apache.org/jira/browse/KAFKA-6156)：JmxReporter 無法處理 Windows 樣式的目錄路徑。

-   [KAFKA-6164](https://issues.apache.org/jira/browse/KAFKA-6164)：ClientQuotaManager 執行緒可在遇到錯誤載入記錄時防止關機。

-   [KAFKA-6167](https://issues.apache.org/jira/browse/KAFKA-6167)：資料流目錄上的時間戳記包含冒號，此字元不合法。

-   [KAFKA-6179](https://issues.apache.org/jira/browse/KAFKA-6179)：RecordQueue.clear() 不會清除 MinTimestampTracker 的維護清單。

-   [KAFKA-6185](https://issues.apache.org/jira/browse/KAFKA-6185)：選取器記憶體流失，很可能會在向下轉換時發生 OOM 的情況。

-   [KAFKA-6190](https://issues.apache.org/jira/browse/KAFKA-6190)：GlobalKTable 永遠不會在取用交易訊息時結束還原作業。

-   [KAFKA-6210](https://issues.apache.org/jira/browse/KAFKA-6210)：如果將 1.0.0 用於 inter.broker.protocol.version 或 log.message.format.version，則會發生 IllegalArgumentException。

-   [KAFKA-6214](https://issues.apache.org/jira/browse/KAFKA-6214)：搭配使用待命複本與記憶體中狀態存放區會造成資料流損毀。

-   [KAFKA-6215](https://issues.apache.org/jira/browse/KAFKA-6215)：KafkaStreamsTest 在主幹中失敗。

-   [KAFKA-6238](https://issues.apache.org/jira/browse/KAFKA-6238)：在套用目標為 1.0.0 的輪流升級時，通訊協定版本發生問題。

-   [KAFKA-6260](https://issues.apache.org/jira/browse/KAFKA-6260)：AbstractCoordinator 未清楚地處理 NULL 例外狀況。

-   [KAFKA-6261](https://issues.apache.org/jira/browse/KAFKA-6261)：如果 ack=0，要求記錄會擲回例外狀況。

-   [KAFKA-6274](https://issues.apache.org/jira/browse/KAFKA-6274)：改善 KTable 來源狀態存放區所自動產生的名稱。

#### <a name="mahout"></a>Mahout

在 HDP 2.3.x 和 2.4.x 中，我們不會傳送特定 Apache 版本的 Mahout，而是會同步至 Apache Mahout 主幹上的特定修訂點。 此修訂點在 0.9.0 版本之後，但在 0.10.0 版本之前。 這會對 0.9.0 版本提供大量的錯誤修正和功能增強，但在完整轉換至 0.10.0 中的新 Spark 型 Mahout 之前，會提供穩定的 Mahout 功能版本。

針對 HDP 2.3.x 和 2.4.x 中的 Mahout 所選擇的修訂點，來自 Apache Mahout 的 "mahout-0.10.x" 分支，自 2014 年 12 月 19 日起，GitHub 中的修訂 0f037cb03e77c096。

在 HDP 2.5.x 和 2.6.x 中，我們已從 Mahout 移除 "commons-httpclient" 程式庫 (原因是我們將其視為可能有安全性問題的已淘汰程式庫)，並已將 Mahout 中的 Hadoop-Client 升級到 2.7.3 版，和 HDP 2.5 中所使用的版本相同。 因此：

-   先前編譯的 Mahout 作業必須在 HDP 2.5 或 2.6 環境中重新編譯。

-   某些 Mahout 作業有一點可能會發生與 "org.apache.commons.httpclient"、"net.java.dev.jets3t" 或類別名稱前置詞相關的 "ClassNotFoundException" 或 "could not load class" 錯誤。 如果發生這些錯誤，請考慮是否要以手動方式在 classpath 中為作業安裝所需的 jar，前提是您的環境可接受已淘汰的程式庫中有安全性問題的風險。

-   某些 Mahout 作業甚至有更小的可能性會遇到 Mahout 對 hadoop-common 程式庫的 hbase-client 程式碼呼叫會損毀 (由於二進位相容性問題)。 可惜的是，目前沒有辦法解決此問題，除非您還原為 HDP 2.4.2 版的 Mahout，但這可能會有安全性問題。 再者，這個情況應該非常罕見，不太可能發生在任何給定的 Mahout 作業套件中。

#### <a name="oozie"></a>Oozie

此版本為 Oozie 4.2.0 提供下列 Apache 修補程式。

-   [OOZIE-2571](https://issues.apache.org/jira/browse/OOZIE-2571)：新增 spark.scala.binary.version Maven 屬性，以便能夠使用 Scala 2.11。

-   [OOZIE-2606](https://issues.apache.org/jira/browse/OOZIE-2606)：設定 spark.yarn.jars 以使用 Oozie 修正 Spark 2.0。

-   [OOZIE-2658](https://issues.apache.org/jira/browse/OOZIE-2658)：--driver-class-path 會覆寫 SparkMain 中的 classpath。

-   [OOZIE-2787](https://issues.apache.org/jira/browse/OOZIE-2787)：Oozie 會散發應用程式 jar 兩次而使得 spark 作業失敗。

-   [OOZIE-2792](https://issues.apache.org/jira/browse/OOZIE-2792)：當 Hive 在 Spark 上時，Hive2 動作不會正確剖析記錄檔中的 Spark 應用程式識別碼。

-   [OOZIE-2799](https://issues.apache.org/jira/browse/OOZIE-2799)：為 hive 上的 spark sql 設定記錄位置。

-   [OOZIE-2802](https://issues.apache.org/jira/browse/OOZIE-2802)：Spark 動作在 Spark 2.1.0 上失敗，因為 sharelibs 重複。

-   [OOZIE-2923](https://issues.apache.org/jira/browse/OOZIE-2923)：改善 Spark 選項剖析。

-   [OOZIE-3109](https://issues.apache.org/jira/browse/OOZIE-3109)：SCA：跨網站指令碼：已反映。

-   [OOZIE-3139](https://issues.apache.org/jira/browse/OOZIE-3139)：Oozie 不會正確地驗證工作流程。

-   [OOZIE-3167](https://issues.apache.org/jira/browse/OOZIE-3167)：在 Oozie 4.3 分支上升級 tomcat 版本。

#### <a name="phoenix"></a>Phoenix

此版本提供 Phoenix 4.7.0 和下列 Apache 修補程式：

-   [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751)：在 preScannerNext 中而不是 postScannerOpen 中執行彙總、排序等作業。

-   [PHOENIX-2714](https://issues.apache.org/jira/browse/PHOENIX-2714)：修正 BaseResultIterators 中的位元組估計，並公開為介面。

-   [PHOENIX-2724](https://issues.apache.org/jira/browse/PHOENIX-2724)：有大量 guideposts 的查詢速度會比沒有統計資料的查詢慢。

-   [PHOENIX-2855](https://issues.apache.org/jira/browse/PHOENIX-2855)：未針對 HBase 1.2 將因應措施增量 TimeRange 序列化。

-   [PHOENIX-3023](https://issues.apache.org/jira/browse/PHOENIX-3023)：依預設以平行方式執行限制查詢時，效能會變慢。

-   [PHOENIX-3040](https://issues.apache.org/jira/browse/PHOENIX-3040)：請勿使用 guideposts 來循序執行查詢。

-   [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112)：未正確處理部分資料列掃描。

-   [PHOENIX-3240](https://issues.apache.org/jira/browse/PHOENIX-3240)：Pig 載入器發生 ClassCastException。

-   [PHOENIX-3452](https://issues.apache.org/jira/browse/PHOENIX-3452)：NULLS FIRST/NULL LAST 應該不會影響 GROUP BY 是否順序保留。

-   [PHOENIX-3469](https://issues.apache.org/jira/browse/PHOENIX-3469)：NULLS LAST/NULLS FIRST 的 DESC 主要金鑰排序次序錯誤。

-   [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789)：在 postBatchMutateIndispensably 中執行跨區域索引維護呼叫。

-   [PHOENIX-3865](https://issues.apache.org/jira/browse/PHOENIX-3865)：未針對第一個資料行系列進行篩選時，IS NULL 不會傳回正確的結果。

-   [PHOENIX-4290](https://issues.apache.org/jira/browse/PHOENIX-4290)：若資料表具有固定索引，則會對 DELETE 執行完整的資料表掃描。

-   [PHOENIX-4373](https://issues.apache.org/jira/browse/PHOENIX-4373)：本機索引可變長度索引鍵在更新插入時可以有尾端 null。

-   [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466)：java.lang.RuntimeException：回應碼 500 - 執行 spark 作業以連線到 phoenix 查詢伺服器和載入資料。

-   [PHOENIX-4489](https://issues.apache.org/jira/browse/PHOENIX-4489)：Phoenix MR 作業中發生 HBase 連線流失。

-   [PHOENIX-4525](https://issues.apache.org/jira/browse/PHOENIX-4525)：GroupBy 執行中發生整數溢位。

-   [PHOENIX-4560](https://issues.apache.org/jira/browse/PHOENIX-4560)：如果 pk 資料行上有 WHERE，ORDER BY 就無法與 GROUP BY 搭配使用。

-   [PHOENIX-4586](https://issues.apache.org/jira/browse/PHOENIX-4586)：UPSERT SELECT 不會對子查詢考量比較運算子。

-   [PHOENIX-4588](https://issues.apache.org/jira/browse/PHOENIX-4588)：如果其子系有 Determinism.PER\_INVOCATION，則也複製運算式。

#### <a name="pig"></a>Pig

此版本為 Pig 0.16.0 提供下列 Apache 修補程式。

-   [PIG-5159](https://issues.apache.org/jira/browse/PIG-5159)：修正 Pig 不會儲存 Grunt 記錄。

-   [PIG-5175](https://issues.apache.org/jira/browse/PIG-5175)：將 jruby 升級至 1.7.26。

#### <a name="ranger"></a>Ranger

此版本提供 Ranger 0.7.0 和下列 Apache 修補程式：

-   [RANGER-1805](https://issues.apache.org/jira/browse/RANGER-1805)：改進程式碼以遵循 js 中的最佳做法。

-   [RANGER-1960](https://issues.apache.org/jira/browse/RANGER-1960)：將快照集的資料表名稱列入刪除考量中。

-   [RANGER-1982](https://issues.apache.org/jira/browse/RANGER-1982)：Ranger 系統管理員和 Ranger KMS 的分析計量錯誤改進。

-   [RANGER-1984](https://issues.apache.org/jira/browse/RANGER-1984)： HBase audit log 記錄可能不會顯示與存取的資料行相關聯的所有標記。

-   [RANGER-1988](https://issues.apache.org/jira/browse/RANGER-1988)：修正不安全的隨機性。

-   [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990)：在 Ranger 系統管理員中新增單向 SSL MySQL 支援。

-   [RANGER-2006](https://issues.apache.org/jira/browse/RANGER-2006)：修正靜態程式碼分析在 ranger usersync 中所偵測到的 ldap 同步來源問題。

-   [RANGER-2008](https://issues.apache.org/jira/browse/RANGER-2008)：多行原則條件的原則評估會失敗。

#### <a name="slider"></a>滑桿

此版本並未對 Slider 0.92.0 提供其他 Apache 修補程式。

#### <a name="spark"></a>Spark

此版本提供 Spark 2.3.0 和下列 Apache 修補程式：

-   [SPARK-13587](https://issues.apache.org/jira/browse/SPARK-13587)：在 pyspark 中支援 virtualenv。

-   [SPARK-19964](https://issues.apache.org/jira/browse/SPARK-19964)：在 SparkSubmitSuite 中避免讀取遠端存放庫。

-   [SPARK-22882](https://issues.apache.org/jira/browse/SPARK-22882)：結構化串流的 ML 測試：ml.classification。

-   [SPARK-22915](https://issues.apache.org/jira/browse/SPARK-22915)：spark.ml.feature 的串流測試，從 N 到 Z。

-   [SPARK-23020](https://issues.apache.org/jira/browse/SPARK-23020)：修正同處理序啟動器測試中的另一個競爭。

-   [SPARK-23040](https://issues.apache.org/jira/browse/SPARK-23040)：傳回隨機讀取器的可中斷迭代器。

-   [SPARK-23173](https://issues.apache.org/jira/browse/SPARK-23173)：避免在從 JSON 載入資料時建立損毀的 parquet 檔案。

-   [SPARK-23264](https://issues.apache.org/jira/browse/SPARK-23264)：修正 literals.sql.out 中的 scala.MatchError。

-   [SPARK-23288](https://issues.apache.org/jira/browse/SPARK-23288)：修正具有 parquet 接收的輸出計量。

-   [SPARK-23329](https://issues.apache.org/jira/browse/SPARK-23329)：修正三角運算函式的文件。

-   [SPARK-23406](https://issues.apache.org/jira/browse/SPARK-23406)：啟用 branch-2.3 的 stream-stream 自我聯結。

-   [SPARK-23434](https://issues.apache.org/jira/browse/SPARK-23434)：Spark 不應該對 HDFS 檔案路徑發出 \`metadata directory\` 警告。

-   [SPARK-23436](https://issues.apache.org/jira/browse/SPARK-23436)：只有當資料分割可以轉換為日期時，才將其推斷為日期。

-   [SPARK-23457](https://issues.apache.org/jira/browse/SPARK-23457)：先在 ParquetFileFormat 中註冊工作完成接聽程式。

-   [SPARK-23462](https://issues.apache.org/jira/browse/SPARK-23462)：改善 \`StructType\` 中的遺漏欄位錯誤訊息。

-   [SPARK-23490](https://issues.apache.org/jira/browse/SPARK-23490)：使用 CreateTable 中的現有資料表檢查 storage.locationUri。

-   [SPARK-23524](https://issues.apache.org/jira/browse/SPARK-23524)：不應檢查大型的本機隨機區塊是否有損毀。

-   [SPARK-23525](https://issues.apache.org/jira/browse/SPARK-23525)：針對外部 hive 資料表支援 ALTER TABLE CHANGE COLUMN COMMENT。

-   [SPARK-23553](https://issues.apache.org/jira/browse/SPARK-23553)：測試不應該採用 \`spark.sql.sources.default\` 的預設值。

-   [SPARK-23569](https://issues.apache.org/jira/browse/SPARK-23569)：允許 pandas\_udf 與 python3 樣式型別標註的函式搭配運作。

-   [SPARK-23570](https://issues.apache.org/jira/browse/SPARK-23570)：在 HiveExternalCatalogVersionsSuite 中新增 Spark 2.3.0。

-   [SPARK-23598](https://issues.apache.org/jira/browse/SPARK-23598)：讓 BufferedRowIterator 中的方法公開，以避免大型查詢發生執行階段錯誤。

-   [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599)：從虛擬隨機數字新增 UUID 產生器。

-   [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599)：在 Uuid 運算式中使用 RandomUUIDGenerator。

-   [SPARK-23601](https://issues.apache.org/jira/browse/SPARK-23601)：從版本中移除 .md5 檔案。

-   [SPARK-23608](https://issues.apache.org/jira/browse/SPARK-23608)：在 attachSparkUI 和 detachSparkUI 函式之間的 SHS 中新增同步處理，以避免 Jetty 處理常式發生並行修改問題。

-   [SPARK-23614](https://issues.apache.org/jira/browse/SPARK-23614)：修正使用快取時的不正確重複使用交換。

-   [SPARK-23623](https://issues.apache.org/jira/browse/SPARK-23623)：避免在 CachedKafkaConsumer (branch-2.3) 中同時使用快取的取用者。

-   [SPARK-23624](https://issues.apache.org/jira/browse/SPARK-23624)：修訂 Datasource V2 中方法 pushFilters 的文件。

-   [SPARK-23628](https://issues.apache.org/jira/browse/SPARK-23628)：calculateParamLength 不應傳回 1 + 運算式數目。

-   [SPARK-23630](https://issues.apache.org/jira/browse/SPARK-23630)：允許使用者的 hadoop conf 自訂生效。

-   [SPARK-23635](https://issues.apache.org/jira/browse/SPARK-23635)：Spark 執行程式的環境變數會由相同名稱的 AM 環境變數覆寫。

-   [SPARK-23637](https://issues.apache.org/jira/browse/SPARK-23637)：如果終止相同的執行程式多次，Yarn 可能會配置更多資源。

-   [SPARK-23639](https://issues.apache.org/jira/browse/SPARK-23639)：在 SparkSQL CLI 中的 init 中繼存放區用戶端之前取得權杖。

-   [SPARK-23642](https://issues.apache.org/jira/browse/SPARK-23642)：AccumulatorV2 子類別 isZero scaladoc 修正。

-   [SPARK-23644](https://issues.apache.org/jira/browse/SPARK-23644)：在 SHS 中對 REST 呼叫使用絕對路徑。

-   [SPARK-23645](https://issues.apache.org/jira/browse/SPARK-23645)：新增具有關鍵字引數的文件 RE \`pandas\_udf\`。

-   [SPARK-23649](https://issues.apache.org/jira/browse/SPARK-23649)：略過 UTF-8 中不允許的字元。

-   [SPARK-23658](https://issues.apache.org/jira/browse/SPARK-23658)：InProcessAppHandle 在 getLogger 中使用錯誤的類別。

-   [SPARK-23660](https://issues.apache.org/jira/browse/SPARK-23660)：修正應用程式快速結束時，yarn 叢集模式中的例外狀況。

-   [SPARK-23670](https://issues.apache.org/jira/browse/SPARK-23670)：修正 SparkPlanGraphWrapper 上的記憶體流失。

-   [SPARK-23671](https://issues.apache.org/jira/browse/SPARK-23671)：修正條件以啟用 SHS 執行緒集區。

-   [SPARK-23691](https://issues.apache.org/jira/browse/SPARK-23691)：盡可能在 PySpark 測試中使用 sql\_conf util。

-   [SPARK-23695](https://issues.apache.org/jira/browse/SPARK-23695)：修正 Kinesis 串流測試的錯誤訊息。

-   [SPARK-23706](https://issues.apache.org/jira/browse/SPARK-23706)：spark.conf.get(value, default=None) 不應該在 PySpark 中產生任何值。

-   [SPARK-23728](https://issues.apache.org/jira/browse/SPARK-23728)：修正 ML 測試在執行串流測試時預期會發生例外狀況的問題。

-   [SPARK-23729](https://issues.apache.org/jira/browse/SPARK-23729)：解析 glob 時遵守 URI 片段。

-   [SPARK-23759](https://issues.apache.org/jira/browse/SPARK-23759)：無法將 Spark UI 繫結至特定的主機名稱/IP。

-   [SPARK-23760](https://issues.apache.org/jira/browse/SPARK-23760)：CodegenContext.withSubExprEliminationExprs 應該會正確地儲存/還原 CSE 狀態。

-   [SPARK-23769](https://issues.apache.org/jira/browse/SPARK-23769)：移除會不必要地停用 Scalastyle 檢查的註解。

-   [SPARK-23788](https://issues.apache.org/jira/browse/SPARK-23788)：修正 StreamingQuerySuite 中的競爭。

-   [SPARK-23802](https://issues.apache.org/jira/browse/SPARK-23802)：PropagateEmptyRelation 會讓查詢計劃停留在未解決的狀態。

-   [SPARK-23806](https://issues.apache.org/jira/browse/SPARK-23806)：Broadcast.unpersist 可能會在搭配動態配置來使用時，造成嚴重的例外狀況。

-   [SPARK-23808](https://issues.apache.org/jira/browse/SPARK-23808)：在僅限測試 spark 工作階段中設定預設的 Spark 工作階段。

-   [SPARK-23809](https://issues.apache.org/jira/browse/SPARK-23809)：作用中的 SparkSession 應該由 getOrCreate 設定。

-   [SPARK-23816](https://issues.apache.org/jira/browse/SPARK-23816)：已終止的工作應該會忽略 FetchFailures。

-   [SPARK-23822](https://issues.apache.org/jira/browse/SPARK-23822)：改善 Parquet 結構描述不符的錯誤訊息。

-   [SPARK-23823](https://issues.apache.org/jira/browse/SPARK-23823)：在 transformExpression 中保留原始值。

-   [SPARK-23827](https://issues.apache.org/jira/browse/SPARK-23827)：StreamingJoinExec 應該確定輸入資料會分割成特定數目的資料分割。

-   [SPARK-23838](https://issues.apache.org/jira/browse/SPARK-23838)：在 SQL 索引標籤中，執行 SQL 查詢會顯示為「已完成」。

-   [SPARK-23881](https://issues.apache.org/jira/browse/SPARK-23881)：修正不穩定測試 JobCancellationSuite。「隨機讀取器的可中斷迭代器」。

#### <a name="sqoop"></a>Sqoop

此版本並未對 Sqoop 1.4.6 提供其他 Apache 修補程式。

#### <a name="storm"></a>Storm

此版本提供 Storm 1.1.1 和下列 Apache 修補程式：

-   [STORM-2652](https://issues.apache.org/jira/browse/STORM-2652)：JmsSpout open 方法擲回例外狀況。

-   [STORM-2841](https://issues.apache.org/jira/browse/STORM-2841)：testNoAcksIfFlushFails UT 失敗，並發生 NullPointerException。

-   [STORM-2854](https://issues.apache.org/jira/browse/STORM-2854)：公開 IEventLogger 以讓事件記錄可隨插即用。

-   [STORM-2870](https://issues.apache.org/jira/browse/STORM-2870)：FileBasedEventLogger 流失非精靈 ExecutorService，導致處理序無法完成。

-   [STORM-2960](https://issues.apache.org/jira/browse/STORM-2960)：最好要強調為 Storm 處理序設定正確作業系統帳戶的重要性。

#### <a name="tez"></a>Tez

此版本提供 Tez 0.7.0 和下列 Apache 修補程式：

-   [TEZ-1526](https://issues.apache.org/jira/browse/TEZ-1526)：大型作業針對 TezTaskID 的 LoadingCache 很慢。

#### <a name="zeppelin"></a>Zeppelin

此版本並未對 Zeppelin 0.7.3 提供其他 Apache 修補程式。

-   [ZEPPELIN-3072](https://issues.apache.org/jira/browse/ZEPPELIN-3072)：如果 notebook 太多，Zeppelin UI 會變得緩慢/沒有回應。

-   [ZEPPELIN-3129](https://issues.apache.org/jira/browse/ZEPPELIN-3129)：Zeppelin UI 不會在 IE 中登出。

-   [ZEPPELIN-903](https://issues.apache.org/jira/browse/ZEPPELIN-903)：以 Jersey2 取代 CXF。

#### <a name="zookeeper"></a>ZooKeeper

此版本提供 ZooKeeper 3.4.6 和下列 Apache 修補程式：

-   [ZOOKEEPER-1256](https://issues.apache.org/jira/browse/ZOOKEEPER-1256)： ClientPortBindTest 在 macOS X 上失敗。

-   [ZOOKEEPER-1901](https://issues.apache.org/jira/browse/ZOOKEEPER-1901)： \[ JDK8 \] 排序子系以在 AsyncOps 測試中進行比較。

-   [ZOOKEEPER-2423](https://issues.apache.org/jira/browse/ZOOKEEPER-2423)：因為有安全性弱點 (CVE-2014-3488)，所以升級 Netty 版本。

-   [ZOOKEEPER-2693](https://issues.apache.org/jira/browse/ZOOKEEPER-2693)：針對 wchp/wchc 四字母字組 (4lw) 的 DOS 攻擊。

-   [ZOOKEEPER-2726](https://issues.apache.org/jira/browse/ZOOKEEPER-2726)：針對導入潛在競爭條件的修補程式。

### <a name="fixed-common-vulnerabilities-and-exposures"></a>修正常見弱點與漏洞

本節涵蓋這一版所解決的所有常見弱點與漏洞 (CVE)。

#### <a name="cve-2017-7676"></a>**CVE-2017-7676**

| **摘要：** Apache Ranger 原則評估會忽略 '\*' 萬用字元之後的字元 |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **嚴重性：** 關鍵                                                                           |
| **廠商：** Hortonworks                                                                          |
| **受影響的版本：** HDInsight 3.6 版本，包含 Apache Ranger 0.5.x/0.6.x/0.7.0 版     |
| **受影響的使用者：** 所使用的 Ranger 原則在 '\*' 萬用字元之後有字元的環境 – 例如 my\*test、test\*.txt |
| **影響：** 原則資源比對器會忽略 '\*' 萬用字元之後的字元，而導致非預期的行為。      |
| **修正詳細資料：** Ranger 原則資源比對器已更新為會正確處理萬用字元相符項目。           |
| **建議動作：** 升級至 HDI 3.6 (含 Apache Ranger 0.7.1+)。                                |

### <a name="cve-2017-7677"></a>**CVE-2017-7677**

| **摘要：** 在指定了外部位置時，Apache Ranger Hive 授權者應檢查有無 RWX 權限 |
|--------------------------------------------------------------------------------------------------|
| **嚴重性：** 關鍵                                                                           |
| **廠商：** Hortonworks                                                                          |
| **受影響的版本：** HDInsight 3.6 版本，包含 Apache Ranger 0.5.x/0.6.x/0.7.0 版 |
| **受影響的使用者：** 對 hive 資料表使用外部位置的環境 |
| **影響：** 在對 hive 資料表使用外部位置的環境中，Apache Ranger Hive 授權者應該檢查是否有指定用於建立資料表的外部位置 RWX 權限。 |
| **修正詳細資料：** Ranger Hive 授權者已更新為會正確地處理外部位置的權限檢查。 |
| **建議動作：** 使用者應升級至 HDI 3.6 (含 Apache Ranger 0.7.1+)。 |

#### <a name="cve-2017-9799"></a>**CVE-2017-9799**

| **摘要：** 在 Apache Storm 中，可能會以錯誤使用者身分執行程式碼 |
|--------------------------------------------------------------------------------------------------|
|**嚴重性：** 重要 |
| **廠商：** Hortonworks |
| **受影響的版本：** HDP 2.4.0、HDP-2.5.0、HDP-2.6.0 |
| **受影響的使用者：** 在安全模式中使用 Storm ，並使用 blobstore 散發拓撲型成品，或使用 blobstore 散發任何拓撲資源的使用者。 |
| **影響：** 理論上，在某些情況和 storm 的組態下，拓撲的擁有者可以誘騙監督員以不同的非根使用者身分啟動背景工作角色。 在最糟糕的情況下，這可能會導致其他使用者的安全認證受到危害。 這項弱點僅適用於已啟用安全性的 Apache Storm 安裝。 |
| **風險降低：** 升級至 HDP-2.6.2.1，因為目前沒有因應措施。  |

#### <a name="cve-2016-4970"></a>**CVE-2016-4970**

| **摘要：** Netty 4.0.x (4.0.37.Final 之前) 和 4.1.x (4.1.1.Final 之前) 中的 handler/ssl/OpenSslEngine.java 可讓遠端攻擊者造成拒絕服務 (無限迴圈) |
|--------------------------------------------------------------------------------------------------|
| **嚴重性：** 中度  |
| **廠商：** Hortonworks  |
| **受影響的版本：** HDP 2.x.x (自 2.3.x 起)  |
| **受影響的使用者：** 使用 HDFS 的所有使用者。 |
| **影響：** 影響不大，因為 Hortonworks 不會直接在 Hadoop 程式碼基底中使用 OpenSslEngine.java。     |
| **建議動作：** 升級至 HDP 2.6.3。   |

#### <a name="cve-2016-8746"></a>**CVE-2016-8746**

| **摘要：** 原則評估中有 Apache Ranger 路徑比對問題                                                                    |
|----------------------------------------------------------------------------------------------------------------------------------------|
| **嚴重性：** 一般                                                                                                                   |
| **廠商：** Hortonworks                                                                                                                |
| **受影響的版本：** 所有 HDP 2.5 版本，包含 Apache Ranger 0.6.0/0.6.1/0.6.2 版                                         |
| **受影響的使用者：** Ranger 原則管理工具的所有使用者。                                                                         |
| **影響：** 在某些情況下，當原則包含萬用字元和遞迴旗標時，Ranger 原則引擎不會正確地比對路徑。 |
| **修正詳細資料：** 已修正原則評估邏輯                                                                                          |
| **建議動作：** 使用者應升級至 HDP 2.5.4+ (含 Apache Ranger 0.6.3+) 或 HDP 2.6+ (含 Apache Ranger 0.7.0+)         |

#### <a name="cve-2016-8751"></a>**CVE-2016-8751**

| **摘要：** Apache Ranger 的預存跨網站指令碼問題  |
|--------------------------------------------------------------------------------------------------|
| **嚴重性：** 一般 |
| **廠商：** Hortonworks |
| **受影響的版本：** 所有 HDP 2.3/2.4/2.5 版本，包含 Apache Ranger 0.5.x/0.6.0/0.6.1/0.6.2 版  |
| **受影響的使用者：** Ranger 原則管理工具的所有使用者。 |
| **影響：** 在輸入自訂原則條件時，Apache Ranger 很容易受到預存跨網站指令碼的攻擊。 當一般使用者登入和存取原則時，系統管理使用者可以儲存一些任意的 JavaScript 程式碼執行。 |
| **修正詳細資料：** 已新增邏輯來處理使用者輸入。  |
| **建議動作：** 使用者應升級至 HDP 2.5.4+ (含 Apache Ranger 0.6.3+) 或 HDP 2.6+ (含 Apache Ranger 0.7.0+)  |

### <a name="fixed-issues-for-support"></a>支援的已修正問題

已修正的問題代表先前透過 Hortonworks 支援所記錄，但現在已在目前版本中解決的選定問題。 這些問題可能已回報到先前版本的＜已知問題＞區段；這表示客戶已報告過這些問題，或 Hortonworks 品質工程小組已識別這些問題。

**不正確的結果**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                                                                                                                                                                | **總結**                                                                                                            |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| BUG-100019             | [YARN-8145](https://issues.apache.org/jira/browse/YARN-8145)                                                                                                                                                                                                                   | yarn rmadmin -getGroups 不會傳回使用者的已更新群組                                                         |
| BUG-100058             | [PHOENIX-2645](https://issues.apache.org/jira/browse/PHOENIX-2645)                                                                                                                                                                                                             | 萬用字元不符合新行字元                                                                    |
| BUG-100266             | [PHOENIX-3521](https://issues.apache.org/jira/browse/PHOENIX-3521), [PHOENIX-4190](https://issues.apache.org/jira/browse/PHOENIX-4190)                                                                                                                                         | 本機索引的結果錯誤                                                                                       |
| BUG-88774              | [HIVE-17617](https://issues.apache.org/jira/browse/HIVE-17617), [HIVE-18413](https://issues.apache.org/jira/browse/HIVE-18413), [HIVE-18523](https://issues.apache.org/jira/browse/HIVE-18523)                                                                                 | query36 失敗，資料列計數不符                                                                                    |
| BUG-89765              | [HIVE-17702](https://issues.apache.org/jira/browse/HIVE-17702)                                                                                                                                                                                                                 | ORC 中的十進位讀取器有不正確的 isRepeating 處理                                                                |
| BUG-92293              | [HADOOP-15042](https://issues.apache.org/jira/browse/HADOOP-15042)                                                                                                                                                                                                             | Azure PageBlobInputStream.skip() 可在 numberOfPagesRemaining 為 0 時傳回負值                            |
| BUG-92345              | [ATLAS-2285](https://issues.apache.org/jira/browse/ATLAS-2285)                                                                                                                                                                                                                 | UI：已使用日期屬性重新命名已儲存的搜尋。                                                                         |
| BUG-92563              | [HIVE-17495](https://issues.apache.org/jira/browse/HIVE-17495), [HIVE-18528](https://issues.apache.org/jira/browse/HIVE-18528)                                                                                                                                                 | 彙總 ObjectStore 中的統計資料會得到錯誤的結果                                                                        |
| BUG-92957              | [HIVE-11266](https://issues.apache.org/jira/browse/HIVE-11266)                                                                                                                                                                                                                 | count(\*) 會根據外部資料表的資料表統計資料，產生錯誤的結果                                                   |
| BUG-93097              | [RANGER-1944](https://issues.apache.org/jira/browse/RANGER-1944)                                                                                                                                                                                                               | 系統管理員稽核的動作篩選條件沒有作用                                                                           |
| BUG-93335              | [HIVE-12315](https://issues.apache.org/jira/browse/HIVE-12315)                                                                                                                                                                                                                 | vectorization\_short\_regress.q 的雙精度浮點數計算有錯誤結果的問題                                      |
| BUG-93415              | [HIVE-18258](https://issues.apache.org/jira/browse/HIVE-18258), [HIVE-18310](https://issues.apache.org/jira/browse/HIVE-18310)                                                                                                                                                 | 向量化：具有重複資料行的 Reduce-Side GROUP BY MERGEPARTIAL 會中斷                                      |
| BUG-93939              | [ATLAS-2294](https://issues.apache.org/jira/browse/ATLAS-2294)                                                                                                                                                                                                                 | 在建立類型時新增了額外的參數 "description"                                                               |
| BUG-94007              | [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751), [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112)                                                                                                                                         | Phoenix 查詢會傳回 Null 值，因為 HBase 部分資料列                                                          |
| BUG-94266              | [HIVE-12505](https://issues.apache.org/jira/browse/HIVE-12505)                                                                                                                                                                                                                 | 在相同加密區域以無訊息方式插入覆寫時，無法移除某些現有檔案                                   |
| BUG-94414              | [HIVE-15680](https://issues.apache.org/jira/browse/HIVE-15680)                                                                                                                                                                                                                 | 當 hive.optimize.index.filter=true 且查詢參考了相同的 ORC 資料表兩次時，會產生不正確的結果                 |
| BUG-95048              | [HIVE-18490](https://issues.apache.org/jira/browse/HIVE-18490)                                                                                                                                                                                                                 | 具有 EXISTS 和 NOT EXISTS 與不相等述詞的查詢會產生錯誤的結果                                      |
| BUG-95053              | [PHOENIX-3865](https://issues.apache.org/jira/browse/PHOENIX-3865)                                                                                                                                                                                                             | 未針對第一個資料行系列進行篩選時，IS NULL 不會傳回正確的結果                                  |
| BUG-95476              | [RANGER-1966](https://issues.apache.org/jira/browse/RANGER-1966)                                                                                                                                                                                                               | 原則引擎初始化不會在某些情況下建立內容擴充程式                                           |
| BUG-95566              | [SPARK-23281](https://issues.apache.org/jira/browse/SPARK-23281)                                                                                                                                                                                                               | 複合 order by 子句同時參考原始資料行和別名時，查詢會以不正確的順序產生結果 |
| BUG-95907              | [PHOENIX-3451](https://issues.apache.org/jira/browse/PHOENIX-3451), [PHOENIX-3452](https://issues.apache.org/jira/browse/PHOENIX-3452), [PHOENIX-3469](https://issues.apache.org/jira/browse/PHOENIX-3469), [PHOENIX-4560](https://issues.apache.org/jira/browse/PHOENIX-4560) | 修正查詢具有彙總時 ORDER BY ASC 的問題                                                             |
| BUG-96389              | [PHOENIX-4586](https://issues.apache.org/jira/browse/PHOENIX-4586)                                                                                                                                                                                                             | UPSERT SELECT 不會對子查詢考量比較運算子。                                             |
| BUG-96602              | [HIVE-18660](https://issues.apache.org/jira/browse/HIVE-18660)                                                                                                                                                                                                                 | PCR 無法區別資料分割和虛擬資料行                                                          |
| BUG-97686              | [ATLAS-2468](https://issues.apache.org/jira/browse/ATLAS-2468)                                                                                                                                                                                                                 | \[基本搜尋\] NEQ 與數值類型搭配使用時 OR 案例的問題                                               |
| BUG-97708              | [HIVE-18817](https://issues.apache.org/jira/browse/HIVE-18817)                                                                                                                                                                                                                 | 讀取 ACID 資料表期間，發生 ArrayIndexOutOfBounds 例外狀況。                                                             |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)                                                                                                                                                                                                                 | 「插入目錄中作為 orcfile」時，自動合併會失敗                                                               |
| BUG-97889              | [RANGER-2008](https://issues.apache.org/jira/browse/RANGER-2008)                                                                                                                                                                                                               | 多行原則條件的原則評估會失敗。                                                          |
| BUG-98655              | [RANGER-2066](https://issues.apache.org/jira/browse/RANGER-2066)                                                                                                                                                                                                               | HBase 資料行系列存取權是由資料行系列中的標記資料行所授權                                       |
| BUG-99883              | [HIVE-19073](https://issues.apache.org/jira/browse/HIVE-19073), [HIVE-19145](https://issues.apache.org/jira/browse/HIVE-19145)                                                                                                                                                 | StatsOptimizer 可能會弄亂常數資料行                                                                             |

**其他**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                        | **總結**                                                                                                                                |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100267             | [HBASE-17170](https://issues.apache.org/jira/browse/HBASE-17170)                                                                       | 因為類別載入器的差異，HBase 也會嘗試 DoNotRetryIOException。                                                          |
| BUG-92367              | [YARN-7558](https://issues.apache.org/jira/browse/YARN-7558)                                                                           | 如果啟用 UI 驗證，"yarn logs" 命令將無法取得執行中容器的記錄。                                              |
| BUG-93159              | [OOZIE-3139](https://issues.apache.org/jira/browse/OOZIE-3139)                                                                         | Oozie 不會正確地驗證工作流程                                                                                                       |
| BUG-93936              | [ATLAS-2289](https://issues.apache.org/jira/browse/ATLAS-2289)                                                                         | 內嵌的 kafka/zookeeper 伺服器會啟動/停止要移出 KafkaNotification 實作的程式碼                                        |
| BUG-93942              | [ATLAS-2312](https://issues.apache.org/jira/browse/ATLAS-2312)                                                                         | 使用 ThreadLocal DateFormat 物件以避免從多個執行緒同時使用                                                         |
| BUG-93946              | [ATLAS-2319](https://issues.apache.org/jira/browse/ATLAS-2319)                                                                         | UI：在單層式和樹狀結構中刪除標記清單內有 25 個以上位置的標記時，必須先重新整理才能從清單中移除該標記。 |
| BUG-94618              | [YARN-5037](https://issues.apache.org/jira/browse/YARN-5037), [YARN-7274](https://issues.apache.org/jira/browse/YARN-7274)             | 能夠在分葉佇列層級停用彈性                                                                                          |
| BUG-94901              | [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285)                                                                       | 新增每一資料表的延遲長條圖                                                                                                           |
| BUG-95259              | [HADOOP-15185](https://issues.apache.org/jira/browse/HADOOP-15185), [HADOOP-15186](https://issues.apache.org/jira/browse/HADOOP-15186) | 更新 adls 連接器以使用 ADLS SDK 的目前版本                                                                               |
| BUG-95619              | [HIVE-18551](https://issues.apache.org/jira/browse/HIVE-18551)                                                                         | 向量化：VectorMapOperator 嘗試為 Hybrid Grace 寫入太多向量資料行                                                   |
| BUG-97223              | [SPARK-23434](https://issues.apache.org/jira/browse/SPARK-23434)                                                                       | Spark 不應該對 HDFS 檔案路徑發出 \`metadata directory\` 警告                                                                          |

**效能**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **總結**                                                                                                                         |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| BUG-83282              | [HBASE-13376](https://issues.apache.org/jira/browse/HBASE-13376), [HBASE-14473](https://issues.apache.org/jira/browse/HBASE-14473), [HBASE-15210](https://issues.apache.org/jira/browse/HBASE-15210), [HBASE-15515](https://issues.apache.org/jira/browse/HBASE-15515), [HBASE-16570](https://issues.apache.org/jira/browse/HBASE-16570), [HBASE-16810](https://issues.apache.org/jira/browse/HBASE-16810), [HBASE-18164](https://issues.apache.org/jira/browse/HBASE-18164) | 在平衡器中快速計算位置                                                                                               |
| BUG-91300              | [HBASE-17387](https://issues.apache.org/jira/browse/HBASE-17387)                                                                                                                                                                                                                                                                                                                                                                                                             | 減少 RegionActionResult 中針對 multi() 的例外狀況報告額外負荷                                                           |
| BUG-91804              | [TEZ-1526](https://issues.apache.org/jira/browse/TEZ-1526)                                                                                                                                                                                                                                                                                                                                                                                                                   | 大型作業針對 TezTaskID 的 LoadingCache 很慢                                                                                      |
| BUG-92760              | [ACCUMULO-4578](https://issues.apache.org/jira/browse/ACCUMULO-4578)                                                                                                                                                                                                                                                                                                                                                                                                         | 取消壓縮 FATE 作業不會釋放命名空間鎖定                                                                    |
| BUG-93577              | [RANGER-1938](https://issues.apache.org/jira/browse/RANGER-1938)                                                                                                                                                                                                                                                                                                                                                                                                             | 稽核設定的 Solr 不會有效地使用 DocValues                                                                              |
| BUG-93910              | [HIVE-18293](https://issues.apache.org/jira/browse/HIVE-18293)                                                                                                                                                                                                                                                                                                                                                                                                               | 若資料夾不是由執行 HiveMetaStore 的身分識別所擁有的，Hive 就無法壓縮該資料夾內所包含的資料表                     |
| BUG-94345              | [HIVE-18429](https://issues.apache.org/jira/browse/HIVE-18429)                                                                                                                                                                                                                                                                                                                                                                                                               | 壓縮應該處理未產生任何輸出時的案例                                                                          |
| BUG-94381              | [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227), [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054)                                                                                                                                                                                                                                                                                                                                           | 處理 RequestHedgingProxyProvider RetryAction 順序：FAIL &lt; RETRY &lt; FAILOVER\_AND\_RETRY。                                  |
| BUG-94432              | [HIVE-18353](https://issues.apache.org/jira/browse/HIVE-18353)                                                                                                                                                                                                                                                                                                                                                                                                               | CompactorMR 應該呼叫 jobclient.close() 以觸發清除                                                                        |
| BUG-94869              | [PHOENIX-4290](https://issues.apache.org/jira/browse/PHOENIX-4290), [PHOENIX-4373](https://issues.apache.org/jira/browse/PHOENIX-4373)                                                                                                                                                                                                                                                                                                                                       | 所要求的資料列不在本機索引 salt 處理的 phoenix 資料表 Get on HRegion 範圍內。                                               |
| BUG-94928              | [HDFS-11078](https://issues.apache.org/jira/browse/HDFS-11078)                                                                                                                                                                                                                                                                                                                                                                                                               | 修正 LazyPersistFileScrubber 中的 NPE                                                                                                  |
| BUG-94964              | [HIVE-18269](https://issues.apache.org/jira/browse/HIVE-18269), [HIVE-18318](https://issues.apache.org/jira/browse/HIVE-18318), [HIVE-18326](https://issues.apache.org/jira/browse/HIVE-18326)                                                                                                                                                                                                                                                                               | 多個 LLAP 修正                                                                                                                 |
| BUG-95669              | [HIVE-18577](https://issues.apache.org/jira/browse/HIVE-18577), [HIVE-18643](https://issues.apache.org/jira/browse/HIVE-18643)                                                                                                                                                                                                                                                                                                                                               | 在 ACID 資料分割資料表上執行更新/刪除查詢時，HS2 會將每個資料分割全都讀取一遍。                                               |
| BUG-96390              | [HDFS-10453](https://issues.apache.org/jira/browse/HDFS-10453)                                                                                                                                                                                                                                                                                                                                                                                                               | 因為大型叢集內相同檔案的複寫與刪除之間發生競爭，ReplicationMonitor 執行緒可能會停滯很長的時間。 |
| BUG-96625              | [HIVE-16110](https://issues.apache.org/jira/browse/HIVE-16110)                                                                                                                                                                                                                                                                                                                                                                                                               | "Vectorization: Support 2 Value CASE WHEN instead of fall back to VectorUDFAdaptor" 的還原                                       |
| BUG-97109              | [HIVE-16757](https://issues.apache.org/jira/browse/HIVE-16757)                                                                                                                                                                                                                                                                                                                                                                                                               | 使用已淘汰的 getRows() 而不是新的 estimateRowCount(RelMetadataQuery...) 會有嚴重的效能影響                      |
| BUG-97110              | [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789)                                                                                                                                                                                                                                                                                                                                                                                                           | 在 postBatchMutateIndispensably 中執行跨區域索引維護呼叫                                                        |
| BUG-98833              | [YARN-6797](https://issues.apache.org/jira/browse/YARN-6797)                                                                                                                                                                                                                                                                                                                                                                                                                 | TimelineWriter 不會完全取用 POST 回應                                                                             |
| BUG-98931              | [ATLAS-2491](https://issues.apache.org/jira/browse/ATLAS-2491)                                                                                                                                                                                                                                                                                                                                                                                                               | 更新 Hive 掛勾以使用 Atlas v2 通知                                                                                      |

**可能遺失資料**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                  | **總結**                                                       |
|------------------------|------------------------------------------------------------------|-------------------------------------------------------------------|
| BUG-95613              | [HBASE-18808](https://issues.apache.org/jira/browse/HBASE-18808) | BackupLogCleaner\#getDeletableFiles() 中的設定檢查無效 |
| BUG-97051              | [HIVE-17403](https://issues.apache.org/jira/browse/HIVE-17403)   | 非受控和交易式資料表的串連失敗         |
| BUG-97787              | [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)   | Compactor 不會將資料表屬性傳遞至 Orc 寫入器         |
| BUG-97788              | [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)   | 擴充 JsonSerDe 以支援 BINARY 類型                           |

**查詢失敗**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                        | **總結**                                                                                            |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| BUG-100180             | [CALCITE-2232](https://issues.apache.org/jira/browse/CALCITE-2232)                                                                     | 調整彙總索引時 AggregatePullUpConstantsRule 上發生判斷提示錯誤                      |
| BUG-100422             | [HIVE-19085](https://issues.apache.org/jira/browse/HIVE-19085)                                                                         | FastHiveDecimal abs(0) 將正負號設定為 +ve                                                                |
| BUG-100834             | [PHOENIX-4658](https://issues.apache.org/jira/browse/PHOENIX-4658)                                                                     | IllegalStateException：無法在 ReversedKeyValueHeap 上呼叫 requestSeek                            |
| BUG-102078             | [HIVE-17978](https://issues.apache.org/jira/browse/HIVE-17978)                                                                         | TPCDS 查詢 58 和 83 會在向量化產生例外狀況。                                          |
| BUG-92483              | [HIVE-17900](https://issues.apache.org/jira/browse/HIVE-17900)                                                                         | 在由 Compactor 觸發的資料行上分析統計資料，會產生資料分割資料行 &gt; 1 個的錯誤格式 SQL   |
| BUG-93135              | [HIVE-15874](https://issues.apache.org/jira/browse/HIVE-15874), [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)         | 將 hive.groupby.orderby.position.alias 設為 true 時，Hive 查詢會傳回錯誤結果                |
| BUG-93136              | [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                         | cbo 停用時，無法依位置排序                                                   |
| BUG-93595              | [HIVE-12378](https://issues.apache.org/jira/browse/HIVE-12378), [HIVE-15883](https://issues.apache.org/jira/browse/HIVE-15883)         | Hive 插入中的 HBase 對應資料表在使用小數點和二進位資料行時會失敗                                  |
| BUG-94007              | [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751), [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112) | Phoenix 查詢會傳回 Null 值，因為 HBase 部分資料列                                          |
| BUG-94144              | [HIVE-17063](https://issues.apache.org/jira/browse/HIVE-17063)                                                                         | 先卸載分割區，將覆寫分割區插入外部資料表會失敗                        |
| BUG-94280              | [HIVE-12785](https://issues.apache.org/jira/browse/HIVE-12785)                                                                         | 檢視具有等位型別，且用於 \`cast\` 結構的 UDF 會中斷                                          |
| BUG-94505              | [PHOENIX-4525](https://issues.apache.org/jira/browse/PHOENIX-4525)                                                                     | GroupBy 執行中發生整數溢位                                                                  |
| BUG-95618              | [HIVE-18506](https://issues.apache.org/jira/browse/HIVE-18506)                                                                         | LlapBaseInputFormat - 負數的陣列索引                                                             |
| BUG-95644              | [HIVE-9152](https://issues.apache.org/jira/browse/HIVE-9152)                                                                           | CombineHiveInputFormat：Hive 查詢在 Tez 中會失敗，並發生 java.lang.IllegalArgumentException 例外狀況 |
| BUG-96762              | [PHOENIX-4588](https://issues.apache.org/jira/browse/PHOENIX-4588)                                                                     | 如果其子系有 Determinism.PER\_INVOCATION，則也複製運算式                                |
| BUG-97145              | [HIVE-12245](https://issues.apache.org/jira/browse/HIVE-12245), [HIVE-17829](https://issues.apache.org/jira/browse/HIVE-17829)         | HBase 支援的資料表可支援資料行註解                                                      |
| BUG-97741              | [HIVE-18944](https://issues.apache.org/jira/browse/HIVE-18944)                                                                         | 在 DPP 期間未正確設定群組集合位置                                                  |
| BUG-98082              | [HIVE-18597](https://issues.apache.org/jira/browse/HIVE-18597)                                                                         | LLAP︰一律針對 org.apache.log4j 封裝 log4j2 API jar                                           |
| BUG-99849              | N/A                                                                                                                                    | 從嘗試使用預設資料庫的檔案精靈建立新資料表                                    |

**安全性**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                                                                                            | **總結**                                                                                                           |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| BUG-100436             | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060)                                                                                                                                           | Knox proxy 與 knox sso 搭配不適用於 ranger                                                                    |
| BUG-101038             | [SPARK-24062](https://issues.apache.org/jira/browse/SPARK-24062)                                                                                                                                           | Zeppelin %Spark 解譯器在 HiveThriftServer 中的 "Connection refused" 錯誤、"A secret key must be specified..." 錯誤 |
| BUG-101359             | [ACCUMULO-4056](https://issues.apache.org/jira/browse/ACCUMULO-4056)                                                                                                                                       | 發行時將 commons-collection 的版本更新為 3.2.2                                                           |
| BUG-54240              | [HIVE-18879](https://issues.apache.org/jira/browse/HIVE-18879)                                                                                                                                             | 如果 xercesImpl.jar 位於 classpath 中，則必須能夠在 UDFXPathUtil 中不允許內嵌的元素                                |
| BUG-79059              | [OOZIE-3109](https://issues.apache.org/jira/browse/OOZIE-3109)                                                                                                                                             | 逸出 log-streaming 的 HTML 特定字元                                                                       |
| BUG-90041              | [OOZIE-2723](https://issues.apache.org/jira/browse/OOZIE-2723)                                                                                                                                             | JSON.org 授權現在為 CatX                                                                                          |
| BUG-93754              | [RANGER-1943](https://issues.apache.org/jira/browse/RANGER-1943)                                                                                                                                           | 當集合是空的或 null 時，會略過 Ranger Solr 授權                                                 |
| BUG-93804              | [HIVE-17419](https://issues.apache.org/jira/browse/HIVE-17419)                                                                                                                                             | ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS 命令會顯示已遮罩資料表的計算統計資料                         |
| BUG-94276              | [ZEPPELIN-3129](https://issues.apache.org/jira/browse/ZEPPELIN-3129)                                                                                                                                       | Zeppelin UI 不會在 IE 中登出                                                                                    |
| BUG-95349              | [ZOOKEEPER-1256](https://issues.apache.org/jira/browse/ZOOKEEPER-1256), [ZOOKEEPER-1901](https://issues.apache.org/jira/browse/ZOOKEEPER-1901)                                                             | 升級 netty                                                                                                         |
| BUG-95483              | N/A                                                                                                                                                                                                        | CVE-2017-15713 的修正                                                                                                |
| BUG-95646              | [OOZIE-3167](https://issues.apache.org/jira/browse/OOZIE-3167)                                                                                                                                             | 在 Oozie 4.3 分支上升級 tomcat 版本                                                                            |
| BUG-95823              | N/A                                                                                                                                                                                                        | Knox：升級 Beanutils                                                                                               |
| BUG-95908              | [RANGER-1960](https://issues.apache.org/jira/browse/RANGER-1960)                                                                                                                                           | HBase 驗證不會為了刪除快照集而將資料表命名空間納入考量                                     |
| BUG-96191              | [FALCON-2322](https://issues.apache.org/jira/browse/FALCON-2322), [FALCON-2323](https://issues.apache.org/jira/browse/FALCON-2323)                                                                         | 升級 Jackson 與 Spring 版本以避免安全性弱點                                                 |
| BUG-96502              | [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990)                                                                                                                                           | 在 Ranger 系統管理員中新增單向 SSL MySQL 支援                                                                         |
| BUG-96712              | [FLUME-3194](https://issues.apache.org/jira/browse/FLUME-3194)                                                                                                                                             | 將 derby 升級至最新 (1.14.1.0) 版本                                                                        |
| BUG-96713              | [FLUME-2678](https://issues.apache.org/jira/browse/FLUME-2678)                                                                                                                                             | 將 xalan 升級至 2.7.2 以處理 CVE-2014-0107 弱點                                                    |
| BUG-96714              | [FLUME-2050](https://issues.apache.org/jira/browse/FLUME-2050)                                                                                                                                             | 升級至 log4j2 (在 GA 時)                                                                                           |
| BUG-96737              | N/A                                                                                                                                                                                                        | 使用 java io filesystem 方法來存取本機檔案                                                                  |
| BUG-96925              | N/A                                                                                                                                                                                                        | 在 Hadoop 中將 Tomcat 從 6.0.48 升級至 6.0.53                                                                        |
| BUG-96977              | [FLUME-3132](https://issues.apache.org/jira/browse/FLUME-3132)                                                                                                                                             | 升級 tomcat jasper 程式庫相依性                                                                            |
| BUG-97022              | [HADOOP-14799](https://issues.apache.org/jira/browse/HADOOP-14799), [HADOOP-14903](https://issues.apache.org/jira/browse/HADOOP-14903), [HADOOP-15265](https://issues.apache.org/jira/browse/HADOOP-15265) | 使用 4.39 以上版本升級 Nimbus-JOSE-JWT 程式庫                                                             |
| BUG-97101              | [RANGER-1988](https://issues.apache.org/jira/browse/RANGER-1988)                                                                                                                                           | 修正不安全的隨機性                                                                                               |
| BUG-97178              | [ATLAS-2467](https://issues.apache.org/jira/browse/ATLAS-2467)                                                                                                                                             | Spring 和 nimbus-jose-jwt 的相依性升級                                                                     |
| BUG-97180              | N/A                                                                                                                                                                                                        | 升級 Nimbus-jose-jwt                                                                                               |
| BUG-98038              | [HIVE-18788](https://issues.apache.org/jira/browse/HIVE-18788)                                                                                                                                             | 清除 JDBC PreparedStatement 中的輸入                                                                             |
| BUG-98353              | [HADOOP-13707](https://issues.apache.org/jira/browse/HADOOP-13707)                                                                                                                                         | "If kerberos is enabled while HTTP SPNEGO is not configured, some links cannot be accessed" 的還原                 |
| BUG-98372              | [HBASE-13848](https://issues.apache.org/jira/browse/HBASE-13848)                                                                                                                                           | 透過認證提供者 API 存取 InfoServer SSL 密碼                                                        |
| BUG-98385              | [ATLAS-2500](https://issues.apache.org/jira/browse/ATLAS-2500)                                                                                                                                             | 在 Atlas 回應中新增其他標頭。                                                                             |
| BUG-98564              | [HADOOP-14651](https://issues.apache.org/jira/browse/HADOOP-14651)                                                                                                                                         | 將 okhttp 版本更新為 2.7.5                                                                                        |
| BUG-99440              | [RANGER-2045](https://issues.apache.org/jira/browse/RANGER-2045)                                                                                                                                           | 沒有明確允許原則的 Hive 資料表資料行可使用 'desc table' 命令來列出                                 |
| BUG-99803              | N/A                                                                                                                                                                                                        | Oozie 應該停用 HBase 動態類別載入                                                                      |

**穩定性**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | **總結**                                                                                                                                    |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100040             | [ATLAS-2536](https://issues.apache.org/jira/browse/ATLAS-2536)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Atlas Hive 掛勾中的 NPE                                                                                                                         |
| BUG-100057             | [HIVE-19251](https://issues.apache.org/jira/browse/HIVE-19251)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 具有 LIMIT 的 ObjectStore.getNextNotification 應使用較少記憶體                                                                              |
| BUG-100072             | [HIVE-19130](https://issues.apache.org/jira/browse/HIVE-19130)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | REPL LOAD 套用了卸除資料分割事件時，會擲回 NPE。                                                                                     |
| BUG-100073             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 太多從 hiveserver 到資料節點的 close\_wait 連線                                                                                   |
| BUG-100319             | [HIVE-19248](https://issues.apache.org/jira/browse/HIVE-19248)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 如果檔案複製失敗，REPL LOAD 不會擲回錯誤。                                                                                              |
| BUG-100352             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | CLONE - RM 清除邏輯掃描 /registry znode 太頻繁                                                                                  |
| BUG-100427             | [HIVE-19249](https://issues.apache.org/jira/browse/HIVE-19249)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 複寫：WITH 子句不會在所有情況下將組態正確地傳遞至工作                                                       |
| BUG-100430             | [HIVE-14483](https://issues.apache.org/jira/browse/HIVE-14483)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | java.lang.ArrayIndexOutOfBoundsException org.apache.orc.impl.TreeReaderFactory\$BytesColumnVectorUtil.commonReadByteArrays                     |
| BUG-100432             | [HIVE-19219](https://issues.apache.org/jira/browse/HIVE-19219)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 如果清除所要求的事件，累加 REPL DUMP 應該擲回錯誤。                                                                   |
| BUG-100448             | [SPARK-23637](https://issues.apache.org/jira/browse/SPARK-23637), [SPARK-23802](https://issues.apache.org/jira/browse/SPARK-23802), [SPARK-23809](https://issues.apache.org/jira/browse/SPARK-23809), [SPARK-23816](https://issues.apache.org/jira/browse/SPARK-23816), [SPARK-23822](https://issues.apache.org/jira/browse/SPARK-23822), [SPARK-23823](https://issues.apache.org/jira/browse/SPARK-23823), [SPARK-23838](https://issues.apache.org/jira/browse/SPARK-23838), [SPARK-23881](https://issues.apache.org/jira/browse/SPARK-23881)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 將 Spark2 更新為 2.3.0+ (4/11)                                                                                                                 |
| BUG-100740             | [HIVE-16107](https://issues.apache.org/jira/browse/HIVE-16107)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | JDBC：HttpClient 應該在 NoHttpResponseException 上再試一次                                                                         |
| BUG-100810             | [HIVE-19054](https://issues.apache.org/jira/browse/HIVE-19054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hive 函式複寫失敗                                                                                                               |
| BUG-100937             | [MAPREDUCE-6889](https://issues.apache.org/jira/browse/MAPREDUCE-6889)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 新增 Job\#close API 以關閉 MR 用戶端服務。                                                                                             |
| BUG-101065             | [ATLAS-2587](https://issues.apache.org/jira/browse/ATLAS-2587)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 在 HA 中設定 /apache\_atlas/active\_server\_info znode 的讀取 ACL 以讓 Knox proxy 讀取。                                                       |
| BUG-101093             | [STORM-2993](https://issues.apache.org/jira/browse/STORM-2993)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Storm HDFS bolt 在使用時間輪替原則時擲回 ClosedChannelException                                                                |
| BUG-101181             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | PhoenixStorageHandler 不會在述詞中正確處理 AND                                                                                |
| BUG-101266             | [PHOENIX-4635](https://issues.apache.org/jira/browse/PHOENIX-4635)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | org.apache.phoenix.hive.mapreduce.PhoenixInputFormat 中發生 HBase 連線流失                                                                  |
| BUG-101458             | [HIVE-11464](https://issues.apache.org/jira/browse/HIVE-11464)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 如果有多個輸出，則會遺漏歷程資訊                                                                                             |
| BUG-101485             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | hive 中繼存放區 thrift api 緩慢，且會造成用戶端逾時                                                                                   |
| BUG-101628             | [HIVE-19331](https://issues.apache.org/jira/browse/HIVE-19331)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hive 增量複寫到雲端失敗。                                                                                                  |
| BUG-102048             | [HIVE-19381](https://issues.apache.org/jira/browse/HIVE-19381)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | FunctionTask 的 Hive 函式複寫到雲端失敗                                                                                     |
| BUG-102064             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ReplCopyTask 中的 Hive 複寫 \[內部部署至內部部署\] 測試失敗                                                                           |
| BUG-102137             | [HIVE-19423](https://issues.apache.org/jira/browse/HIVE-19423)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ReplCopyTask 中的 Hive 複寫 \[內部部署至雲端\] 測試失敗                                                                            |
| BUG-102305             | [HIVE-19430](https://issues.apache.org/jira/browse/HIVE-19430)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | HS2 和 hive 中繼存放區 OOM 傾印                                                                                                               |
| BUG-102361             | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 在複寫到目標 hive 叢集 (內部部署 - s3) 的單一插入中有多個插入結果                                                     |
| BUG-87624              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 啟用 storm 事件記錄會導致背景工作角色持續停止                                                                                |
| BUG-88929              | [HBASE-15615](https://issues.apache.org/jira/browse/HBASE-15615)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 當 RegionServerCallable 需要重試時，睡眠時間會錯誤                                                                                          |
| BUG-89628              | [HIVE-17613](https://issues.apache.org/jira/browse/HIVE-17613)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 針對簡短的同一執行緒配置移除物件集區                                                                                         |
| BUG-89813              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | SCA：程式碼正確性：未同步處理的方法會覆寫已同步處理的方法                                                                  |
| BUG-90437              | [ZEPPELIN-3072](https://issues.apache.org/jira/browse/ZEPPELIN-3072)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 如果 notebook 太多，Zeppelin UI 會變得緩慢/沒有回應                                                                          |
| BUG-90640              | [HBASE-19065](https://issues.apache.org/jira/browse/HBASE-19065)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | HRegion\#bulkLoadHFiles() 應該等候並行 Region\#flush() 完成                                                                 |
| BUG-91202              | [HIVE-17013](https://issues.apache.org/jira/browse/HIVE-17013)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 根據對檢視的選取來刪除具有子查詢的要求                                                                                     |
| BUG-91350              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NiFiHaDispatch 未容錯移轉                                                                                                                |
| BUG-92054              | [HIVE-13120](https://issues.apache.org/jira/browse/HIVE-13120)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 產生 ORC 分割時傳播 doAs                                                                                                      |
| BUG-92373              | [FALCON-2314](https://issues.apache.org/jira/browse/FALCON-2314)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 將 TestNG 版本直接改成 6.13.1 以避免 BeanShell 相依性                                                                                    |
| BUG-92381              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | testContainerLogsWithNewAPI 和 testContainerLogsWithOldAPI UT 失敗                                                                           |
| BUG-92389              | [STORM-2841](https://issues.apache.org/jira/browse/STORM-2841)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | testNoAcksIfFlushFails UT 失敗，並發生 NullPointerException                                                                                      |
| BUG-92586              | [SPARK-17920](https://issues.apache.org/jira/browse/SPARK-17920), [SPARK-20694](https://issues.apache.org/jira/browse/SPARK-20694), [SPARK-21642](https://issues.apache.org/jira/browse/SPARK-21642), [SPARK-22162](https://issues.apache.org/jira/browse/SPARK-22162), [SPARK-22289](https://issues.apache.org/jira/browse/SPARK-22289), [SPARK-22373](https://issues.apache.org/jira/browse/SPARK-22373), [SPARK-22495](https://issues.apache.org/jira/browse/SPARK-22495), [SPARK-22574](https://issues.apache.org/jira/browse/SPARK-22574), [SPARK-22591](https://issues.apache.org/jira/browse/SPARK-22591), [SPARK-22595](https://issues.apache.org/jira/browse/SPARK-22595), [SPARK-22601](https://issues.apache.org/jira/browse/SPARK-22601), [SPARK-22603](https://issues.apache.org/jira/browse/SPARK-22603), [SPARK-22607](https://issues.apache.org/jira/browse/SPARK-22607), [SPARK-22635](https://issues.apache.org/jira/browse/SPARK-22635), [SPARK-22637](https://issues.apache.org/jira/browse/SPARK-22637), [SPARK-22653](https://issues.apache.org/jira/browse/SPARK-22653), [SPARK-22654](https://issues.apache.org/jira/browse/SPARK-22654), [SPARK-22686](https://issues.apache.org/jira/browse/SPARK-22686), [SPARK-22688](https://issues.apache.org/jira/browse/SPARK-22688), [SPARK-22817](https://issues.apache.org/jira/browse/SPARK-22817), [SPARK-22862](https://issues.apache.org/jira/browse/SPARK-22862), [SPARK-22889](https://issues.apache.org/jira/browse/SPARK-22889), [SPARK-22972](https://issues.apache.org/jira/browse/SPARK-22972), [SPARK-22975](https://issues.apache.org/jira/browse/SPARK-22975), [SPARK-22982](https://issues.apache.org/jira/browse/SPARK-22982), [SPARK-22983](https://issues.apache.org/jira/browse/SPARK-22983), [SPARK-22984](https://issues.apache.org/jira/browse/SPARK-22984), [SPARK-23001](https://issues.apache.org/jira/browse/SPARK-23001), [SPARK-23038](https://issues.apache.org/jira/browse/SPARK-23038), [SPARK-23095](https://issues.apache.org/jira/browse/SPARK-23095) | 將 Spark2 最新版本更新為 2.2.1 (1 月 16 日)                                                                                                    |
| BUG-92680              | [ATLAS-2288](https://issues.apache.org/jira/browse/ATLAS-2288)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 透過 Hive 建立 hbase 資料表時，會在執行 import-hive 指令碼時發生 NoClassDefFoundError 例外狀況                                           |
| BUG-92760              | [ACCUMULO-4578](https://issues.apache.org/jira/browse/ACCUMULO-4578)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 取消壓縮 FATE 作業不會釋放命名空間鎖定                                                                               |
| BUG-92797              | [HDFS-10267](https://issues.apache.org/jira/browse/HDFS-10267), [HDFS-8496](https://issues.apache.org/jira/browse/HDFS-8496)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 減少某些使用案例的 datanode 鎖定爭用                                                                                    |
| BUG-92813              | [FLUME-2973](https://issues.apache.org/jira/browse/FLUME-2973)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hdfs 接收中發生死結                                                                                                                          |
| BUG-92957              | [HIVE-11266](https://issues.apache.org/jira/browse/HIVE-11266)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | count(\*) 會根據外部資料表的資料表統計資料，產生錯誤的結果                                                                           |
| BUG-93018              | [ATLAS-2310](https://issues.apache.org/jira/browse/ATLAS-2310)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 在 HA 中，被動節點會使用錯誤的 URL 編碼將要求重新導向                                                                          |
| BUG-93116              | [RANGER-1957](https://issues.apache.org/jira/browse/RANGER-1957)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 啟用增量同步處理時，Ranger Usersync 不會定期同步處理使用者或群組。                                                  |
| BUG-93361              | [HIVE-12360](https://issues.apache.org/jira/browse/HIVE-12360)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 在具有述詞下推的未壓縮 ORC 中會進行錯誤的搜尋                                                                                           |
| BUG-93426              | [CALCITE-2086](https://issues.apache.org/jira/browse/CALCITE-2086)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 由於大型的授權標頭，某些情況下會出現 HTTP/413                                                                           |
| BUG-93429              | [PHOENIX-3240](https://issues.apache.org/jira/browse/PHOENIX-3240)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Pig 載入器發生 ClassCastException                                                                                                             |
| BUG-93485              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 無法取得資料表 mytestorg.apache.hadoop.hive.ql.metadata.InvalidTableException：在 LLAP 中的資料行上執行分析資料表時找不到資料表 |
| BUG-93512              | [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | java.lang.RuntimeException：回應碼 500 - 執行 spark 作業以連線到 phoenix 查詢伺服器和載入資料                         |
| BUG-93550              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Zeppelin %spark.r 不適用於 spark1，因為 scala 版本不相符                                                                      |
| BUG-93910              | [HIVE-18293](https://issues.apache.org/jira/browse/HIVE-18293)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 若資料夾不是由執行 HiveMetaStore 的身分識別所擁有的，Hive 就無法壓縮該資料夾內所包含的資料表                                |
| BUG-93926              | [ZEPPELIN-3114](https://issues.apache.org/jira/browse/ZEPPELIN-3114)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 在一 &gt; 維的壓力測試之後，筆記本和解譯器不會儲存在 zeppelin 中                                                       |
| BUG-93932              | [ATLAS-2320](https://issues.apache.org/jira/browse/ATLAS-2320)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 查詢的分類 "\*" 會擲回 500 內部伺服器例外狀況。                                                                           |
| BUG-93948              | [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NM 在使用 OOM 時會當機，因為 log-aggregation (part\#1) 中發生流失                                                                                 |
| BUG-93965              | [ATLAS-2229](https://issues.apache.org/jira/browse/ATLAS-2229)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | DSL 搜尋：orderby 非字串屬性會擲回例外狀況                                                                                     |
| BUG-93986              | [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NM 在使用 OOM 時會當機，因為 log-aggregation (part\#2) 中發生流失                                                                                 |
| BUG-94030              | [ATLAS-2332](https://issues.apache.org/jira/browse/ATLAS-2332)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 使用具有巢狀集合資料類型的屬性無法建立類型                                                                       |
| BUG-94080              | [YARN-3742](https://issues.apache.org/jira/browse/YARN-3742), [YARN-6061](https://issues.apache.org/jira/browse/YARN-6061)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 這兩個 RM 都在安全叢集中待命                                                                                                       |
| BUG-94081              | [HIVE-18384](https://issues.apache.org/jira/browse/HIVE-18384)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | log4j2.x 程式庫發生 ConcurrentModificationException                                                                                            |
| BUG-94168              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 服務登錄處於錯誤狀態 ERROR 時 Yarn RM 會當機                                                                                |
| BUG-94330              | [HADOOP-13190](https://issues.apache.org/jira/browse/HADOOP-13190), [HADOOP-14104](https://issues.apache.org/jira/browse/HADOOP-14104), [HADOOP-14814](https://issues.apache.org/jira/browse/HADOOP-14814), [HDFS-10489](https://issues.apache.org/jira/browse/HDFS-10489), [HDFS-11689](https://issues.apache.org/jira/browse/HDFS-11689)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | HDFS 應支援多個 KMS Uris                                                                                                      |
| BUG-94345              | [HIVE-18429](https://issues.apache.org/jira/browse/HIVE-18429)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 壓縮應該處理未產生任何輸出時的案例                                                                                     |
| BUG-94372              | [ATLAS-2229](https://issues.apache.org/jira/browse/ATLAS-2229)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | DSL 查詢：hive\_table name = \["t1","t2"\] 會擲回無效的 DSL 查詢例外狀況                                                                |
| BUG-94381              | [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227), [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 處理 RequestHedgingProxyProvider RetryAction 順序：FAIL &lt; RETRY &lt; FAILOVER\_AND\_RETRY。                                             |
| BUG-94432              | [HIVE-18353](https://issues.apache.org/jira/browse/HIVE-18353)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | CompactorMR 應該呼叫 jobclient.close() 以觸發清除                                                                                   |
| BUG-94575              | [SPARK-22587](https://issues.apache.org/jira/browse/SPARK-22587)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 如果 fs.defaultFS 和應用程式 jar 是不同的 url，Spark 作業會失敗                                                                          |
| BUG-94791              | [SPARK-22793](https://issues.apache.org/jira/browse/SPARK-22793)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Spark Thrift 伺服器中發生記憶體流失                                                                                                             |
| BUG-94928              | [HDFS-11078](https://issues.apache.org/jira/browse/HDFS-11078)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 修正 LazyPersistFileScrubber 中的 NPE                                                                                                             |
| BUG-95013              | [HIVE-18488](https://issues.apache.org/jira/browse/HIVE-18488)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | LLAP ORC 讀取器缺少某些 null 檢查                                                                                                  |
| BUG-95077              | [HIVE-14205](https://issues.apache.org/jira/browse/HIVE-14205)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hive 不支援等位型別與 AVRO 檔案格式的搭配                                                                                          |
| BUG-95200              | [HDFS-13061](https://issues.apache.org/jira/browse/HDFS-13061)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | SaslDataTransferClient\#checkTrustAndSend 不應該信任部分信任的通道                                                         |
| BUG-95201              | [HDFS-13060](https://issues.apache.org/jira/browse/HDFS-13060)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 針對 TrustedChannelResolver 新增 BlacklistBasedTrustedChannelResolver                                                                       |
| BUG-95284              | [HBASE-19395](https://issues.apache.org/jira/browse/HBASE-19395)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | \[branch-1\] TestEndToEndSplitTransaction.testMasterOpsWhileSplitting 會失敗，並有 NPE                                                           |
| BUG-95301              | [HIVE-18517](https://issues.apache.org/jira/browse/HIVE-18517)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 向量化：修正 VectorMapOperator 以接受 VRBs，並檢查向量化旗標是否正確以支援 LLAP 快取                                |
| BUG-95542              | [HBASE-16135](https://issues.apache.org/jira/browse/HBASE-16135)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 可能永遠不會刪除已移除同儕節點的 rs 下的 PeerClusterZnode                                                                                 |
| BUG-95595              | [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 忽略 SQLOperation.runQuery 中不合法的作業狀態轉換例外狀況，以公開實際的例外狀況。                                         |
| BUG-95596              | [YARN-4126](https://issues.apache.org/jira/browse/YARN-4126), [YARN-5750](https://issues.apache.org/jira/browse/YARN-5750)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | TestClientRMService 失敗                                                                                                                      |
| BUG-96019              | [HIVE-18548](https://issues.apache.org/jira/browse/HIVE-18548)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 修正 log4j 匯入                                                                                                                               |
| BUG-96196              | [HDFS-13120](https://issues.apache.org/jira/browse/HDFS-13120)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 快照集差異可能會在 concat 之後損毀                                                                                                  |
| BUG-96289              | [HDFS-11701](https://issues.apache.org/jira/browse/HDFS-11701)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 從未解析的主機進行 NPE 會導致永久的 DFSInputStream 失敗                                                                              |
| BUG-96291              | [STORM-2652](https://issues.apache.org/jira/browse/STORM-2652)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | JmsSpout open 方法擲回例外狀況                                                                                                       |
| BUG-96363              | [HIVE-18959](https://issues.apache.org/jira/browse/HIVE-18959)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 避免在 LLAP 內建立額外的執行緒集區                                                                                               |
| BUG-96390              | [HDFS-10453](https://issues.apache.org/jira/browse/HDFS-10453)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 因為大型叢集內相同檔案的複寫與刪除之間發生競爭，ReplicationMonitor 執行緒可能會停滯很長的時間。            |
| BUG-96454              | [YARN-4593](https://issues.apache.org/jira/browse/YARN-4593)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | AbstractService.getConfig() 中發生死結                                                                                                        |
| BUG-96704              | [FALCON-2322](https://issues.apache.org/jira/browse/FALCON-2322)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | submitAndSchedule 摘要時發生 ClassCastException                                                                                                |
| BUG-96720              | [SLIDER-1262](https://issues.apache.org/jira/browse/SLIDER-1262)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 在 Kerberized 環境中 Slider functests 會失敗                                                                                         |
| BUG-96931              | [SPARK-23053](https://issues.apache.org/jira/browse/SPARK-23053), [SPARK-23186](https://issues.apache.org/jira/browse/SPARK-23186), [SPARK-23230](https://issues.apache.org/jira/browse/SPARK-23230), [SPARK-23358](https://issues.apache.org/jira/browse/SPARK-23358), [SPARK-23376](https://issues.apache.org/jira/browse/SPARK-23376), [SPARK-23391](https://issues.apache.org/jira/browse/SPARK-23391)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 將 Spark2 更新為最新 (2 月 19 日)                                                                                                             |
| BUG-97067              | [HIVE-10697](https://issues.apache.org/jira/browse/HIVE-10697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ObjectInspectorConvertors\#UnionConvertor 會進行錯誤的轉換                                                                             |
| BUG-97244              | [KNOX-1083](https://issues.apache.org/jira/browse/KNOX-1083)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | HttpClient 預設逾時值應該是合理的值                                                                                          |
| BUG-97459              | [ZEPPELIN-3271](https://issues.apache.org/jira/browse/ZEPPELIN-3271)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 可供停用排程器的選項                                                                                                                 |
| BUG-97511              | [KNOX-1197](https://issues.apache.org/jira/browse/KNOX-1197)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 當驗證 = 服務中的匿名時，不會新增 AnonymousAuthFilter                                                                      |
| BUG-97601              | [HIVE-17479](https://issues.apache.org/jira/browse/HIVE-17479)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 更新/刪除查詢的暫存目錄不會清除                                                                            |
| BUG-97605              | [HIVE-18858](https://issues.apache.org/jira/browse/HIVE-18858)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 提交 MR 作業時，不會解析作業設定中的系統屬性                                                                     |
| BUG-97674              | [OOZIE-3186](https://issues.apache.org/jira/browse/OOZIE-3186)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Oozie 無法使用以 jceks://file/... 連結的設定                                                                             |
| BUG-97743              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 部署 storm 拓撲時發生 java.lang.NoClassDefFoundError 例外狀況                                                                        |
| BUG-97756              | [PHOENIX-4576](https://issues.apache.org/jira/browse/PHOENIX-4576)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 修正 LocalIndexSplitMergeIT 測試失敗 |
| BUG-97771              | [HDFS-11711](https://issues.apache.org/jira/browse/HDFS-11711)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | DN 不應刪除針對「開啟太多檔案」例外狀況的封鎖                                                                              |
| BUG-97869              | [KNOX-1190](https://issues.apache.org/jira/browse/KNOX-1190)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Google OIDC 的 Knox SSO 支援已中斷。                                                                                                    |
| BUG-97879              | [PHOENIX-4489](https://issues.apache.org/jira/browse/PHOENIX-4489)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Phoenix MR 作業中發生 HBase 連線流失                                                                                                       |
| BUG-98392              | [RANGER-2007](https://issues.apache.org/jira/browse/RANGER-2007)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ranger-tagsync 的 Kerberos 票證無法更新                                                                                                |
| BUG-98484              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Hive 增量複寫到雲端無法運作                                                                                              |
| BUG-98533              | [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934), [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | HBase 快照集還原因 Null 指標例外狀況而失敗                                                                                |
| BUG-98555              | [PHOENIX-4662](https://issues.apache.org/jira/browse/PHOENIX-4662)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 在重新傳送快取時，TableResultIterator.java 中會發生 NullPointerException                                                                               |
| BUG-98579              | [HBASE-13716](https://issues.apache.org/jira/browse/HBASE-13716)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 停止使用 Hadoop 的 FSConstants                                                                                                                |
| BUG-98705              | [KNOX-1230](https://issues.apache.org/jira/browse/KNOX-1230)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 若對 Knox 發出許多並行要求，將會導致 URL 弄亂                                                                                           |
| BUG-98983              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NiFiHaDispatch 未容錯移轉                                                                                                                |
| BUG-99107              | [HIVE-19054](https://issues.apache.org/jira/browse/HIVE-19054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 函式複寫應該使用 "hive.repl.replica.functions.root.dir" 作為根                                                                  |
| BUG-99145              | [RANGER-2035](https://issues.apache.org/jira/browse/RANGER-2035)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 存取具有空白 implClass 和 Oracle 後端的 servicedefs 時發生錯誤                                                                          |
| BUG-99160              | [SLIDER-1259](https://issues.apache.org/jira/browse/SLIDER-1259)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 滑杆無法在多主控環境中運作                                                                                               |
| BUG-99239              | [ATLAS-2462](https://issues.apache.org/jira/browse/ATLAS-2462)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 若命令中未提供任何資料表，則所有資料表的 Sqoop 匯入會擲回 NPE                                                                        |
| BUG-99301              | [ATLAS-2530](https://issues.apache.org/jira/browse/ATLAS-2530)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | hive\_process 和 hive\_column\_lineage 的名稱屬性開頭有新行字元                                                    |
| BUG-99453              | [HIVE-19065](https://issues.apache.org/jira/browse/HIVE-19065)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 中繼存放區用戶端相容性檢查應該包含 syncMetaStoreClient                                                                        |
| BUG-99521              | N/A                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 將迭代器重新具現化時，不會重新建立 HashJoin 的 ServerCache                                                                  |
| BUG-99590              | [PHOENIX-3518](https://issues.apache.org/jira/browse/PHOENIX-3518)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | RenewLeaseTask 中發生記憶體流失                                                                                                                  |
| BUG-99618              | [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599), [SPARK-23806](https://issues.apache.org/jira/browse/SPARK-23806)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 將 Spark2 更新為 2.3.0+ (3/28)                                                                                                                 |
| BUG-99672              | [ATLAS-2524](https://issues.apache.org/jira/browse/ATLAS-2524)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 具有 V2 通知的 Hive 掛勾 - 以不正確的方式處理 'alter view as' 作業                                                              |
| BUG-99809              | [HBASE-20375](https://issues.apache.org/jira/browse/HBASE-20375)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 在 hbase-spark 模組中移除 getCurrentUserCredentials 的使用                                                                                  |

**支援能力**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                  | **總結**                                                                                   |
|------------------------|------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| BUG-87343              | [HIVE-18031](https://issues.apache.org/jira/browse/HIVE-18031)   | 針對 Alter Database 作業支援複寫。                                             |
| BUG-91293              | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060) | Knox proxy 與 knox sso 搭配不適用於 ranger                                            |
| BUG-93116              | [RANGER-1957](https://issues.apache.org/jira/browse/RANGER-1957) | 啟用增量同步處理時，Ranger Usersync 不會定期同步處理使用者或群組。 |
| BUG-93577              | [RANGER-1938](https://issues.apache.org/jira/browse/RANGER-1938) | 稽核設定的 Solr 不會有效地使用 DocValues                                        |
| BUG-96082              | [RANGER-1982](https://issues.apache.org/jira/browse/RANGER-1982) | Ranger 系統管理員和 Ranger Kms 的分析計量錯誤改進                         |
| BUG-96479              | [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781)   | Datanode 關閉之後，[在 Namenode UI Datanode] 索引標籤會擲回警告訊息。                 |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)   | 「插入目錄中作為 orcfile」時，自動合併會失敗                                      |
| BUG-98814              | [HDFS-13314](https://issues.apache.org/jira/browse/HDFS-13314)   | NameNode 應該在偵測到 FsImage 損毀時選擇性結束                              |

**升級**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                | **總結**                                                                 |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| BUG-100134             | [SPARK-22919](https://issues.apache.org/jira/browse/SPARK-22919)                                                               | "Bump Apache httpclient versions" 的還原                                 |
| BUG-95823              | N/A                                                                                                                            | Knox：升級 Beanutils                                                     |
| BUG-96751              | [KNOX-1076](https://issues.apache.org/jira/browse/KNOX-1076)                                                                   | 將 nimbus-jose-jwt 更新為 4.41.2                                            |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)                                                                 | 「插入目錄中作為 orcfile」時，自動合併會失敗                    |
| BUG-99056              | [HADOOP-13556](https://issues.apache.org/jira/browse/HADOOP-13556)                                                             | 變更 Configuration.getPropsWithPrefix 以使用 getProps 而不是迭代器 |
| BUG-99378              | [ATLAS-2461](https://issues.apache.org/jira/browse/ATLAS-2461), [ATLAS-2554](https://issues.apache.org/jira/browse/ATLAS-2554) | 用來在 Titan 圖表 DB 中匯出 Atlas 資料的移轉公用程式                    |

**可用性**

| **Hortonworks 錯誤識別碼** | **Apache JIRA**                                                                                                                                                                                                                                                                | **總結**                                                                                                                                                  |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100045             | [HIVE-19056](https://issues.apache.org/jira/browse/HIVE-19056)                                                                                                                                                                                                                 | 當 ORC 檔案有 0 個資料列時，FixAcidKeyIndex 中會發生 IllegalArgumentException                                                                                         |
| BUG-100139             | [KNOX-1243](https://issues.apache.org/jira/browse/KNOX-1243)                                                                                                                                                                                                                   | 將 KnoxToken 服務中所設定的必要 DN 標準化                                                                                          |
| BUG-100570             | [ATLAS-2557](https://issues.apache.org/jira/browse/ATLAS-2557)                                                                                                                                                                                                                 | 當從 UGI 的群組錯誤地設定或不是空的時，修正以允許查閱 hadoop ldap 群組                                                          |
| BUG-100646             | [ATLAS-2102](https://issues.apache.org/jira/browse/ATLAS-2102)                                                                                                                                                                                                                 | Atlas UI 增強功能：搜尋結果頁面                                                                                                                   |
| BUG-100737             | [HIVE-19049](https://issues.apache.org/jira/browse/HIVE-19049)                                                                                                                                                                                                                 | 對 Druid 新增改變資料表新增資料行的支援                                                                                                            |
| BUG-100750             | [KNOX-1246](https://issues.apache.org/jira/browse/KNOX-1246)                                                                                                                                                                                                                   | 更新 Knox 中的服務組態以對 Ranger 支援最新的組態。                                                                                   |
| BUG-100965             | [ATLAS-2581](https://issues.apache.org/jira/browse/ATLAS-2581)                                                                                                                                                                                                                 | 具有 V2 Hive 掛勾通知的迴歸：將資料表移動到不同的資料庫                                                                            |
| BUG-84413              | [ATLAS-1964](https://issues.apache.org/jira/browse/ATLAS-1964)                                                                                                                                                                                                                 | UI：支援在搜尋資料表中排序資料行                                                                                                                |
| BUG-90570              | [HDFS-11384](https://issues.apache.org/jira/browse/HDFS-11384), [HDFS-12347](https://issues.apache.org/jira/browse/HDFS-12347)                                                                                                                                                 | 新增選項供平衡器分散 getBlocks 呼叫，以避免 NameNode 的 rpc.CallQueueLength 突然增加                                                            |
| BUG-90584              | [HBASE-19052](https://issues.apache.org/jira/browse/HBASE-19052)                                                                                                                                                                                                               | FixedFileTrailer 應該會辨識 branch-1.x 中的 CellComparatorImpl 類別                                                                                     |
| BUG-90979              | [KNOX-1224](https://issues.apache.org/jira/browse/KNOX-1224)                                                                                                                                                                                                                   | 用來在 HA 中支援 Atlas 的 Knox Proxy HADispatcher。                                                                                                              |
| BUG-91293              | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060)                                                                                                                                                                                                               | Knox proxy 與 knox sso 搭配不適用於 ranger                                                                                                           |
| BUG-92236              | [ATLAS-2281](https://issues.apache.org/jira/browse/ATLAS-2281)                                                                                                                                                                                                                 | 使用 null/非 null 篩選條件儲存標記/類型屬性篩選條件查詢。                                                                                         |
| BUG-92238              | [ATLAS-2282](https://issues.apache.org/jira/browse/ATLAS-2282)                                                                                                                                                                                                                 | 只有在最愛搜尋超過 25 過時，才會在建立後進行重新整理時出現儲存的最愛搜尋。                                                          |
| BUG-92333              | [ATLAS-2286](https://issues.apache.org/jira/browse/ATLAS-2286)                                                                                                                                                                                                                 | 預先建置的類型 'kafka\_topic' 不應將 'topic' 屬性宣告為唯一的                                                                                 |
| BUG-92678              | [ATLAS-2276](https://issues.apache.org/jira/browse/ATLAS-2276)                                                                                                                                                                                                                 | hdfs\_path 類型實體的路徑值會從 hive-bridge 設成小寫。                                                                                 |
| BUG-93097              | [RANGER-1944](https://issues.apache.org/jira/browse/RANGER-1944)                                                                                                                                                                                                               | 系統管理員稽核的動作篩選條件沒有作用                                                                                                                 |
| BUG-93135              | [HIVE-15874](https://issues.apache.org/jira/browse/HIVE-15874), [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                                                                                                 | 將 hive.groupby.orderby.position.alias 設為 true 時，Hive 查詢會傳回錯誤結果                                                                      |
| BUG-93136              | [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                                                                                                                                                                 | 停用 cbo 時，Order by 位置無法運作                                                                                                         |
| BUG-93387              | [HIVE-17600](https://issues.apache.org/jira/browse/HIVE-17600)                                                                                                                                                                                                                 | 讓 OrcFile 的 "enforceBufferSize" 變成可由使用者設定。                                                                                                            |
| BUG-93495              | [RANGER-1937](https://issues.apache.org/jira/browse/RANGER-1937)                                                                                                                                                                                                               | Ranger tagsync 應該處理 ENTITY\_CREATE 通知，以支援 Atlas 匯入功能                                                                   |
| BUG-93512              | [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466)                                                                                                                                                                                                             | java.lang.RuntimeException：回應碼 500 - 執行 spark 作業以連線到 phoenix 查詢伺服器和載入資料                                       |
| BUG-93801              | [HBASE-19393](https://issues.apache.org/jira/browse/HBASE-19393)                                                                                                                                                                                                               | 使用 SSL 存取 HBase UI 時，出現 HTTP 413 FULL 標頭。                                                                                                       |
| BUG-93804              | [HIVE-17419](https://issues.apache.org/jira/browse/HIVE-17419)                                                                                                                                                                                                                 | ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS 命令會顯示已遮罩資料表的計算統計資料                                                                |
| BUG-93932              | [ATLAS-2320](https://issues.apache.org/jira/browse/ATLAS-2320)                                                                                                                                                                                                                 | 查詢的分類 "\*" 會擲回 500 內部伺服器例外狀況。                                                                                         |
| BUG-93933              | [ATLAS-2286](https://issues.apache.org/jira/browse/ATLAS-2286)                                                                                                                                                                                                                 | 預先建置的類型 'kafka\_topic' 不應將 'topic' 屬性宣告為唯一的                                                                                 |
| BUG-93938              | [ATLAS-2283](https://issues.apache.org/jira/browse/ATLAS-2283), [ATLAS-2295](https://issues.apache.org/jira/browse/ATLAS-2295)                                                                                                                                                 | 分類的 UI 更新                                                                                                                               |
| BUG-93941              | [ATLAS-2296](https://issues.apache.org/jira/browse/ATLAS-2296), [ATLAS-2307](https://issues.apache.org/jira/browse/ATLAS-2307)                                                                                                                                                 | 增強基本搜尋以選擇性地排除子類型實體和子分類類型                                                                |
| BUG-93944              | [ATLAS-2318](https://issues.apache.org/jira/browse/ATLAS-2318)                                                                                                                                                                                                                 | UI：對子標記按兩次，就會選取父標記                                                                                                    |
| BUG-93946              | [ATLAS-2319](https://issues.apache.org/jira/browse/ATLAS-2319)                                                                                                                                                                                                                 | UI：在單層式和樹狀結構中刪除標記清單內有 25 個以上位置的標記時，必須先重新整理才能從清單中移除該標記。                   |
| BUG-93977              | [HIVE-16232](https://issues.apache.org/jira/browse/HIVE-16232)                                                                                                                                                                                                                 | 對 QuotedIdentifier 中的資料行支援統計資料計算                                                                                                     |
| BUG-94030              | [ATLAS-2332](https://issues.apache.org/jira/browse/ATLAS-2332)                                                                                                                                                                                                                 | 使用具有巢狀集合資料類型的屬性無法建立類型                                                                                     |
| BUG-94099              | [ATLAS-2352](https://issues.apache.org/jira/browse/ATLAS-2352)                                                                                                                                                                                                                 | Atlas 伺服器應該提供組態以指定 Kerberos DelegationToken 的有效性                                                                   |
| BUG-94280              | [HIVE-12785](https://issues.apache.org/jira/browse/HIVE-12785)                                                                                                                                                                                                                 | 檢視具有等位型別，且用於 \`cast\` 結構的 UDF 會中斷                                                                                                |
| BUG-94332              | [SQOOP-2930](https://issues.apache.org/jira/browse/SQOOP-2930)                                                                                                                                                                                                                 | Sqoop 作業執行未覆寫已儲存的作業一般屬性                                                                                               |
| BUG-94428              | N/A                                                                                                                                                                                                                                                                            | 資料平面分析工具代理程式 REST API Knox 支援                                                                                                               |
| BUG-94514              | [ATLAS-2339](https://issues.apache.org/jira/browse/ATLAS-2339)                                                                                                                                                                                                                 | UI：在基本搜尋結果檢視的 "columns" 中進行修改也會影響 DSL。                                                                                |
| BUG-94515              | [ATLAS-2169](https://issues.apache.org/jira/browse/ATLAS-2169)                                                                                                                                                                                                                 | 設定了實刪除時，刪除要求會失敗                                                                                                          |
| BUG-94518              | [ATLAS-2329](https://issues.apache.org/jira/browse/ATLAS-2329)                                                                                                                                                                                                                 | 如果使用者對不正確的另一個標記按一下，就會出現 Atlas UI 多重停留                                                                             |
| BUG-94519              | [ATLAS-2272](https://issues.apache.org/jira/browse/ATLAS-2272)                                                                                                                                                                                                                 | 使用儲存搜尋 API 儲存所拖曳資料行的狀態。                                                                                                     |
| BUG-94627              | [HIVE-17731](https://issues.apache.org/jira/browse/HIVE-17731)                                                                                                                                                                                                                 | 在 HIVE-11985 中新增外部使用者的回溯相容性選項                                                                                                |
| BUG-94786              | [HIVE-6091](https://issues.apache.org/jira/browse/HIVE-6091)                                                                                                                                                                                                                   | 針對連線建立/關閉所建立的 pipeout 檔案是空的                                                                                                  |
| BUG-94793              | [HIVE-14013](https://issues.apache.org/jira/browse/HIVE-14013)                                                                                                                                                                                                                 | 描述資料表未正確顯示 unicode                                                                                                                 |
| BUG-94900              | [OOZIE-2606](https://issues.apache.org/jira/browse/OOZIE-2606), [OOZIE-2658](https://issues.apache.org/jira/browse/OOZIE-2658), [OOZIE-2787](https://issues.apache.org/jira/browse/OOZIE-2787), [OOZIE-2802](https://issues.apache.org/jira/browse/OOZIE-2802)                 | 設定 spark.yarn.jars 以使用 Oozie 修正 Spark 2.0                                                                                                              |
| BUG-94901              | [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285)                                                                                                                                                                                                               | 新增每一資料表的延遲長條圖                                                                                                                             |
| BUG-94908              | [ATLAS-1921](https://issues.apache.org/jira/browse/ATLAS-1921)                                                                                                                                                                                                                 | UI：使用實體和特徵屬性的搜尋：UI 不會執行範圍檢查，且會允許針對整數和浮點數資料類型提供超出界限的值。  |
| BUG-95086              | [RANGER-1953](https://issues.apache.org/jira/browse/RANGER-1953)                                                                                                                                                                                                               | 改進使用者群組頁面清單                                                                                                                       |
| BUG-95193              | [SLIDER-1252](https://issues.apache.org/jira/browse/SLIDER-1252)                                                                                                                                                                                                               | 使用 python 2.7.5-58 時，Slider 代理程式會失敗，並發生 SSL 驗證錯誤                                                                                           |
| BUG-95314              | [YARN-7699](https://issues.apache.org/jira/browse/YARN-7699)                                                                                                                                                                                                                   | queueUsagePercentage 將會作為 getApp REST api 呼叫的 INF                                                                                               |
| BUG-95315              | [HBASE-13947](https://issues.apache.org/jira/browse/HBASE-13947), [HBASE-14517](https://issues.apache.org/jira/browse/HBASE-14517), [HBASE-17931](https://issues.apache.org/jira/browse/HBASE-17931)                                                                           | 將系統資料表指派給具有最高版本的伺服器                                                                                                         |
| BUG-95392              | [ATLAS-2421](https://issues.apache.org/jira/browse/ATLAS-2421)                                                                                                                                                                                                                 | 支援 V2 資料結構的通知更新                                                                                                           |
| BUG-95476              | [RANGER-1966](https://issues.apache.org/jira/browse/RANGER-1966)                                                                                                                                                                                                               | 原則引擎初始化不會在某些情況下建立內容擴充程式                                                                                 |
| BUG-95512              | [HIVE-18467](https://issues.apache.org/jira/browse/HIVE-18467)                                                                                                                                                                                                                 | 支援整個倉儲傾印/載入 + 建立/置放資料庫事件                                                                                            |
| BUG-95593              | N/A                                                                                                                                                                                                                                                                            | 擴充 Oozie DB 公用程式以支援 Spark2 sharelib 建立                                                                                                    |
| BUG-95595              | [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)                                                                                                                                                                                                                 | 忽略 SQLOperation.runQuery 中不合法的作業狀態轉換例外狀況，以公開實際的例外狀況。                                                       |
| BUG-95685              | [ATLAS-2422](https://issues.apache.org/jira/browse/ATLAS-2422)                                                                                                                                                                                                                 | 匯出：支援以類型為基礎的匯出                                                                                                                            |
| BUG-95798              | [PHOENIX-2714](https://issues.apache.org/jira/browse/PHOENIX-2714), [PHOENIX-2724](https://issues.apache.org/jira/browse/PHOENIX-2724), [PHOENIX-3023](https://issues.apache.org/jira/browse/PHOENIX-3023), [PHOENIX-3040](https://issues.apache.org/jira/browse/PHOENIX-3040) | 請勿使用 guideposts 來循序執行查詢                                                                                                          |
| BUG-95969              | [HIVE-16828](https://issues.apache.org/jira/browse/HIVE-16828), [HIVE-17063](https://issues.apache.org/jira/browse/HIVE-17063), [HIVE-18390](https://issues.apache.org/jira/browse/HIVE-18390)                                                                                 | 分割的檢視會失敗，並出現 FAILED：IndexOutOfBoundsException 索引：1，大小：1                                                                              |
| BUG-96019              | [HIVE-18548](https://issues.apache.org/jira/browse/HIVE-18548)                                                                                                                                                                                                                 | 修正 log4j 匯入                                                                                                                                             |
| BUG-96288              | [HBASE-14123](https://issues.apache.org/jira/browse/HBASE-14123), [HBASE-14135](https://issues.apache.org/jira/browse/HBASE-14135), [HBASE-17850](https://issues.apache.org/jira/browse/HBASE-17850)                                                                           | 將 HBase 備份/還原2。0                                                                                                                            |
| BUG-96313              | [KNOX-1119](https://issues.apache.org/jira/browse/KNOX-1119)                                                                                                                                                                                                                   | Pac4J OAuth/OpenID 主體必須是可設定的                                                                                                        |
| BUG-96365              | [ATLAS-2442](https://issues.apache.org/jira/browse/ATLAS-2442)                                                                                                                                                                                                                 | 具有實體資源唯讀權限的使用者無法執行基本搜尋                                                                              |
| BUG-96479              | [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781)                                                                                                                                                                                                                 | Datanode 關閉之後，[在 Namenode UI Datanode] 索引標籤會擲回警告訊息。                                                                                |
| BUG-96502              | [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990)                                                                                                                                                                                                               | 在 Ranger 系統管理員中新增單向 SSL MySQL 支援                                                                                                                |
| BUG-96718              | [ATLAS-2439](https://issues.apache.org/jira/browse/ATLAS-2439)                                                                                                                                                                                                                 | 更新 Sqoop 掛勾以使用 V2 通知                                                                                                                    |
| BUG-96748              | [HIVE-18587](https://issues.apache.org/jira/browse/HIVE-18587)                                                                                                                                                                                                                 | 插入 DML 事件可能會嘗試對目錄計算總和檢查碼                                                                                          |
| BUG-96821              | [HBASE-18212](https://issues.apache.org/jira/browse/HBASE-18212)                                                                                                                                                                                                               | 在具有本機檔案系統 HBase 記錄警告訊息的獨立模式中：無法在 org.apache.hadoop.fs.FSDataInputStream 類別中叫用 'unbuffer' 方法 |
| BUG-96847              | [HIVE-18754](https://issues.apache.org/jira/browse/HIVE-18754)                                                                                                                                                                                                                 | REPL STATUS 應該支援 'with' 子句                                                                                                                     |
| BUG-96873              | [ATLAS-2443](https://issues.apache.org/jira/browse/ATLAS-2443)                                                                                                                                                                                                                 | 在外寄 DELETE 訊息中擷取所需的實體屬性                                                                                               |
| BUG-96880              | [SPARK-23230](https://issues.apache.org/jira/browse/SPARK-23230)                                                                                                                                                                                                               | 當 hive.default.fileformat 是其他種類的檔案類型時，建立 textfile 資料表會造成 serde 錯誤                                                         |
| BUG-96911              | [OOZIE-2571](https://issues.apache.org/jira/browse/OOZIE-2571), [OOZIE-2792](https://issues.apache.org/jira/browse/OOZIE-2792), [OOZIE-2799](https://issues.apache.org/jira/browse/OOZIE-2799), [OOZIE-2923](https://issues.apache.org/jira/browse/OOZIE-2923)                 | 改善 Spark 選項剖析                                                                                                                                |
| BUG-97100              | [RANGER-1984](https://issues.apache.org/jira/browse/RANGER-1984)                                                                                                                                                                                                               | HBase audit 記錄檔記錄可能不會顯示與存取的資料行相關聯的所有標記                                                                                |
| BUG-97110              | [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789)                                                                                                                                                                                                             | 在 postBatchMutateIndispensably 中執行跨區域索引維護呼叫                                                                                 |
| BUG-97145              | [HIVE-12245](https://issues.apache.org/jira/browse/HIVE-12245), [HIVE-17829](https://issues.apache.org/jira/browse/HIVE-17829)                                                                                                                                                 | HBase 支援的資料表可支援資料行註解                                                                                                            |
| BUG-97409              | [HADOOP-15255](https://issues.apache.org/jira/browse/HADOOP-15255)                                                                                                                                                                                                             | 可對 LdapGroupsMapping 中的群組名稱支援大小寫轉換                                                                                     |
| BUG-97535              | [HIVE-18710](https://issues.apache.org/jira/browse/HIVE-18710)                                                                                                                                                                                                                 | 在 Hive 2.X 中將 inheritPerms 延伸至 ACID                                                                                                                      |
| BUG-97742              | [OOZIE-1624](https://issues.apache.org/jira/browse/OOZIE-1624)                                                                                                                                                                                                                 | sharelib JAR 的排除模式                                                                                                                          |
| BUG-97744              | [PHOENIX-3994](https://issues.apache.org/jira/browse/PHOENIX-3994)                                                                                                                                                                                                             | 索引 RPC 優先順序仍需依賴 hbase-site.xml 中的控制器中心屬性                                                                        |
| BUG-97787              | [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)                                                                                                                                                                                                                 | Compactor 不會將資料表屬性傳遞至 Orc 寫入器                                                                                                    |
| BUG-97788              | [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)                                                                                                                                                                                                                 | 擴充 JsonSerDe 以支援 BINARY 類型                                                                                                                      |
| BUG-97899              | [HIVE-18808](https://issues.apache.org/jira/browse/HIVE-18808)                                                                                                                                                                                                                 | 統計資料更新失敗時，讓壓縮更穩固                                                                                                          |
| BUG-98038              | [HIVE-18788](https://issues.apache.org/jira/browse/HIVE-18788)                                                                                                                                                                                                                 | 清除 JDBC PreparedStatement 中的輸入                                                                                                                    |
| BUG-98383              | [HIVE-18907](https://issues.apache.org/jira/browse/HIVE-18907)                                                                                                                                                                                                                 | 建立公用程式以修正 HIVE-18817 中的 acid 金鑰索引問題                                                                                                   |
| BUG-98388              | [RANGER-1828](https://issues.apache.org/jira/browse/RANGER-1828)                                                                                                                                                                                                               | 良好的程式碼撰寫慣例 - 在 ranger 中新增其他標頭                                                                                                        |
| BUG-98392              | [RANGER-2007](https://issues.apache.org/jira/browse/RANGER-2007)                                                                                                                                                                                                               | ranger-tagsync 的 Kerberos 票證無法更新                                                                                                              |
| BUG-98533              | [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934), [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008)                                                                                                                                             | HBase 快照集還原因 Null 指標例外狀況而失敗                                                                                              |
| BUG-98552              | [HBASE-18083](https://issues.apache.org/jira/browse/HBASE-18083), [HBASE-18084](https://issues.apache.org/jira/browse/HBASE-18084)                                                                                                                                             | 在 HFileCleaner 中讓大型/小型檔案清除執行緒數目變成可供設定的狀態                                                                                       |
| BUG-98705              | [KNOX-1230](https://issues.apache.org/jira/browse/KNOX-1230)                                                                                                                                                                                                                   | 若對 Knox 發出許多並行要求，將會導致 URL 弄亂                                                                                                         |
| BUG-98711              | N/A                                                                                                                                                                                                                                                                            | 不修改 service.xml，NiFi 分派就不能使用雙向 SSL                                                                                        |
| BUG-98880              | [OOZIE-3199](https://issues.apache.org/jira/browse/OOZIE-3199)                                                                                                                                                                                                                 | 讓系統屬性限制可供進行設定                                                                                                                 |
| BUG-98931              | [ATLAS-2491](https://issues.apache.org/jira/browse/ATLAS-2491)                                                                                                                                                                                                                 | 更新 Hive 掛勾以使用 Atlas v2 通知                                                                                                               |
| BUG-98983              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                   | NiFiHaDispatch 未容錯移轉                                                                                                                              |
| BUG-99088              | [ATLAS-2511](https://issues.apache.org/jira/browse/ATLAS-2511)                                                                                                                                                                                                                 | 提供選項以供選擇性地將資料庫/資料表從 Hive 匯入到 Atlas                                                                                 |
| BUG-99154              | [OOZIE-2844](https://issues.apache.org/jira/browse/OOZIE-2844), [OOZIE-2845](https://issues.apache.org/jira/browse/OOZIE-2845), [OOZIE-2858](https://issues.apache.org/jira/browse/OOZIE-2858), [OOZIE-2885](https://issues.apache.org/jira/browse/OOZIE-2885)                 | Spark 查詢失敗，並發生 "java.io.FileNotFoundException: hive-site.xml (Permission denied)" 例外狀況                                                         |
| BUG-99239              | [ATLAS-2462](https://issues.apache.org/jira/browse/ATLAS-2462)                                                                                                                                                                                                                 | 若命令中未提供任何資料表，則所有資料表的 Sqoop 匯入會擲回 NPE                                                                                      |
| BUG-99636              | [KNOX-1238](https://issues.apache.org/jira/browse/KNOX-1238)                                                                                                                                                                                                                   | 修正閘道的自訂 Truststore 設定                                                                                                                   |
| BUG-99650              | [KNOX-1223](https://issues.apache.org/jira/browse/KNOX-1223)                                                                                                                                                                                                                   | Zeppelin 的 Knox proxy 不會如預期般重新導向 /api/ticket                                                                                               |
| BUG-99804              | [OOZIE-2858](https://issues.apache.org/jira/browse/OOZIE-2858)                                                                                                                                                                                                                 | HiveMain、ShellMain 和 SparkMain 不應在本機覆寫屬性和設定檔                                                                   |
| BUG-99805              | [OOZIE-2885](https://issues.apache.org/jira/browse/OOZIE-2885)                                                                                                                                                                                                                 | 執行 Spark 動作應該不需要在 classpath 上有 Hive                                                                                                  |
| BUG-99806              | [OOZIE-2845](https://issues.apache.org/jira/browse/OOZIE-2845)                                                                                                                                                                                                                 | 取代會在 HiveConf 中設定變數的反映型程式碼                                                                                                |
| BUG-99807              | [OOZIE-2844](https://issues.apache.org/jira/browse/OOZIE-2844)                                                                                                                                                                                                                 | 在 log4j.properties 遺失或無法讀取時增加 Oozie 動作的穩定性                                                                         |
| RMP-9995               | [AMBARI-22222](https://issues.apache.org/jira/browse/AMBARI-22222)                                                                                                                                                                                                             | 將 druid 改為使用 /var/druid 目錄，而不是本機磁碟上的 /apps/druid                                                                                |

### <a name="behavioral-changes"></a>行為變更

|**Apache 元件**|**Apache JIRA**|**總結**|**詳細資料**|
|--|--|--|--|
|**Spark 2.3** |**N/A** |**Apache Spark 版本資訊中所述的變更** |-有「取代」的檔和「行為變更」指南， https://spark.apache.org/releases/spark-release-2-3-0.html#deprecations<br /><br />-對於 SQL 元件，還有另一個詳細的「遷移」指南 (從2.2 到 2.3) https://spark.apache.org/docs/latest/sql-programming-guide.html#upgrading-from-spark-sql-22-to-23|
|Spark |[**HIVE-12505**](https://issues.apache.org/jira/browse/HIVE-12505) |Spark 作業已順利完成，但是有 HDFS 磁碟配額已滿錯誤 |**案例：** 在已對執行命令的使用者所擁有的 [資源回收筒] 資料夾設定配額時，執行 **insert overwrite**。<br /><br />**先前的行為：** 即使無法將資料移至資源回收筒，作業仍會成功。 結果可能會錯誤地包含一些先前出現在資料表中的資料。<br /><br />**新的行為：** 移至 [資源回收筒] 資料夾若失敗，就會永久刪除檔案。|
|**Kafka 1.0**|**N/A**|**Apache Spark 版本資訊中所述的變更** |https://kafka.apache.org/10/documentation.html#upgrade_100_notable|
|**Hive/ Ranger** | |INSERT OVERWRITE 需要其他 ranger hive 原則 |**案例：****INSERT OVERWRITE** 需要其他 ranger hive 原則<br /><br />**先前的行為：** Hive **INSERT OVERWRITE** 查詢會如往常般成功。<br /><br />**新的行為：** Hive **INSERT OVERWRITE** 查詢會在升級至 HDP-2.6.x 之後意外失敗，並出現錯誤：<br /><br />編譯陳述式時發生錯誤：FAILED：HiveAccessControlException 權限遭拒：使用者 jdoe 沒有 /tmp/\*(state=42000,code=40000) 的 WRITE 權限<br /><br />截至 HDP-2.6.0，Hive **INSERT OVERWRITE** 查詢需要 Ranger URI 原則才能允許寫入作業，即使使用者已透過 HDFS 原則獲得寫入權限也是一樣。<br /><br />**因應措施/期望的客戶動作：**<br /><br />1. 在 Hive 存放庫下建立新的原則。<br />2. 在您看到資料庫的下拉式清單中，選取 [URI]。<br />3. 更新路徑 (範例：/tmp/* ) <br />4. 新增使用者和群組，然後儲存。<br />5. 重試插入查詢。|
|**HDFS**|**N/A** |HDFS 應支援多個 KMS Uris |**先前的行為：** 使用 dfs.encryption.key.provider.uri 屬性來設定 KMS 提供者路徑。<br /><br />**新的行為：** dfs.encryption.key.provider.uri 現已淘汰，改為使用 hadoop.security.key.provider.path 來設定 KMS 提供者路徑。|
|**Zeppelin**|[**ZEPPELIN-3271**](https://issues.apache.org/jira/browse/ZEPPELIN-3271)|可供停用排程器的選項 |**受影響的元件：** Zeppelin-Server<br /><br />**先前的行為：** 在舊版 Zeppelin 中，沒有選項可停用排程器。<br /><br />**新的行為：** 根據預設，使用者不會再看到排程器，因為其已依預設停用。<br /><br />**因應措施/期望的客戶動作：** 如果您想要啟用排程器，您必須從 Ambari 在 Zeppelin 設定中於自訂 zeppelin 網站之下新增值為 true 的 azeppelin.notebook.cron.enable。|

### <a name="known-issues"></a>已知問題

- **HDInsight 與 ADLS Gen 2 的整合** - 搭配使用者目錄及權限使用 Azure Data Lake Storage Gen 2 的 HDInsight ESP 叢集上有兩個問題：
   
  1. 使用者的主目錄不會建立在前端節點 1 上。 為因應此情況，請手動建立目錄，並將擁有權變更為個別使用者的 UPN。
   
  2. /hdp 目錄上的權限目前未設定為 751。 這必須設定為 
     ```bash
     chmod 751 /hdp 
     chmod –R 755 /hdp/apps
     ```

- **Spark 2.3**

  -   \[[*SPARK-23523*](https://issues.apache.org/jira/browse/SPARK-23523) \] \[\]由規則 optimizemetadataonlyquery 造成了所造成的 SQL 不正確結果

  -   \[[*SPARK-23406*](https://issues.apache.org/jira/browse/SPARK-23406) \]資料流程自我聯結中的 bug

  -   當 Azure Data Lake Storage (Gen2) 是叢集的預設儲存體時，不會提供 Spark 範例筆記本。

- **企業安全性套件**

  - Spark Thrift 伺服器不接受來自 ODBC 用戶端的連接。
    因應措施步驟：
    1. 在建立叢集之後等候 15 分鐘左右。
    2. 檢查 ranger UI 中是否有 hivesampletable_policy。
    3. 重新啟動 Spark 服務。
       STS 連線現在應可正常運作。

- **Ranger 服務檢查失敗的因應措施**

  -   [RANGER-1607](https://issues.apache.org/jira/browse/RANGER-1607)：從先前的 HDP 版本升級至 HDP 2.6.2 時，Ranger 服務檢查失敗的因應措施。

      > [!NOTE]  
      > 只有在 Ranger 已啟用 SSL 時。 
     
  嘗試透過 Ambari 從先前的 HDP 版本升級至 HDP-2.6.1 時，就會發生此問題。 Ambari 會使用 curl 呼叫來對 Ambari 中的 Ranger 服務進行服務檢查。 如果 Ambari 使用的 JDK 版本是 JDK-1.7，curl 呼叫會失敗並出現下列錯誤：
    
  `curl: (35) error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure`
    
  這項錯誤的原因是用在 Ranger 的 tomcat 版本是 Tomcat-7.0.7\*。 使用 JDK-1.7 會與 Tomcat-7.0.7\* 中提供的預設編碼器衝突。
    
  您可以透過兩種方式解決這個問題：
    
  -   將 Ambari 中使用的 JDK 從 JDK-1.7 更新至 JDK-1.8 (請參閱《Ambari 參考指南》中的[變更 JDK 版本](https://docs.hortonworks.com/HDPDocuments/Ambari-2.2.0.0/bk_ambari_reference_guide/content/ch_changing_the_jdk_version_on_an_existing_cluster.html))。
    
  -   如果您想要繼續支援 JDK-1.7 環境：
    
      1.  在 Ambari Ranger 設定中的 ranger-admin-site 區段內，使用下列值新增 ranger.tomcat.ciphers 屬性：
            
          SSL\_RSA\_WITH\_RC4\_128\_MD5, SSL\_RSA\_WITH\_RC4\_128\_SHA, TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA, SSL\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA
        
      2.  如果環境是針對 Ranger-KMS 進行設定的，則在 Ambari Ranger 設定中的 theranger-kms-site 區段內，使用下列值新增 ranger.tomcat.ciphers 屬性：
            
          SSL\_RSA\_WITH\_RC4\_128\_MD5, SSL\_RSA\_WITH\_RC4\_128\_SHA, TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA, SSL\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA
    
  >[!NOTE]  
  >所記下的值是可供運作的範例，可能無法代表您的環境。 請確定您在設定這些屬性時，所使用的方式符合您環境的設定方式。   

- **RangerUI：逸出在原則表單中輸入的原則條件文字**
    
  **受影響的元件：** Ranger
    
  **問題描述**
    
  如果使用者想要使用自訂原則條件來建立原則，且運算式或文字包含特殊字元，則原則強制執行將無法運作。 特殊字元會先轉換為 ASCII，然後才將原則儲存到資料庫。
    
  **特殊字元：**  &  &lt;&gt; " \`'
    
  例如，條件 tags.attributes\['type'\]='abc' 會在儲存原則之後轉換成下列文字。
    
  tags.attds\[&\#x27;dsds&\#x27;\]=&\#x27;cssdfs&\#x27;
    
  您可以在編輯模式中開啟原則，以看到有這些字元的原則條件。
    
  **因應措施**
    
  - **選項\#1：透過 Ranger Rest API 建立/更新原則**
        
      REST URL：http://&lt;host&gt;:6080/service/plugins/policies
        
      **建立具有原則條件的原則：**
        
      下列範例會將具有標記的原則建立為 \`tags-test\`，並將其指派給 \`public\` 群組 (原則條件為 astags.attr\['type'\]=='abc')，方法是選取所有hive 元件權限，像是選取、更新、建立、卸除、改變、編製索引、鎖定、所有。
        
      **範例︰**
        
      ```bash
        curl -H "Content-Type: application/json" -X POST http://localhost:6080/service/plugins/policies -u admin:admin -d '{"policyType":"0","name":"P100","isEnabled":true,"isAuditEnabled":true,"description":"","resources":{"tag":{"values":["tags-test"],"isRecursive":"","isExcludes":false}},"policyItems":[{"groups":["public"],"conditions":[{"type":"accessed-after-expiry","values":[]},{"type":"tag-expression","values":["tags.attr['type']=='abc'"]}],"accesses":[{"type":"hive:select","isAllowed":true},{"type":"hive:update","isAllowed":true},{"type":"hive:create","isAllowed":true},{"type":"hive:drop","isAllowed":true},{"type":"hive:alter","isAllowed":true},{"type":"hive:index","isAllowed":true},{"type":"hive:lock","isAllowed":true},{"type":"hive:all","isAllowed":true}]}],"denyPolicyItems":[],"allowExceptions":[],"denyExceptions":[],"service":"tagdev"}'
      ```
        
      **更新具有原則條件的現有原則：**
        
      下列範例會將具有標記的原則更新為 \`tags-test\`，並將其指派給 \`public\` 群組 (原則條件為 astags.attr\['type'\]=='abc')，方法是選取所有hive 元件權限，像是選取、更新、建立、卸除、改變、編製索引、鎖定、所有。
        
      REST URL：http://&lt;host-name&gt;:6080/service/plugins/policies/&lt;policy-id&gt;
        
      **範例︰**
        
      ```bash
        curl -H "Content-Type: application/json" -X PUT http://localhost:6080/service/plugins/policies/18 -u admin:admin -d '{"id":18,"guid":"ea78a5ed-07a5-447a-978d-e636b0490a54","isEnabled":true,"createdBy":"Admin","updatedBy":"Admin","createTime":1490802077000,"updateTime":1490802077000,"version":1,"service":"tagdev","name":"P0101","policyType":0,"description":"","resourceSignature":"e5fdb911a25aa7f77af5a9546938d9ed","isAuditEnabled":true,"resources":{"tag":{"values":["tags"],"isExcludes":false,"isRecursive":false}},"policyItems":[{"accesses":[{"type":"hive:select","isAllowed":true},{"type":"hive:update","isAllowed":true},{"type":"hive:create","isAllowed":true},{"type":"hive:drop","isAllowed":true},{"type":"hive:alter","isAllowed":true},{"type":"hive:index","isAllowed":true},{"type":"hive:lock","isAllowed":true},{"type":"hive:all","isAllowed":true}],"users":[],"groups":["public"],"conditions":[{"type":"ip-range","values":["tags.attributes['type']=abc"]}],"delegateAdmin":false}],"denyPolicyItems":[],"allowExceptions":[],"denyExceptions":[],"dataMaskPolicyItems":[],"rowFilterPolicyItems":[]}'
      ```
        
  - **選項 \# 2：套用 JavaScript 變更**
        
      JS 檔案的更新步驟：
        
      1.  在 /usr/hdp/current/ranger-admin 底下找出 PermissionList.js 檔案
        
      2.  找出 renderPolicyCondtion 函式的定義 (行號：404)。
        
      3.  從該函式移除下面這行，也就是 在顯示函式底下 (行號：434)
            
          val = \_.escape(val);//Line No:460
            
          在移除上述程式碼行之後，Ranger UI 便可讓您建立具有原則條件的原則 (可包含特殊字元)，且相同原則的原則評估將會成功。

**HDInsight 與 ADLS Gen 2 的整合： ESP 叢集的使用者目錄和許可權問題**
    1.  使用者的主目錄不會建立在前端節點 1 上。 為因應此情況，請手動建立這些目錄，並將擁有權變更為個別使用者的 UPN。
    2.  /hdp 上的權限目前未設定為 751。 這必須設定為 a.  chmod 751 /hdp b.  chmod –R 755 /hdp/apps

### <a name="deprecation"></a>淘汰

-   **OMS 入口網站：** 我們已從 HDInsight 資源頁面中移除指向 OMS 入口網站的連結。 Azure 監視器記錄一開始是使用自己的入口網站，稱為 OMS 入口網站來管理其設定及分析收集的資料。 這個入口網站中的所有功能都已移至 Azure 入口網站，並將繼續進行開發。 HDInsight 已淘汰對於 OMS 入口網站的支援。 客戶將會在 Azure 入口網站中使用 HDInsight Azure 監視器記錄整合。

-   **Spark 2.3**

    -   <https://spark.apache.org/releases/spark-release-2-3-0.html#deprecations>

### <a name="upgrading"></a>升級中

這些功能全都可在 HDInsight 3.6 中使用。 若要取得最新版本的 Spark、Kafka 和 R Server (機器學習服務)，請在[建立 HDInsight 3.6 叢集](./hdinsight-hadoop-provision-linux-clusters.md)時選擇 Spark、Kafka、ML 服務版本。 若要取得 ADLS 的支援，您可以選擇 ADLS 儲存體類型選項。 現有的叢集將不會自動升級為這些版本。

在 2018 年 6 月之後建立的所有新叢集，會自動取得所有開放原始碼專案超過 1000 個以上的錯誤修正。 請遵循[這個](./hdinsight-upgrade-cluster.md)指南，來取得關於升級至較新 HDInsight 版本的最佳做法。