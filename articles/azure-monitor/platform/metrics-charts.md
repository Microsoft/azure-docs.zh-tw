---
title: Azure 計量瀏覽器的 Advanced 功能
description: 深入瞭解 Azure 計量瀏覽器的使用經驗。
author: vgorbenko
services: azure-monitor
ms.topic: conceptual
ms.date: 01/22/2019
ms.author: vitalyg
ms.subservice: metrics
ms.openlocfilehash: b4feb177abbdbfb9666be0ea0746c8316acdf5ae
ms.sourcegitcommit: 25d1d5eb0329c14367621924e1da19af0a99acf1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/16/2021
ms.locfileid: "98250752"
---
# <a name="advanced-features-of-the-azure-metrics-explorer"></a>Azure 計量瀏覽器的 Advanced 功能

> [!NOTE]
> 本文假設您已經熟悉 Azure 監視器的 Azure 計量瀏覽器功能的基本功能。 如果您是新使用者，而且想要瞭解如何建立您的第一個度量圖表，請參閱 [開始使用計量瀏覽器](metrics-getting-started.md)。

在 Azure 監視器中 [，計量](data-platform-metrics.md) 是一系列的測量值和計數，會隨著時間收集和儲存。 計量可以是標準 (也稱為「平臺」 ) 或自訂。 

標準計量是由 Azure 平臺所提供。 它們會反映 Azure 資源的健康情況和使用量統計資料。 

## <a name="resource-scope-picker"></a>資源範圍選取器
資源範圍選取器可讓您跨單一資源和多個資源來查看計量。 下列各節說明如何使用資源範圍選取器。 

### <a name="select-a-single-resource"></a>選取單一資源
從 [Azure 監視器]  功能表或從資源功能表的 [監視]  區段中，選取 [計量]  。 然後選擇 [ **選取範圍** ] 以開啟範圍選取器。 

使用範圍選取器來選取您想要查看其計量的資源。 如果您從資源的功能表開啟 Azure 計量瀏覽器，則應該填入範圍。 

![顯示如何開啟資源範圍選取器的螢幕擷取畫面。](./media/metrics-charts/scope-picker.png)

針對某些資源，您一次只能查看一個資源的度量。 在 [ **資源類型** ] 功能表中，這些資源位於 [ **所有資源類型** ] 區段中。

![顯示單一資源的螢幕擷取畫面。](./media/metrics-charts/single-resource-scope.png)

選取資源之後，您會看到包含該資源的所有訂用帳戶和資源群組。

![顯示可用資源的螢幕擷取畫面。](./media/metrics-charts/available-single-resource.png)

> [!TIP]
> 如果您想要同時查看多個資源的計量，或查看整個訂用帳戶或資源群組的計量，請選取 [ **附議**]。

當您感到滿意選取專案時，請 **選取 [** 套用]。

### <a name="view-metrics-across-multiple-resources"></a>跨多個資源查看度量
某些資源類型可以查詢多個資源的計量。 資源必須位於相同的訂用帳戶和位置。 在 [ **資源類型** ] 功能表頂端尋找這些資源類型。 

如需詳細資訊，請參閱 [選取多個資源](metrics-dynamic-scope.md#select-multiple-resources)。

![顯示跨資源類型的螢幕擷取畫面。](./media/metrics-charts/multi-resource-scope.png)

針對與多個資源相容的類型，您可以查詢訂用帳戶或多個資源群組的計量。 如需詳細資訊，請參閱 [選取資源群組或訂用](metrics-dynamic-scope.md#select-a-resource-group-or-subscription)帳戶。

## <a name="multiple-metric-lines-and-charts"></a>多個度量線和圖表

在 Azure 計量瀏覽器中，您可以建立繪製多個計量線的圖表，或同時顯示多個度量圖表。 此功能可讓您：

- 將相同圖形上的相關計量相互關聯，以查看一個值與另一個值之間的關聯性。
- 顯示使用不同測量單位的計量（以接近接近的方式）。
- 以視覺化方式匯總和比較多個資源的計量。

例如，假設您有五個儲存體帳戶，而您想要知道它們一起使用的空間量。 您可以建立 (堆疊) 區域圖來顯示個別值，以及特定時間點的所有值總和。

### <a name="multiple-metrics-on-the-same-chart"></a>相同圖表上的多個計量

若要在相同圖表上查看多個度量，請先 [建立新的圖表](metrics-getting-started.md#create-your-first-metric-chart)。 然後選取 [ **新增度量**]。 重複此步驟，在相同的圖表上新增另一個度量。

> [!NOTE]
> 通常，您的圖表不應混合使用不同測量單位的度量。 例如，避免將一個使用毫秒的計量與使用 kb 的另一個度量混合使用。 也請避免混合調整規模不同的度量。 
>
> 在這些情況下，請考慮改為使用多個圖表。 在 [計量瀏覽器] 中，選取 [ **新增圖表** ] 以建立新的圖表。

### <a name="multiple-charts"></a>多個圖表

若要建立另一個使用不同度量的圖表，請選取 [ **新增圖表**]。

若要重新排序或刪除多個圖表，請選取省略號 (**...**) 按鈕以開啟 [圖表] 功能表。 然後選擇 [ **上移**]、[ **下移**] 或 [ **刪除**]。

## <a name="aggregation"></a>彙總

當您將計量新增至圖表時，計量瀏覽器會自動套用預設匯總。 在基本案例中，預設值會有意義。 但是，您可以使用不同的匯總來取得度量的更深入資訊。 

在圖表上使用不同的匯總之前，您應該先瞭解計量瀏覽器如何處理它們。 計量是在一段時間內所捕獲 (或「計量值」 ) 的一系列度量。 當您繪製圖表時，所選度量的值會在 *時間細微性* 上分開匯總。 

您可以使用計量瀏覽器的 [時間選擇器面板](metrics-getting-started.md#select-a-time-range)來選取時間細微性的大小。 如果您未明確選取時間細微性，預設會使用目前選取的時間範圍。 判斷時間細微性之後，會在每個時間細微性期間所捕獲的度量值匯總于圖表上，每一時間有一個資料點。

例如，假設圖表顯示 *伺服器回應時間* 度量。 它會使用 *過去24小時* 內的 *平均* 匯總與時間範圍。 在此範例中：

- 如果時間細微性設定為30分鐘，則會從48匯總資料點繪製圖表。 也就是說，折線圖會連接圖表繪圖區域中的48點 (每小時24小時 x 2 個資料點) 。 每個資料點都代表每個相關30分鐘期間內發生之伺服器要求的所有已捕獲回應時間的 *平均值* 。
- 如果您將時間細微性切換至15分鐘，您會收到96個匯總的資料點。  也就是說，每小時會取得24小時 x 4 個資料點。

計量瀏覽器有五個基本統計匯總類型： sum、count、min、max 和 average。 *Sum* 匯總有時也稱為 *總匯總*。 針對許多計量，計量瀏覽器會隱藏不相關的匯總，而且無法使用。

* **Sum**：匯總間隔期間所捕獲的所有值的總和。

    ![Sum 要求的螢幕擷取畫面。](./media/metrics-charts/request-sum.png)

* **Count**：匯總間隔期間所捕獲的度量數目。 
    
    當計量一律以1值來捕捉時，計數匯總會等於 sum 匯總。 當計量追蹤相異事件的計數，且每個度量都代表一個事件時，此案例很常見。 程式碼會在每次新要求抵達時發出度量記錄。

    ![計數要求的螢幕擷取畫面。](./media/metrics-charts/request-count.png)

* **平均**：匯總間隔期間所捕獲的度量值平均值。

    ![平均要求的螢幕擷取畫面。](./media/metrics-charts/request-avg.png)

* **最** 小值：匯總間隔期間所捕獲的最小值。

    ![最小要求的螢幕擷取畫面。](./media/metrics-charts/request-min.png)

* **最大** 值：匯總間隔期間所捕獲的最大值。

    ![最大要求的螢幕擷取畫面。](./media/metrics-charts/request-max.png)

## <a name="filters"></a>篩選器

您可以將篩選套用至計量具有維度的圖表。 例如，假設有一個「交易計數」度量具有「回應類型」維度。 此維度會指出交易的回應是否成功或失敗。 如果您篩選此維度，您將只會看到 (成功的圖表行，或只會看到失敗的) 交易。 

### <a name="add-a-filter"></a>新增篩選

1. 選取圖表上方的 [ **加入篩選**]。

2. 選取要篩選的維度 (屬性) 。

   ![顯示您可以篩選)  (屬性維度的螢幕擷取畫面。](./media/metrics-charts/028.png)

3. 選取您要在繪製圖表時包含的維度值。 下列範例會篩選出成功的儲存體交易：

   ![螢幕擷取畫面，顯示已成功篩選的儲存體交易。](./media/metrics-charts/029.png)

4. 選取 **篩選器選取器** 以外的範圍來關閉它。 現在圖表會顯示失敗的儲存體交易數目：

   ![顯示失敗的儲存體交易數目的螢幕擷取畫面。](./media/metrics-charts/030.png)

您可以重複這些步驟，以將多個篩選套用至相同的圖表。



## <a name="metric-splitting"></a>度量分割

您可以依維度分割計量，以視覺化度量的不同區段。 分割也可以協助您識別維度的外部區段。

### <a name="apply-splitting"></a>套用分割

1. 選取圖表上方的 [套用 **分割**]。
 
   > [!NOTE]
   > 具有多個計量的圖表無法使用分割功能。 此外，雖然圖表可以有多個篩選，但它只能有一個分割維度。

2. 選擇要分割圖表的維度：

   ![顯示選取的維度在其上分割圖表的螢幕擷取畫面。](./media/metrics-charts/031.png)

   圖表現在會顯示多行，每個維度區段各有一個：

   ![顯示每個維度區段之線條的螢幕擷取畫面。](./media/metrics-charts/032.png)

3. 選取 **群組選取器** 以外的範圍來關閉它。

   > [!NOTE]
   > 若要隱藏您的案例不相關的區段，並讓圖表更容易閱讀，請在相同維度上同時使用篩選和分割。

## <a name="locking-the-range-of-the-y-axis"></a>鎖定 y 軸的範圍

鎖定值範圍 (y) 軸在顯示大數值波動的圖表中變得很重要。 

例如，從99.99% 到99.5% 的成功要求數量下降，可能代表服務品質的大幅降低。 但是，如果您使用的是預設圖表設定，則很難或甚至根本不可能發生輕微的數值波動。 在這種情況下，您可以將圖表的最小界限鎖定為99%，讓較小的下降變得更明顯。 

另一個範例是可用記憶體中的波動。 在此案例中，此值在技術上永遠不會到達0。 將範圍修正為較高的值可能會讓可用記憶體中的卸載變得更容易找出。 

若要控制 y 軸範圍，請開啟 [圖表] 功能表 (**...**) 。然後，選取 [ **圖表設定** ] 以存取 [advanced chart] 設定。

![醒目顯示圖表設定選項的螢幕擷取畫面。](./media/metrics-charts/033.png)

修改 [ **Y 軸範圍** ] 區段中的值，或選取 [ **自動** ] 以還原為預設值。
 
 ![反白顯示 [Y 軸範圍] 區段的螢幕擷取畫面。](./media/metrics-charts/034.png)

> [!WARNING]
> 如果您需要使用 [計數]、[總和]、[最小值] 或 [最大匯總]) 來追蹤圖表的 y 軸界限 (，通常應該指定固定的時間細微性。 在此情況下，您不應該依賴自動預設值。 
>
> 您可以選擇固定的時間細微性，因為當使用者調整瀏覽器視窗的大小或變更螢幕解析度之後，圖表值會變更。 產生的時間細微性變更會影響圖表的外觀，並使 y 軸範圍的目前選取範圍失效。

## <a name="line-colors"></a>線條色彩

設定圖表之後，會自動從預設調色板將色彩指派給圖表線條。 您可以變更這些色彩。

若要變更圖表線的色彩，請選取圖例中對應至圖表的彩色列。 [色彩選擇器] 對話方塊隨即開啟。 使用色彩選擇器來設定線條色彩。

![顯示如何變更色彩的螢幕擷取畫面。](./media/metrics-charts/035.png)

當您將圖表釘選到儀表板時，會保留您的自訂色彩。 下一節將說明如何釘選圖表。

## <a name="pinning-to-dashboards"></a>釘選到儀表板 

設定圖表之後，您可能會想要將它新增至儀表板。 藉由將圖表釘選到儀表板，您可以將其提供給您的小組存取。 您也可以在其他監視遙測的內容中加以查看，以深入瞭解。

若要將已設定的圖表釘選到儀表板，請選取圖表右上角的 [ **釘選到儀表板**]。

![顯示如何將圖表釘選到儀表板的螢幕擷取畫面。](./media/metrics-charts/036.png)

## <a name="alert-rules"></a>警示規則

您可以使用視覺效果準則來建立以度量為基礎的警示規則。 新的警示規則將包含您圖表的目標資源、計量、分割和篩選維度。 您可以使用 [警示規則建立] 窗格來修改這些設定。

若要開始，請選取 [ **新增警示規則**]。

![顯示 [新增警示規則] 按鈕的螢幕擷取畫面（以紅色反白顯示）。](./media/metrics-charts/042.png)

[警示規則建立] 窗格隨即開啟。 在窗格中，您會看到圖表的度量維度。 窗格中的欄位會預先填入，以協助您自訂規則。

![顯示規則建立窗格的螢幕擷取畫面。](./media/metrics-charts/041.png)

如需詳細資訊，請參閱 [建立、查看和管理計量警示](alerts-metric.md)。

## <a name="troubleshooting"></a>疑難排解

如果您在圖表上看不到任何資料，請參閱下列疑難排解資訊：

* 篩選適用于窗格上的所有圖表。 當您將焦點放在圖表上時，請確定您未設定會排除另一個圖表上所有資料的篩選。

* 若要在不同的圖表上設定不同的篩選，請在不同的 blade 中建立圖表。 然後將圖表另存為個別的我的最愛。 如果您想要的話，可以將圖表釘選到儀表板，讓您可以同時查看這些圖表。

* 如果您依計量未定義的屬性來分割圖表，則圖表不會顯示任何內容。 請嘗試清除分割 (分割)，或選擇不同的屬性。

## <a name="next-steps"></a>後續步驟

若要使用計量建立可操作的儀表板，請參閱 [建立自訂 KPI 儀表板](../learn/tutorial-app-dashboards.md)。

 