---
title: SQL 弱點評量 - Azure SQL Database| Microsoft Docs
description: 了解如何在 SQL Database 上設定與 SQL 弱點評量，並解譯評量報告。
services: sql-database
author: ronitr
manager: craigg
ms.service: sql-database
ms.topic: conceptual
ms.date: 05/17/2018
ms.author: ronitr
ms.reviewer: vanto
ms.openlocfilehash: e802096f563e7dacb7fe90cab187c1afa7d31854
ms.sourcegitcommit: c29d7ef9065f960c3079660b139dd6a8348576ce
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/12/2018
ms.locfileid: "44717568"
---
# <a name="sql-vulnerability-assessment"></a>SQL 弱點評量

SQL 弱點評量是容易設定的服務，可探索、追蹤及協助您修復潛在的資料庫弱點。 您可以用它來主動改善資料庫安全性。 

弱點評量是 [SQL 進階威脅防護](sql-advanced-threat-protection.md) (ATP) 供應項目的一部分，該供應項目是進階 SQL 安全性功能的整合套件。 弱點評量可以透過中央 SQL ATP 入口網站存取及管理。

## <a name="what-is-vulnerability-assessment"></a>什麼是弱點評估？
SQL 弱點評量 (VA) 這項服務可提供安全性狀態的可視性，並包括解決安全性問題和增強資料庫安全性的可行步驟。 它可協助您：  
- 符合需要資料庫掃描報告的合規性需求。  
- 符合資料隱私權標準。  
- 監視難以追蹤變更的動態資料庫環境。  

VA 是 Azure SQL Database 服務內建的掃描服務。 此服務採用的規則知識庫會對安全性弱點加上旗標，並醒目顯示偏離最佳做法的情況，例如設定錯誤、權限過高以及敏感性資料未受保護。 規則是以 Microsoft 的最佳作法為基礎，並著重於顯示資料庫和其珍貴資料的最大安全性問題風險。 它們涵蓋了資料庫層級的問題以及伺服器層級的安全性問題，例如伺服器防火牆設定和伺服器層級權限。 這些規則也代表各管理機關的許多要求以符合其合規性標準。  

掃描結果包含可解決每個問題和提供適用的自訂補救指令碼的可行步驟。 您可以為權限設定、功能設定及資料庫設定來設定可接受的基準，針對環境自訂評量報告。   

## <a name="implementing-va"></a>實作 VA  
下列步驟可在 SQL Database 上實作 VA。  

## <a name="1-run-a-scan"></a>1.執行掃描  
透過瀏覽至 [Azure SQL Database] 窗格中 [安全性] 標題下的 [進階威脅防護]，以開始使用 VA。 按一下以啟用進階威脅防護，然後按一下 [弱點評量] 卡片，該卡片會自動開啟 [弱點評定設定] 卡片。 

從設定要儲存掃描結果的儲存體帳戶開始。 如需儲存體帳戶的資訊，請參閱[關於 Azure 儲存體帳戶](../storage/common/storage-create-storage-account.md)。 設定儲存體之後，按一下 [掃描] 以掃描您資料庫的弱點。
  
![掃描資料庫](./media/sql-vulnerability-assessment/pp_va_initialize.png)  
  > [!NOTE]   
  > 掃描是輕量級且安全的。 執行會需要幾秒鐘的時間，並為完全唯讀。 它不會對資料庫進行任何變更。  

## <a name="2-view-the-report"></a>2.檢視報告  
掃描完成時，會在 Azure 入口網站中自動顯示掃描報告。 此報告會提供安全性狀態的概觀、找到多少個問題及其各自的嚴重性。 結果包括偏離最佳作法的警告和安全性相關設定的快照集，例如資料庫主體和角色及其相關權限。掃描報告也會提供在資料庫中所發現機密資料的對應，並包含使用[資料探索與分類](sql-database-data-discovery-and-classification.md)來將該資料分類的建議。 
 
![檢視報告](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

## <a name="3-analyze-the-results-and-resolve-issues"></a>3.分析結果並解決問題  
檢閱您的結果，並判斷報告中的哪些調查結果是環境中真正的安全性問題。 向下鑽研至每個失敗的結果，了解調查結果的影響，以及每個安全性檢查失敗的原因。 若要解決此問題，使用報告所提供的可操作補救資訊。  

![分析報告](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)    

## <a name="4-set-your-baseline"></a>4.設定基準  
當您檢閱評量結果時，可以將特定結果標示為環境中可接受的「基準」。 基本上，基準就是自訂報告結果的方式。 符合基準的結果都會視為傳入後續掃描。 建立基準安全性狀態之後，VA 只會報告偏離基準的情況，讓您可以將注意力放在相關的問題。  

![設定基準](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

## <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5.執行新掃描，以查看您的自訂追蹤報告  
完成設定**規則基準**之後，執行新掃描，以檢視自訂的報告。 VA 現在只會報告該偏離所核准基準狀態的安全性問題。 
 
![檢視您的自訂報告](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

VA 現在可用來監視您的資料庫，隨時維護高度安全性並符合組織原則。 如果需要合規性報告，VA 報告對於加快合規性流程很有幫助。  

## <a name="6-set-up-periodic-recurring-scans"></a>6.設定重複執行的週期性掃描
瀏覽至 [弱點評量] 設定以開啟**週期性掃描**。 這會將 [弱點評量] 設定為每週自動執行一次資料庫掃描。 掃描結果摘要將傳送到您所提供的電子郵件地址。

![檢視您的自訂報告](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

## <a name="7---export-an-assessment-report"></a>7. 匯出評量報告
按一下 [匯出掃描結果] 以建立一份可下載的掃描結果 Excel 報告。 此報告包含 [摘要] 索引標籤，其中顯示評量摘要，包括所有失敗的檢查。 它還包含一個 [結果] 索引標籤，其中包含完整的掃描結果集，包括所有執行的檢查以及每個檢查的結果詳細資料。 

## <a name="8---view-scan-history"></a>8. 檢視掃描歷程記錄
按一下 [VA] 窗格中的 [掃描歷程記錄]，以檢查先前在此資料庫上執行的所有掃描歷程記錄。 選取清單中的特定掃描，以檢視該掃描的詳細結果。

VA 現在可用來監視您的資料庫，隨時維護高度安全性並符合組織原則。 如果需要合規性報告，VA 報告對於加快合規性流程很有幫助。

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>使用 Azure PowerShell 管理弱點評定

您可以使用 Azure PowerShell Cmdlet，以程式設計方式管理您的弱點評定。 支援的 Cmdlet 如下：

* [Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) - 更新資料庫的弱點評定設定
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0)  傳回資料庫的弱點評定設定
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0)  清除資料庫的弱點評定設定
* [Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)  設定弱點評定規則的基準。
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)  取得指定規則的弱點評定規則基準。
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0)  清除弱點評定規則的基準。 必須先設定基準，才能使用此 Cmdlet 來進行清除。
* [Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0)  觸發弱點評定掃描的啟動
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord?view=azurermps-6.6.0)  取得與指定資料庫相關聯的所有弱點評定掃描記錄。
* [Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0)  將弱點評定掃描結果轉換為 Excel 檔案


如需指令碼範例，請參閱 [Azure SQL 弱點評定的 PowerShell 支援](https://blogs.msdn.microsoft.com/sqlsecurity/2018/08/02/azure-sql-vulnerability-assessment-now-with-powershell-support/)。


## <a name="next-steps"></a>後續步驟  

- 深入了解 [SQL 進階威脅防護](sql-advanced-threat-protection.md)
- 深入了解[資料探索與分類](sql-database-data-discovery-and-classification.md)
